/*!CK:2353069945!*//*1415709654,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["Jt7op"]); }

__d("MReactTypeaheadView",["React"],function(a,b,c,d,e,f,g){'use strict';var h=g.createClass({displayName:"MReactTypeaheadView",render:function(){var i=this.props.Renderer;return (g.createElement(i,{data:this.props.data,query:this.props.query,waiting:this.props.waiting,loaderMarkup:this.props.loaderMarkup,onTouchStart:this.props.onTouchStart,onClickItem:this.props.onClickItem,simpleSearch:this.props.simpleSearch,excludedEntries:this.props.excludedEntries}));}});e.exports=h;},null);
__d("MRecentSearchesUpdater",["Stratcom"],function(a,b,c,d,e,f,g){var h='search-recent-queries';function i(j){"use strict";j.listen('change',this.changeQuery.bind(this));j.listen('select',this.addRecentSearchWithSelection.bind(this));j.listen('show',this.changeResults.bind(this));j.listen('query',this.addRecentSearchWithQuery.bind(this));j.listen('refreshRecent',this.refreshRecent.bind(this));}i.prototype.refreshRecent=function(){"use strict";g.invoke('refreshRecent',h,{});};i.prototype.changeQuery=function(j){"use strict";this.currentQuery=j;};i.prototype.changeResults=function(j){"use strict";if(j.show){this.results=j.show.slice();}else this.results=j.slice();};i.prototype.addRecentSearchWithQuery=function(){"use strict";g.invoke('addRecentQuery',h,{query:this.currentQuery});};i.prototype.addRecentSearchWithSelection=function(j){"use strict";var k=j&&(j.rel||j.getAttribute('rel'));if(!k){this.addRecentSearchWithQuery();return;}for(var l=0;l<this.results.length;l++)if(this.results[l].id===k)g.invoke('addRecentSearch',h,{result:this.results[l]});};e.exports=i;},null);
__d("MSearchConst",[],function(a,b,c,d,e,f){e.exports={refid:46,feed_search:'feed',news_search:'news',video_search:'video',content_search:'content',msite_news_null_state:'mnns',msite_news_non_gs_null_state:'mnngns',event_click:'click',event_impression:'imp'};},null);
__d("MSearchTypeaheadLogger",["setTimeoutAcrossTransitions","DataStore","DOM","MTouchClick","MRequest","Stratcom","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(o,p){"use strict";this.typeahead=o;this.uri=p;this.initialize();this.emptyQueryResults=[];o.listen('change',function(r){this.startSession(r);if(this.sessionInProgress())this.data.query=r;}.bind(this));o.listen('keypressed',function(r){this.keypressed+=1;}.bind(this));o.listen('select',function(r){var s=r&&(r.rel||r.getAttribute('rel'));this.data.click_event=Date.now();if(s){this.data.selected_id=s;}else this.data.selected_search=1;if(this.results&&this.results.length&&this.data.query&&this.data.query.length)l.invoke('m:search-typeahead:select',null,{node:r,results:this.results.slice(),query:this.data.query.slice()});this.logToServer();}.bind(this));o.listen('show',function(r){this.startSession(this.typeahead.getValue());if(this.sessionInProgress())if(r.show){this.results=r.show.slice();if(!this.typeahead.getValue())this.emptyQueryResults=this.results;}else{this.data.candidate_results=r.slice();if(!this.typeahead.getValue())this.emptyQueryResults=this.data.candidate_results;}}.bind(this));o.listen('query',function(r,s){this.data.selected_search=1;this.data.selected_type=s;this.logToServer();}.bind(this));var q=j.hasTouchEvents()?'touchend':'click';l.listen(q,'search-activator',function(){this.startSession('',{force:true});}.bind(this));l.listen(q,'graph-search-activator',function(){this.startSession('',{force:true});}.bind(this));o.listen('scroll',function(event){this.data.scrolled=1;}.bind(this));}n.prototype.blur=function(o){"use strict";this.blurInProgress=true;g(function(){this.data.abandonment_reason=o;this.logToServer();}.bind(this),0);};n.prototype.startSession=function(o,p){"use strict";p=p||{};if(this.sessionID==null&&(o||p.force)){this.data={};this.keypressed=-1;this.sessionID=Math.random().toString();this.data.query=o;this.data.session_start=Date.now();l.invoke('m-typeahead-logger:new-session-id',null,{sessionID:this.sessionID});}};n.prototype.sessionInProgress=function(){"use strict";if(this.sessionID!==null&&!this.blurInProgress)return true;return false;};n.prototype.logToServer=function(){"use strict";if(this.sessionID){this.data.sid=this.sessionID;this.data.count_keys_pressed=this.keypressed;this.data.typeahead_type=this.typeahead.getTypeaheadType&&this.typeahead.getTypeaheadType();this.data.candidate_results=this.data.candidate_results||[];if(this.data.candidate_results.length===0)for(var o=0;o<this.results.length;o++){var p=this.results[o];if(p.rel>0){var q={id:p.rel};q.type=p.type;q.renderType=p.renderType;try{var s=i.find(p,'a','typeahead-result');if(h.get(s).bootstrap)q.bootstrap=1;}catch(r){}this.data.candidate_results.push(q);}}if(!this.data.query&&(!this.data.candidate_results||this.data.candidate_results.length===0))this.data.candidate_results=this.emptyQueryResults;var t=new k(this.uri);t.setMethod('POST').setData({stats:JSON.stringify(this.data)}).send();}this.initialize();};n.prototype.initialize=function(){"use strict";this.data={};this.sessionID=null;this.keypressed=-1;this.results=[];this.blurInProgress=false;};m(n.prototype,{typeahead:null,data:null,sessionID:null,results:null,uri:null,blurInProgress:null});e.exports=n;},null);
__d("MSearchTypeaheadPerfLogger",["BanzaiScuba","CurrentUser","performanceNow"],function(a,b,c,d,e,f,g,h,i){function j(k,l,m){"use strict";this._searchType=l.type;this._sampleRate=l.sample_rate;this._siteType=l.site;this._cacheEnable=m?1:0;this.init(k);this.initEvents();this._reset();}j.prototype.init=function(k){"use strict";this._data=k.getDatasource();this._typeahead=k;if(this._typeahead.props&&this._typeahead.props.vertical)this._vertical=this._typeahead.props.vertical;};j.prototype.initEvents=function(){"use strict";this._data.listen('initial_render',this.initialRender.bind(this));this._data.listen('after_complete',this.complete.bind(this));this._data.listen('req_dispatch',this.remoteRequestDispatch.bind(this));this._data.listen('req_sent',this.remoteRequestSent.bind(this));this._data.listen('req_recv',this.remoteRequestReceived.bind(this));this._typeahead.listen('update',this.queryStart.bind(this));this._typeahead.listen('render_start',this.renderStart.bind(this));this._typeahead.listen('rendered',this.rendered.bind(this));};j.prototype._reset=function(){"use strict";this._startTime=null;this._intialRenderTime=null;this._remoteRequestDispatchTime=null;this._remoteRequestSentTime=null;this._remoteRequestReceivedTime=null;this._renderStart=null;this._rendered=null;this._endTime=null;this._cacheOnly=1;this._resultLength=0;this._originQuery=null;this._query=null;};j.prototype.initialRender=function(){"use strict";this._intialRenderTime=Date.now();};j.prototype.complete=function(){"use strict";this._endTime=Date.now();this._query=this._typeahead.getValue();this.logToScuba();this._reset();};j.prototype.queryStart=function(k){"use strict";this._reset();this._originQuery=k;this._startTime=Date.now();};j.prototype.renderStart=function(){"use strict";this._renderStart=i();};j.prototype.rendered=function(){"use strict";this._rendered=i()-this._renderStart;};j.prototype.remoteRequestDispatch=function(k){"use strict";this._remoteRequestDispatchTime=Date.now();this._sid=k;};j.prototype.remoteRequestSent=function(){"use strict";this._remoteRequestSentTime=Date.now();};j.prototype.remoteRequestReceived=function(k){"use strict";this._remoteRequestReceivedTime=Date.now();this._resultLength=k;this._cacheOnly=0;};j.prototype.logToScuba=function(){"use strict";if(this._startTime===null)return;if(this._originQuery!==this._query)return;var k=new g('mobile_search_facebar_js',null,{addBrowserFields:true,addPredictedGeographyFields:true,addUser:true,addSearchVersion:true,addGatekeepers:{mtouchGKs:true}});k.addInteger('sample_rate',this._sampleRate);k.addNormal('typeahead_type',this._searchType);k.addNormal('site',this._siteType);if(this._vertical){k.addNormal('vertical',this._vertical);k.addNormal('search_mode',this._typeahead.state.searchMode);}k.addNormal('session_id',this._sid);k.addNormal('user_id',h.getID());k.addNormal('query',this._query);k.addInteger('cache_keypress_render',Math.max(this._intialRenderTime-this._startTime,0));if(this._rendered)k.addInteger('rendered',this._rendered);if(this._cacheOnly===0){k.addInteger('remote_keypress_query_dispatch',Math.max(this._remoteRequestDispatchTime-this._startTime,0));k.addInteger('remote_keypress_query_start',Math.max(this._remoteRequestSentTime-this._startTime,0));k.addInteger('remote_keypress_query_end',Math.max(this._remoteRequestReceivedTime-this._startTime,0));k.addInteger('remote_keypress_render',Math.max(this._endTime-this._startTime,0));k.addInteger('remote_render',Math.max(this._endTime-this._remoteRequestReceivedTime,0));k.addInteger('time_js_async',Math.max(this._remoteRequestReceivedTime-this._remoteRequestSentTime,0));}k.addInteger('end_to_end',Math.max(this._endTime-this._startTime,0));k.addInteger('num_result',this._resultLength);k.addNormal('is_cache_only',this._cacheOnly);k.addNormal('is_cache_enable',this._cacheEnable);k.post();};e.exports=j;},null);
__d("MTypeaheadNullstateSource",["URI","Stratcom","MTypeaheadTouchSource"],function(a,b,c,d,e,f,g,h,i){var j='graph-search-entry-point',k='search-recent-queries',l='search-trending-queries';for(var m in i)if(i.hasOwnProperty(m))o[m]=i[m];var n=i===null?null:i.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=i;function o(p,q){"use strict";i.call(this,p,q);h.listen('setCurrentProfileID',j,function(event){if(event.getData().profileID!==this.profileID){this.profileID=event.getData().profileID;this.refresh();}}.bind(this));h.listen('addRecentSearch',k,function(event){var r=event.getData().result;if(r)this.addRecentResult(r);}.bind(this));h.listen('addRecentQuery',k,function(event){var r=event.getData().query;if(r){var s=this.makeRecentResultWithQuery(r);this.addRecentResult(s);}}.bind(this));h.listen('refreshRecent',k,function(){this.refresh();}.bind(this));h.listen('click',l,function(){this.refresh();}.bind(this));h.listen('searchRefreshNullstate',null,function(){return this.refresh();}.bind(this));}o.prototype.makeRecentResultWithQuery=function(p){"use strict";return {display:p,name:p,id:p,uri:'/search/?query='+p};};o.prototype.addRecentResult=function(p){"use strict";p.isRecentSearch=true;var q=[],r=0;p.idx=r;q.push(p);for(var s in this._raw)if(s!=p.id){r++;this._raw[s].idx=r;q.push(this._raw[s]);}this._raw=q;};o.prototype.refresh=function(){"use strict";this._raw={};this.sendRequest();};o.prototype.getAuxiliaryData=function(){"use strict";return {profile_id:this.profileID?this.profileID:null,disable_single_state:this.singleStateDisabled?true:false};};o.prototype.ondata=function(p){"use strict";n.ondata.call(this,p.nullstate);};o.prototype.matchResults=function(p){"use strict";var q=[];if(p==='')q=Object.keys(this._raw);this.sortHits(p,q);var r=this.renderNodes(p,q);this.invoke('resultsready',r);this.invoke('complete');};o.prototype.setCurrentProfileID=function(p){"use strict";this.profileID=p;};o.prototype.setForceDisableSingleState=function(p){"use strict";this.singleStateDisabled=p;};o.prototype.sortHits=function(p,q){"use strict";q.sort(this.sortingFunction.bind(this));};o.prototype.sortingFunction=function(p,q){"use strict";var r=this._raw[p],s=isNaN(r.idx)?Number.MAX_VALUE:r.idx,t=this._raw[q],u=isNaN(t.idx)?Number.MAX_VALUE:t.idx;return s-u;};o.prototype.getTransformer=function(){"use strict";return function(p){if(p.type==='trending'){var q=new g('/search/trending');q.setQueryData({query:p.name,topicID:p.id,isTrending:true});return {id:p.name,display:p.name,name:p.name,uri:q.toString(),topicID:p.id,trendingQueryID:p.trendingQueryID,subtext:p.articleTitle,type:p.type,photo:p.articleImageURI,actionTime:0,isTrending:true,isNullStateSuggestion:true};}if(p.type==='keyword'||p.type==='grammar'){q=new g(p.path||p.uri);if(p.subscribed_search===true)q.addQueryData({isTrending:true});return {cost:p.cost,idx:p.idx,display:p.text,name:p.text,type:'keyword',id:p.uid,uri:q.toString(),actionTime:p.action_time,isRelatedSearch:p.related_search,isRecentSearch:p.recent_search,isSuggestedSearch:p.suggested_search,isSubscribedSearch:p.subscribed_search,subtext:p.subtext,logInfo:p.logInfo,isNullStateSuggestion:true};}return {actionTime:p.action_time,name:p.text,uri:p.path||p.uri,id:p.uid||p.id,display:p.name||p.text,photo:p.photo,category:p.category,cost:p.cost,idx:p.idx,tokens:p.tokens,type:p.type[0].toUpperCase()+p.type.slice(1),verticalType:p.vertical_type,subtext:p.subtext,isRecentSearch:p.recent_search,isSubscribedSearch:p.subscribed_search,logInfo:p.logInfo,isNullStateSuggestion:true};};};e.exports=o;},null);
__d("MReactTypeahead",["DOM","EventEmitter","MPageController","Parent","React","Stratcom","URI","Vector","MReactTypeaheadView","MRecentSearchesUpdater","MSearchConst","MSearchTypeaheadLogger","MSearchTypeaheadPerfLogger","MTypeaheadNullstateSource","MTypeaheadOnDemandSource","MTypeaheadTouchSource","MTypeaheadTouchSourceWithSuggestions","TypeaheadCompositeSource","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){'use strict';var z=k.PropTypes,aa=10,ba=k.createClass({displayName:"MReactTypeahead",_datasource:null,_datasourceListeners:null,_eventEmitter:null,propTypes:{onClickItem:z.func,onBlur:z.func,onKeyUp:z.func,onKeyDown:z.func,onTouchStart:z.func,placeholder:z.string,presenter:z.object.isRequired,showClearButton:z.bool,typeaheadConfig:z.object.isRequired,excludedEntries:z.object,autoWidth:z.bool,getTypeaheadOnDemandSource:z.func,getTypeaheadTouchSource:z.func,getTypeaheadCompositeSource:z.func,getTypeaheadNullstateSource:z.func,onFocus:z.func,simpleSearch:z.bool,suggestions:z.array,hideSelected:z.bool,maxSuggestionCount:z.number},shouldComponentUpdate:function(ca,da){if(this.state.resultData!==da.resultData||this.state.waiting!==da.waiting)return true;var ea=ca.excludedEntries,fa=this.props.excludedEntries;for(var ga in ea)if(ea[ga]!==fa[ga])return true;for(var ha in fa)if(fa[ha]!==ea[ha])return true;return false;},componentDidMount:function(){this._syncInputWidth();this.refs.input.type="search";},componentWillUpdate:function(){this._invoke('render_start');},componentDidUpdate:function(ca,da){this.props.onUpdate&&this.props.onUpdate();this._syncInputWidth();this._invoke('rendered');},getInitialState:function(){return {resultData:[],query:null,waiting:false};},listen:function(ca,da){this._eventEmitter=this._eventEmitter||new h();return this._eventEmitter.addListener(ca,da.bind(this));},_invoke:function(ca,da){this._eventEmitter&&this._eventEmitter.emit.apply(this._eventEmitter,[ca].concat(da));},waitForResults:function(){this.setState({waiting:true});},showResults:function(ca){if(this.props.hideSelected)ca=this._filterExcluded(ca);ca.forEach(function(da){da.uri=new m(da.uri).addQueryData('refid',q.refid);return da;});this.setState({resultData:ca,waiting:true},this._checkQueryState);this._invoke('show',[ca]);},_filterExcluded:function(ca){var da=this.props.excludedEntries;if(da)return ca.filter(function(ea){return !da[ea.id];});return ca;},_checkQueryState:function(){if(this.state.query==null)this.setState({waiting:false});},complete:function(){this.setState({waiting:false});},reset:function(){this.refs.input.getDOMNode().value='';this.query('',true);},query:function(ca,da){da=da||false;if(da||this.state.query!==ca){this._invoke('update',[ca]);this._invoke('change',[ca]);this.setState({query:ca});}},inputChanged:function(){if(this.refs.input.getDOMNode().value==='')this.query('');},onSearchFormSubmit:function(event){event.preventDefault();var ca=this.refs.input.getDOMNode(),da=ca.value;this._invoke('query',[this.state.resultData]);var ea=new m('/search/?query').addQueryData('query',da).toString();i.load(ea);},render:function(){var ca=this.props.showClearButton&&this.state.query,da=this.props.typeaheadRootClassName||"_5fn4",ea=k.createElement("input",{type:"search",ref:"input",className:"input",autoCorrect:"off",autoComplete:"off",autoCapitalize:"off",name:"query",placeholder:this.props.placeholder,onBlur:this.props.onBlur,onKeyUp:this.onKeyUp,onKeyDown:this.props.onKeyDown,onFocus:this._onFocus,onChange:this.inputChanged});if(this.props.typeaheadConfig.submitOnEnter)ea=k.createElement("form",{ref:"searchForm",action:"/search",className:"_4e7a",onSubmit:this.onSearchFormSubmit},ea,k.createElement("input",{type:"hidden",name:"source",value:"typeahead"}));var fa="_5fn6 touchable";if(this.props.useStandardClearButton)fa="_5fn6 touchable mClearButton";var ga=this.props.hideSelected?this._filterExcluded(this.state.resultData):this.state.resultData;return (k.createElement("div",{className:this.props.className},k.createElement("div",{className:da},k.createElement("div",{className:"_5fn5"},ea,k.createElement("span",{ref:"textSizeProxy",className:"_5rmg"},this.state.query||this.props.placeholder),k.createElement("div",{className:fa,"data-sigil":"touchable",style:{display:ca?'':'none'},onMouseDown:this.onClearButtonEvent,onTouchStart:this.onClearButtonEvent},k.createElement("div",null,"×")))),k.createElement(o,{ref:"results",Renderer:this.props.presenter.ViewRenderer,data:ga,excludedEntries:this.props.excludedEntries,query:this.state.query,waiting:this.state.waiting,loaderMarkup:this.props.typeaheadConfig.loaderMarkup,onTouchStart:this.props.onTouchStart,simpleSearch:this.props.simpleSearch,onClickItem:this._onClickItem})));},setInputValue:function(ca){if(ca)this.refs.input.getDOMNode().value=ca;},onKeyUp:function(event){var ca=this.getInputValue();this.query(ca);this.props.onKeyUp&&this.props.onKeyUp(event);},onClearButtonEvent:function(event){event.preventDefault();this.reset();this.focusInput();},getInputValue:function(){return this.refs.input.getDOMNode().value;},getInputNode:function(){return this.refs.input.getDOMNode();},getValue:function(){return this.getInputValue();},focusInput:function(){this.refs.input.getDOMNode().focus();},blurInput:function(){this.refs.input.getDOMNode().blur();},_onClickItem:function(event,ca,da){this.reset();this.props.onClickItem&&this.props.onClickItem(event,ca,da);this._invoke('select',[j.byClass(event.target,"_5fna")]);this.forceUpdate();},getDisplayedHeight:function(){var ca=this.refs.results.getDOMNode(),da=n.getPos(ca).y;return n.getDim(ca).y+da;},getDatasource:function(){return this._datasource;},_setDatasource:function(ca){if(this._datasource)this._datasource.unbindFromTypeahead(this);this._datasource=ca;if(!this._datasource)return;this._datasourceListeners=[ca.listen('waiting',this.waitForResults),ca.listen('resultsready',this.showResults),ca.listen('complete',this.complete)];ca.bindToTypeahead(this);},_syncInputWidth:function(){if(!this.props.autoWidth)return;var ca=this.refs.textSizeProxy.getDOMNode().offsetWidth;if(ca===0)return;this.refs.input.getDOMNode().style.width=ca+'px';},configureDatasource:function(ca){if(this._datasource)return;var da=this.props.typeaheadConfig.sources,ea=[],fa=this.getTypeaheadTouchSource(da.bootstrapped.src,da.bootstrapped.source_key,this.props.suggestions);fa.setShowSecondaryAction(true);fa.reactRendered=true;this.touchSource=fa;ea.push(fa);if(da.nullstate){this.nullstateDataSource=this.getTypeaheadNullstateSource(da.nullstate.src);this.nullstateDataSource.setMaximumResultCount(da.nullstate.max_results);this.nullstateDataSource.setShowSecondaryAction(true);this.nullstateDataSource.reactRendered=true;ea.push(this.nullstateDataSource);}fa=this.getTypeaheadOnDemandSource(da.online.src);fa.setMaximumResultCount(da.online.max_results);fa.setEnableImmediateReturnOfCachedResults(da.online.enable_caching);if(ca){if(ca.enableQueryThrottle)fa.setThrottleSendRequest(ca.queryThrottleTime);fa.setMaxResults(ca.maxResults);fa.setEnableEagerSendRequest(ca.enableEagerSendRequest);fa.setQueryDelay(ca.queryWaitTime);}fa.setShowSecondaryAction(true);fa.reactRendered=true;ea.push(fa);var ga=this.getTypeaheadCompositeSource(ea);if(this.props.typeaheadConfig.excludeids)this.props.typeaheadConfig.excludeids.forEach(function(ha){ga.addExcludeID(ha);});ga.reactRendered=true;ga.mergeKey='id';this._setDatasource(ga);this._invoke('start');},cleanup:function(){this._setDatasource(null);},configureMSideNavMarauderLogger:function(){if(!this.props.typeaheadConfig.mSideNavMarauderLogger||this._mSideNavMarauderLoggerConfigurationComplete)return;this.props.typeaheadConfig.mSideNavMarauderLogger.setupTypeaheadListener(this);this._mSideNavMarauderLoggerConfigurationComplete=true;},configureMRecentSearchesUpdater:function(){if(this.props.typeaheadConfig.hasRecentSearches)new p(this);},configureMSearchTypeaheadLogger:function(){if(this._mSearchTypeaheadLoggerConfigurationComplete)return;l.listen('m-typeahead-logger:new-session-id',null,this.addSessionIDToSearch);var ca='/search/metrics.php',da=new r(this,ca);this._mSearchTypeaheadLoggerConfigurationComplete=true;l.listen('log-m-search-session-end',null,function(ea){da.blur(ea.getData().reason);});},configureMSearchTypeaheadPerfLogger:function(){if(!this.props.typeaheadConfig.typeaheadScubaInfo||this._mSearchTypeaheadPerfLoggerConfigurationComplete)return;new s(this,this.props.typeaheadConfig.typeaheadScubaInfo,this.props.typeaheadConfig.sources.online.enable_caching);this._mSearchTypeaheadPerfLoggerConfigurationComplete=true;},addSessionIDToSearch:function(ca){if(!this.refs||!this.refs.searchForm)return;var da=this.refs.searchForm.getDOMNode(),ea=g.scry(da,'input','search-typeahead-session-id')[0];if(!ea){ea=document.createElement('input');ea.type='hidden';ea.name='tsid';da.appendChild(ea);l.addSigil(ea,'search-typeahead-session-id');}ea.value=ca.getData().sessionID;},getTypeaheadCompositeSource:function(ca){if(this.props.getTypeaheadCompositeSource)return this.props.getTypeaheadCompositeSource(ca);return new x(ca);},getTypeaheadOnDemandSource:function(ca){if(this.props.getTypeaheadOnDemandSource)return this.props.getTypeaheadOnDemandSource(ca);return new u(ca);},getTypeaheadTouchSource:function(ca,da,ea){if(this.props.getTypeaheadTouchSource)return this.props.getTypeaheadTouchSource(ca,da);if(ea){var fa=new w(ca,da,ea);if(this.props.maxSuggestionCount){fa.setMaximumResultCount(this.props.maxSuggestionCount);}else fa.setMaximumResultCount(aa);return fa;}return new v(ca,da);},getTypeaheadNullstateSource:function(ca){if(this.props.getTypeaheadNullstateSource)return this.props.getTypeaheadNullstateSource(ca);return new t(ca);},getTypeaheadType:function(){var ca='m_side_nav';if(this.props.simpleSearch){ca+='_simple';}else ca+='_gsv2';return ca;},updateSuggestionsIds:function(ca){if(this.touchSource)this.touchSource.setSuggestionsIds(ca);if(this.refs.input.getDOMNode().value==='')this.reset();},componentWillUnmount:function(){for(var ca=0;ca<this._datasourceListeners.length;++ca)this._datasourceListeners[ca].remove();this._datasourceListeners=null;},_onFocus:function(){this.props.onFocus&&this.props.onFocus();this.query(this.getInputValue());}});e.exports=ba;},null);
__d("MCompositionUserActions",["MComposition","MCompositionConfigFields","MCompositionDispatcher","MCompositionShareFields","MCompositionStoreID","MCompositionConstants"],function(a,b,c,d,e,f,g,h,i,j,k){var l=b('MCompositionConstants').ActionTypes;function m(o,p){i.handleUpdateFromUserAction({actionType:o,data:p});}var n={configDisablePhotosUpdate:function(o){var p={};p[k.CONFIG]={};p[k.CONFIG][h.DISABLE_PHOTOS]=o;m(l.DISABLE_PHOTOS,p);},finalize:function(){m(l.COMPOSITION_FINALIZE,{});},initialize:function(o){m(l.COMPOSITION_INITIALIZE,o||{});},shareLinkUpdate:function(o){var p={};p[k.SHARE]={};p[k.SHARE][j.SHARE_URI]=o;m(l.SHARE_LINK_UPDATE,p);},shareRemoveLinkPreview:function(o){var p={};p[o]=true;var q={};q[k.SHARE]={};q[k.SHARE][j.DISABLED_LINKS]=p;m(l.SHARE_REMOVE_PREVIEW,q);},minutiaeRemove:function(){m(l.MINUTIAE_REMOVE,{});},minutiaeSet:function(o){var p={};p[k.MINUTIAE]=o;m(l.MINUTIAE_SET,p);},photoUpdate:function(o){var p={};p[k.PHOTO]=o;m(l.PHOTO_CHANGE,p);},placeRemove:function(){m(l.PLACE_REMOVE,{});},placeSet:function(o){m(l.PLACE_SET,new g().setStoreData(k.PLACE,o).serialize());},statusUpdate:function(o){m(l.STATUS_CHANGE,new g().setStoreData(k.STATUS,o).serialize());},withUpdate:function(o){var p={};p[k.WITH_TAGS]=o;m(l.WITH_CHANGE,p);},groupSellUpdate:function(o){m(l.GROUP_SELL_UPDATE,new g().setStoreData(k.GROUP_SELL,o).serialize());},privacyUpdate:function(o){var p={};p[k.PRIVACY]=o;m(l.PRIVACY_CHANGE,p);}};e.exports=n;},null);
__d("MCompositionPrivacyStore",["MCompositionStore","MCompositionPrivacyFields","MCompositionStoreID","emptyFunction","MCompositionConstants"],function(a,b,c,d,e,f,g,h,i,j){var k=b('MCompositionConstants').ActionTypes,l=new g(i.PRIVACY,h).setRequiredFields(h.PRIVACY_FBID).setHandlerFor(k.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(k.COMPOSITION_INITIALIZE,j.thatReturnsArgument).setHandlerFor(k.PRIVACY_CHANGE,j.thatReturnsArgument).register();e.exports=l;},null);
__d("Utf16",[],function(a,b,c,d,e,f){var g={decode:function(h){switch(h.length){case 1:return h.charCodeAt(0);case 2:return 65536|((h.charCodeAt(0)-55296)*1024)|(h.charCodeAt(1)-56320);}},encode:function(h){if(h<65536){return String.fromCharCode(h);}else return String.fromCharCode(55296+((h-65536)>>10))+String.fromCharCode(56320+(h%1024));}};e.exports=g;},null);
__d("SupportedEmoji",["cx","Utf16"],function(a,b,c,d,e,f,g,h){var i=new RegExp("([\u203C\u2049\u2100-\u21FF\u2300-\u27FF"+"\u2900-\u29FF\u2B00-\u2BFF\u3000-\u30FF\u3200-\u32FF]|"+"\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDEFF])([\uFE00-\uFE0F])?"),j={126980:"_4_o0",127378:"_4_o1",127385:"_4_o2",127386:"_4_o3",127489:"_4_o4",127490:"_4_o5",127514:"_4_o6",127535:"_4_o7",127539:"_4_o8",127541:"_4_o9",127542:"_4_oa",127543:"_4_ob",127544:"_4_oc",127545:"_4_od",127546:"_4_oe",127568:"_4_of",127744:"_2b_",127746:"_2c0",127747:"_4_og",127748:"_4_oh",127749:"_4_oi",127750:"_4_oj",127751:"_4_ok",127752:"_4_ol",127754:"_2c1",127769:"_2c2",127775:"_2c3",127793:"_2c4",127796:"_2c5",127797:"_2c6",127799:"_2c7",127800:"_2c8",127801:"_2c9",127802:"_2ca",127803:"_2cb",127806:"_2cc",127808:"_2cd",127809:"_2ce",127810:"_2cf",127811:"_2cg",127813:"_4_om",127814:"_4_on",127817:"_4_oo",127818:"_2ch",127822:"_2ci",127827:"_2cj",127828:"_2ck",127832:"_4_op",127833:"_4_oq",127834:"_4_or",127835:"_4_os",127836:"_4_ot",127837:"_4_ou",127838:"_4_ov",127839:"_4_ow",127841:"_4_ox",127842:"_4_oy",127843:"_4_oz",127846:"_4_o-",127847:"_4_o_",127856:"_4_p0",127857:"_4_p1",127858:"_4_p2",127859:"_4_p3",127860:"_4_p4",127861:"_4_p5",127862:"_4_p6",127864:"_2cl",127866:"_2cm",127867:"_4_p7",127872:"_4_p8",127873:"_2cn",127875:"_2co",127876:"_2cp",127877:"_2cq",127880:"_2cr",127881:"_2cs",127884:"_4_p9",127885:"_2ct",127886:"_2cu",127887:"_2cv",127888:"_2cw",127890:"_4_pa",127891:"_2cx",127905:"_4_pb",127906:"_4_pc",127908:"_4_pd",127909:"_4_pe",127910:"_4_pf",127911:"_4_pg",127912:"_4_ph",127913:"_4_pi",127915:"_4_pj",127916:"_4_pk",127917:"_4_pl",127919:"_4_pm",127921:"_4_pn",127925:"_2cy",127926:"_2cz",127927:"_4_po",127928:"_4_pp",127930:"_4_pq",127932:"_2c-",127934:"_4_pr",127935:"_4_ps",127936:"_4_pt",127937:"_4_pu",127942:"_4_pv",127944:"_4_pw",127968:"_4_px",127969:"_4_py",127970:"_4_pz",127971:"_4_p-",127973:"_4_p_",127974:"_4_q0",127975:"_4_q1",127976:"_4_q2",127977:"_4_q3",127978:"_4_q4",127979:"_4_q5",127980:"_4_q6",127981:"_4_q7",127983:"_4_q8",127984:"_4_q9",128013:"_2c_",128014:"_2d0",128017:"_2d1",128018:"_2d2",128020:"_2d3",128023:"_2d4",128024:"_2d5",128025:"_2d6",128026:"_2d7",128027:"_2d8",128031:"_2d9",128032:"_2da",128033:"_2db",128037:"_2dc",128038:"_2dd",128039:"_2de",128040:"_2df",128041:"_2dg",128043:"_2dh",128044:"_2di",128045:"_2dj",128046:"_2dk",128047:"_2dl",128048:"_2dm",128049:"_2dn",128051:"_2do",128052:"_2dp",128053:"_2dq",128054:"_491",128055:"_2dr",128056:"_2ds",128057:"_2dt",128058:"_2du",128059:"_2dv",128062:"_2dw",128064:"_2dx",128066:"_2dy",128067:"_2dz",128068:"_2d-",128069:"_2d_",128070:"_2e0",128071:"_2e1",128072:"_2e2",128073:"_2e3",128074:"_2e4",128075:"_2e5",128076:"_2e6",128077:"_2e7",128078:"_2e8",128079:"_2e9",128080:"_2ea",128081:"_4_qa",128082:"_4_qb",128084:"_4_qc",128085:"_4_qd",128087:"_4_qe",128088:"_4_qf",128089:"_4_qg",128092:"_4_qh",128095:"_4_qi",128096:"_4_qj",128097:"_4_qk",128098:"_4_ql",128102:"_2eb",128103:"_2ec",128104:"_2ed",128105:"_2ee",128107:"_2ef",128110:"_2eg",128111:"_2eh",128113:"_2ei",128114:"_2ej",128115:"_2ek",128116:"_2el",128117:"_2em",128118:"_2en",128119:"_2eo",128120:"_2ep",128123:"_2eq",128124:"_2er",128125:"_2es",128126:"_2et",128127:"_2eu",128128:"_2ev",128130:"_2ew",128131:"_2ex",128132:"_4_qm",128133:"_2ey",128136:"_4_qn",128137:"_4_qo",128138:"_4_qp",128139:"_2ez",128140:"_4_qq",128141:"_4_qr",128142:"_4_qs",128143:"_2e-",128144:"_2e_",128145:"_2f0",128146:"_4_qt",128147:"_2f1",128148:"_2f2",128150:"_2f3",128151:"_2f4",128152:"_2f5",128153:"_2f6",128154:"_2f7",128155:"_2f8",128156:"_2f9",128157:"_2fa",128158:"_4_qu",128159:"_4_qv",128160:"_4_qw",128161:"_4_qx",128162:"_2fb",128163:"_4_qy",128164:"_2fc",128166:"_2fd",128167:"_4_qz",128168:"_2fe",128169:"_2ff",128170:"_2fg",128176:"_4_q-",128178:"_4_q_",128180:"_4_r0",128181:"_4_r1",128186:"_4_r2",128187:"_2fh",128188:"_4_r3",128189:"_2fi",128190:"_2fj",128191:"_2fk",128192:"_2fl",128214:"_4_r4",128221:"_4_r5",128222:"_2fm",128224:"_2fn",128225:"_4_r6",128226:"_4_r7",128227:"_4_r8",128232:"_4_r9",128233:"_4_ra",128234:"_4_rb",128235:"_4_rc",128236:"_4_rd",128237:"_4_re",128238:"_4_rf",128241:"_2fo",128242:"_2fp",128243:"_4_rg",128244:"_4_rh",128246:"_4_ri",128247:"_4_rj",128250:"_2fq",128251:"_4_rk",128252:"_4_rl",128264:"_4_rm",128269:"_4_rn",128270:"_4_ro",128271:"_4_rp",128272:"_4_rq",128273:"_4_rr",128274:"_4_rs",128275:"_4_rt",128276:"_2fr",128286:"_4_ru",128293:"_492",128296:"_4_rv",128299:"_4_rw",128304:"_4_rx",128305:"_4_ry",128306:"_4_rz",128307:"_4_r-",128308:"_4_r_",128309:"_4_s0",128310:"_4_s1",128311:"_4_s2",128312:"_4_s3",128313:"_4_s4",128507:"_4_s5",128508:"_4_s6",128509:"_4_s7",128513:"_2fs",128514:"_2ft",128515:"_2fu",128516:"_2fv",128518:"_2fw",128521:"_2fx",128522:"_1q3y",128524:"_2fz",128525:"_2f-",128527:"_2f_",128530:"_2g0",128531:"_2g1",128532:"_2g2",128534:"_2g3",128536:"_2g4",128538:"_2g5",128540:"_2g6",128541:"_2g7",128542:"_2g8",128544:"_2g9",128545:"_2ga",128546:"_2gb",128547:"_2gc",128548:"_2gd",128549:"_2ge",128552:"_2gf",128553:"_2gg",128554:"_2gh",128555:"_2gi",128557:"_2gj",128560:"_2gk",128561:"_2gl",128562:"_2gm",128563:"_2gn",128565:"_2go",128567:"_2gp",128568:"_2gq",128569:"_2gr",128570:"_2gs",128571:"_2gt",128572:"_2gu",128573:"_2gv",128575:"_2gw",128576:"_2gx",128587:"_2gy",128588:"_2gz",128589:"_2g-",128591:"_2g_",128640:"_4_s8",128643:"_4_s9",128644:"_4_sa",128645:"_4_sb",128649:"_4_sc",128652:"_4_sd",128655:"_4_se",128657:"_4_sf",128658:"_4_sg",128659:"_4_sh",128661:"_4_si",128663:"_4_sj",128665:"_4_sk",128666:"_4_sl",128674:"_4_sm",128676:"_4_sn",128677:"_4_so",128679:"_4_sp",128684:"_4_sq",128685:"_4_sr",128690:"_4_ss",128697:"_4_st",128698:"_4_su",128699:"_4_sv",128700:"_4_sw",128701:"_4_sx",128702:"_4_sy",128704:"_4_sz",9642:"_4_s-",9643:"_4_s_",9723:"_4_t0",9724:"_4_t1",9725:"_4_t2",9726:"_4_t3",9742:"_4_t4",9757:"_2h0",9786:"_2h1",9855:"_4_t5",9888:"_4_t6",9889:"_2h2",9898:"_4_t7",9899:"_4_t8",9917:"_4_t9",9918:"_4_ta",9924:"_2h3",9940:"_4_tb",9962:"_4_tc",9970:"_4_td",9971:"_4_te",9973:"_4_tf",9978:"_4_tg",9981:"_4_th",9994:"_2h4",9995:"_2h5",9996:"_2h6",10060:"_4_ti",10062:"_4_tj",10145:"_4_tk",10175:"_4_tl",11013:"_4_tm",11014:"_4_tn",11015:"_4_to",11035:"_4_tp",11036:"_4_tq",11088:"_4_tr",11093:"_4_ts",12349:"_4_tt",8598:"_4_tu",8599:"_4_tv",8600:"_4_tw",8601:"_4_tx",9728:"_2h7",9729:"_2h8",9748:"_2h9",9749:"_2ha",9824:"_4_ty",9827:"_4_tz",9829:"_4_t-",9830:"_4_t_",9832:"_4_u0",9986:"_4_u1",9992:"_4_u2",9993:"_4_u3",10006:"_4_u4",10024:"_2hb",10035:"_4_u5",10036:"_4_u6",10067:"_4_u7",10068:"_4_u8",10069:"_4_u9",10071:"_4_ua",10084:"_2hc",10548:"_4_ub",10549:"_4_uc",12951:"_4_ud",12953:"_4_ue"},k=function(l){var m=0;while(l.length>0){var n=i.exec(l);if(!n||!n.length)return false;var o=n[1],p=n.index,q=h.decode(o),r=j[q];if(!r){m+=p+1;l=l.substr(p+1);continue;}n.index+=m;n.emoji=r;return n;}return false;};e.exports={findEmoji:k,emoji:j,_utf16Regex:i};},null);
__d("EmoteTypes",[],function(a,b,c,d,e,f){f.TEXT='text';f.EMOTE='emote';f.EMOTE_FBID='emote_fbid';},null);
__d("EmoticonsList",[],function(a,b,c,d,e,f){e.exports={emotes:{":)":"smile",":-)":"smile",":]":"smile","=)":"smile","(:":"smile","(=":"smile",":(":"frown",":-(":"frown",":[":"frown","=(":"frown",")=":"frown",":poop:":"poop",":putnam:":"putnam",":P":"tongue",":-P":"tongue",":-p":"tongue",":p":"tongue","=P":"tongue","=D":"grin",":-D":"grin",":D":"grin",":o":"gasp",":-O":"gasp",":O":"gasp",":-o":"gasp",";)":"wink",";-)":"wink","8-)":"glasses","B-)":"glasses","B|":"sunglasses","8-|":"sunglasses","8|":"sunglasses","B-|":"sunglasses",">:(":"grumpy",">:-(":"grumpy",":/":"unsure",":-/":"unsure",":\\":"unsure",":-\\":"unsure","=/":"unsure","=\\":"unsure",":'(":"cry","3:)":"devil","3:-)":"devil","O:)":"angel","O:-)":"angel",":*":"kiss",":-*":"kiss","<3":"heart","&lt;3":"heart","♥":"heart","^_^":"kiki","-_-":"squint","o.O":"confused","O.o":"confused_rev",">:o":"upset",">:O":"upset",">:-O":"upset",">:-o":"upset",">_<":"upset",">.<":"upset",":v":"pacman",":|]":"robot",":3":"colonthree","<(\")":"penguin","(^^^)":"shark","(y)":"like",":like:":"like","(Y)":"like"},symbols:{smile:":)",frown:":(",poop:":poop:",putnam:":putnam:",tongue:":P",grin:"=D",gasp:":o",wink:";)",glasses:"8-)",sunglasses:"B|",grumpy:">:(",unsure:":/",cry:":'(",devil:"3:)",angel:"O:)",kiss:":*",heart:"<3",kiki:"^_^",squint:"-_-",confused:"o.O",confused_rev:"O.o",upset:">:o",pacman:":v",robot:":|]",colonthree:":3",penguin:"<(\")",shark:"(^^^)",like:"(y)"},regexp:/(^|[\s'".])(:\)(?!\))|:\-\)(?!\))|:\]|=\)(?!\))|\(:|\(=|:\(|:\-\(|:\[|=\(|\)=|:poop:|:putnam:|:P|:\-P|:\-p|:p|=P|=D|:\-D|:D|:o|:\-O|:O|:\-o|;\)(?!\))|;\-\)(?!\))|8\-\)(?!\))|B\-\)(?!\))|B\||8\-\||8\||B\-\||>:\(|>:\-\(|:\/|:\-\/|:\\|:\-\\|=\/|=\\|:'\(|3:\)(?!\))|3:\-\)(?!\))|O:\)(?!\))|O:\-\)(?!\))|:\*|:\-\*|<3|&lt;3|\u2665|\^_\^|\-_\-|o\.O|O\.o|>:o|>:O|>:\-O|>:\-o|>_<|>\.<|:v|:\|\]|:3|<\("\)(?!\))|\(\^\^\^\)(?!\))|\(y\)(?!\))|:like:|\(Y\)(?!\)))([\s'".,!?]|<br>|$)/,noncapturingRegexp:/(?:^|[\s'".])(:\)(?!\))|:\-\)(?!\))|:\]|=\)(?!\))|\(:|\(=|:\(|:\-\(|:\[|=\(|\)=|:poop:|:putnam:|:P|:\-P|:\-p|:p|=P|=D|:\-D|:D|:o|:\-O|:O|:\-o|;\)(?!\))|;\-\)(?!\))|8\-\)(?!\))|B\-\)(?!\))|B\||8\-\||8\||B\-\||>:\(|>:\-\(|:\/|:\-\/|:\\|:\-\\|=\/|=\\|:'\(|3:\)(?!\))|3:\-\)(?!\))|O:\)(?!\))|O:\-\)(?!\))|:\*|:\-\*|<3|&lt;3|\u2665|\^_\^|\-_\-|o\.O|O\.o|>:o|>:O|>:\-O|>:\-o|>_<|>\.<|:v|:\|\]|:3|<\("\)(?!\))|\(\^\^\^\)(?!\))|\(y\)(?!\))|:like:|\(Y\)(?!\)))(?:[\s'".,!?]|<br>|$)/};},null);
__d("createEmoteTokenizer",["EmoteTypes"],function(a,b,c,d,e,f,g){var h=40;function i(j){return function(k){var l=k,m=[],n=h;while(n--){var o=j.regexp.exec(l);if(!o||!o.length)break;var p=o[2],q=o.index+o[1].length,r=l.substring(0,q);if(r)m.push({type:g.TEXT,text:r});var s=j.emotes[p];if(s){m.push({type:g.EMOTE,text:p,emote:s});}else m.push({type:g.TEXT,text:p});l=l.substring(q+p.length);}if(l)m.push({type:g.TEXT,text:l});return m;};}e.exports=i;},null);
__d("emoteFBIDTokenizer",["EmoteTypes"],function(a,b,c,d,e,f,g){var h=/\[\[([a-z\d\.]+)\]\]/gi;function i(j){return j.split(h).map(function(k,l){if(l%2===0){return {type:g.TEXT,text:k};}else return {type:g.EMOTE_FBID,text:'[['+k+']]',value:k};});}e.exports=i;},null);
__d("getContextualParent",["ge"],function(a,b,c,d,e,f,g){function h(i,j){var k,l=false;do{if(i.getAttribute&&(k=i.getAttribute('data-ownerid'))){i=g(k);l=true;}else i=i.parentNode;}while(j&&i&&!l);return i;}e.exports=h;},null);
__d("collectDataAttributes",["getContextualParent"],function(a,b,c,d,e,f,g){function h(i,j){var k={},l={},m=j.length,n;for(n=0;n<m;++n){k[j[n]]={};l[j[n]]='data-'+j[n];}var o={tn:'',"tn-debug":','};while(i){if(i.getAttribute)for(n=0;n<m;++n){var p=i.getAttribute(l[j[n]]);if(p){var q=JSON.parse(p);for(var r in q)if(o[r]!==undefined){if(k[j[n]][r]===undefined)k[j[n]][r]=[];k[j[n]][r].push(q[r]);}else if(k[j[n]][r]===undefined)k[j[n]][r]=q[r];}}i=g(i);}for(var s in k)for(var t in o)if(k[s][t]!==undefined)k[s][t]=k[s][t].join(o[t]);return k;}e.exports=h;},null);
__d("AppRequestLogger",["MCache"],function(a,b,c,d,e,f,g){var h={setLastApp:function(i){var j=g.getItem('appEventList')||[];j.push({app_id:i,time:Math.round(Date.now()/1000),event_type:'request_accept'});g.setItem('appEventList',j);}};e.exports=h;},null);
__d("MPlaces",["$","DOM","DataStore","LoadingIndicator","MRequest","Stratcom","MPageController","MURI","URI","FWLoader"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=b('FWLoader').FW,q={LINK_SIGIL:'gps-link',FORM_SIGIL:'gps-form',UPDATE_LOCATION_INTERVAL:60000,desiredProperties:['latitude','longitude','accuracy','altitude','altitudeAccuracy','heading','speed'],locationOptions:{enableHighAccuracy:true,timeout:60000,maximumAge:300000},watchID:null,pendingHref:'',pendingForm:null,_JSONLocation:'',_currentSearchMode:null,_lastUpdateTime:0,enableFWGeolocation:true,locationSearchModes:{SEARCH_MODE:'m',MODE_COMPOSER:'cp',MODE_CHECKIN:'ci'},setCurrentJSONLocation:function(r){q._JSONLocation=r;},getCurrentJSONLocation:function(){return q._JSONLocation;},setLocationSearchMode:function(r){q._currentSearchMode=r;},getLocationSearchMode:function(){return q._currentSearchMode;},shouldUseFWGeolocation:function(){return window.FW_ENABLED&&p.isIOS()&&q.enableFWGeolocation;},updateLocation:function(r){if(r){if(q.shouldUseFWGeolocation())r={coords:r};var s={},t;for(var u=0;u<q.desiredProperties.length;u++){t=q.desiredProperties[u];if(r.coords[t])s[t]=r.coords[t];}if(r.timestamp)s.timestamp=r.timestamp/1000;q._JSONLocation=JSON.stringify(s);q.sendCurrentLocationToServer();if(q.pendingForm){q.submitForm(q.pendingForm);}else if(q.pendingHref)q.gotoPage(q.pendingHref);q.pendingForm=null;q.pendingHref='';l.invoke('location-update',null,{position:r});}},handleError:function(r){q.clearWatch();l.invoke('location-error',null,{error:r});if(q.pendingForm){q.submitForm(q.pendingForm);q.pendingForm=null;}else if(q.pendingHref){q.gotoPage(q.pendingHref);q.pendingHref='';}},sendCurrentLocationToServer:function(){var r=Date.now();if(r-q._lastUpdateTime>q.UPDATE_LOCATION_INTERVAL){q._lastUpdateTime=r;var s=new k(new n('/places/update_location.php').setAsync(true).toString());s.addData({json_location:q._JSONLocation});s.send();}},gotoPage:function(r){var s=new o(r);s.addQueryData('json_location',q._JSONLocation);m.load(s);},submitForm:function(r){r.appendChild(h.create('input',{name:'json_location',type:'hidden',value:q._JSONLocation}));if(!r.onsubmit||r.onsubmit())r.submit();},clearWatch:function(){if(!q.watchID)return;if(q.shouldUseFWGeolocation()){p.geolocation.clearWatch();}else navigator.geolocation.clearWatch(q.watchID);q.watchID=null;},watchPosition:function(){if(q.shouldUseFWGeolocation()){q.watchID=1;p.geolocation.watchPosition(q.updateLocation,q.handleError);p.geolocation.getCurrentPosition(q.updateLocation);}else{var r=setTimeout(q.handleError,q.locationOptions.timeout);q.watchID=navigator.geolocation.watchPosition(function(s){clearTimeout(r);q.updateLocation(s);},function(s){clearTimeout(r);q.handleError(s);},q.locationOptions);}},monitorLocation:function(){q.clearWatch();q.watchPosition();k.listen('postprocess',function(){if(!document.getElementById('place_update')&&q.watchID)q.clearWatch();});},submitFormWithLocation:function(r){if(typeof r=='string')r=g(r);var s=q;j.show();if(s.watchID&&s._JSONLocation){s.submitForm(r);return;}s.pendingHref='';s.pendingForm=r;s.monitorLocation();return false;},gotoPageWithLocation:function(r){var s=q;j.show();if(s.watchID&&s._JSONLocation){s.gotoPage(r);return;}s.pendingForm=null;s.pendingHref=r;s.monitorLocation();return false;},onClick:function(event){event.kill();var r=i.get(event.getNode(q.LINK_SIGIL));q.gotoPageWithLocation(r.href);},onSubmit:function(event){event.kill();var r=h.find(event.getNode(q.FORM_SIGIL),'form');q.submitFormWithLocation(r);}};e.exports=q;},null);
__d("MMessagingEmoticon",["DOM","EmoteTypes","EmoticonsList","createEmoteTokenizer","emoteFBIDTokenizer"],function(a,b,c,d,e,f,g,h,i,j,k){var l=j(i),m=e.exports={};m.htmlEmoteWithoutFBID=function(n,o){if(typeof o!='function')o=function(q){return q;};var p=l(n).map(function(q){if(q.type==h.TEXT){return o(q.text);}else if(q.type==h.EMOTE)return [g.create('span',{className:'emoticon_text'},q.text),g.create('span',{className:'emoticon emoticon_'+q.emote})];});return g.create('span',{},p);};m.htmlEmote=function(n,o){if(typeof o!='function')o=function(q){return q;};var p=k(n).map(function(q){if(q.type==h.TEXT){return m.htmlEmoteWithoutFBID(q.text,o);}else if(q.type==h.EMOTE_FBID)return [g.create('span',{className:'emoticon_text'},q.text),g.create('img',{className:'emoticon emoticon_custom',alt:q.value,src:window.location.protocol+'//graph.facebook.com/'+encodeURIComponent(q.value)+'/picture'})];});return g.create('span',{},p);};},null);
__d("MMessagingEmoji",["DOM","MMessagingEmoticon","SupportedEmoji","cx"],function(a,b,c,d,e,f,g,h,i,j){var k=40;e.exports={htmlEmoji:function(l,m){if(typeof m!='function')m=function(w){return w;};var n=l,o=[],p=k;while(p--){var q=i.findEmoji(n);if(!q||!q.length)break;var r=q[0],s=n.indexOf(r),t=n.substring(0,s);if(t)o.push(m(t));var u=q.emoji,v=g.create('span',{className:"_1az _1a-"+' '+u});o.push(v);n=n.substring(s+r.length);}if(n)o.push(m(n));return g.create('span',{},o);},htmlEmojiAndEmote:function(l,m){return this.htmlEmoji(l,function(n){return h.htmlEmote(n,m);});}};},null);
__d("MPrivacyComposerMenu",["CSS","DataStore","DOM","MComposerLogger","MComposerWaterfallEvent","MModalDialog","MCompositionPrivacyStore","MCompositionPrivacyFields","MCompositionUserActions","MRequest","MViewport","Stratcom","$","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(v,w,x,y){"use strict";this._root=s(v);this._hiddenInput=i.find(this._root,'input');this._selectedOption=i.scry(this._root,'tr','checked')[0];this._stickyURI=w;this._stickyOption=this._selectedOption;this._enableCustomMenu=y;this._dontSaveSticky=false;this._customLabel=x;m.addChangeListener(function(){return this._handlePrivacyUpdate();}.bind(this));i.listen(this._root,'click','privacy-option',function(z){var aa=z.getNode('privacy-option');if(!this._enableCustomMenu||aa!=this.getCustomOption()){this._selectOption(aa);return;}var ba=r.listen('m:viewport:orientation-change',null,this._addHeightConstraint.bind(this));this._addHeightConstraint();l.open('/privacy/custom/edit',function(ca){r.invoke('MPrivacyComposerMenu::custom',null,{visible:false,instance:this,selector:this._root});q.scrollToHeader();ba.remove();this._removeHeightConstraint();if(!ca.canceled){var da=ca.payload.value,ea=i.scry(this._root,'tr','privacy-option'),fa=false;for(var ga=0;ga<ea.length;ga++)if(h.get(ea[ga]).value==da){this._selectOption(ea[ga],true);fa=true;break;}if(!fa){this._updateCustomSelectedOption(ca.payload.description,da);this._selectOption(this.getCustomSelectedOption(),true);}}}.bind(this));r.invoke('MPrivacyComposerMenu::custom',null,{visible:true,instance:this,selector:this._root});}.bind(this));r.listen('MPrivacyDeferredSelector-loaded',null,function(z){var aa=z.getData(),ba=i.find(this._root,'table','privacy-table');if(ba.id==aa.id)this._selectedOption=i.scry(this._root,'tr','checked')[0];this._handlePrivacyUpdate();}.bind(this));r.listen('MPrivacyComposerMenu:updatePrivacy',null,function(z){var aa=z.getData();this._selectOption(aa.row,false);}.bind(this));h.set(this._root,{instance:this});}u.prototype.setShowTagExpansion=function(v){"use strict";g.conditionClass(this._root,"_1oxi",v);};u.prototype.getIconContent=function(){"use strict";return i.find(this._selectedOption,'i','icon').cloneNode(true);};u.prototype.getCustomOption=function(){"use strict";return i.find(this._root,'tr','privacy-custom-option');};u.prototype.getCustomSelectedOption=function(){"use strict";return i.scry(this._root,'tr','privacy-custom-selected-option')[0];};u.prototype.isCustomSelectedOption=function(){"use strict";return this._selectedOption===this.getCustomSelectedOption();};u.prototype.getSelectedValue=function(){"use strict";return h.get(this._selectedOption).value;};u.prototype.getRoot=function(){"use strict";return this._root;};u.prototype._selectOption=function(v,w){"use strict";var x=h.get(v).value,y={};y[n.PRIVACY_FBID]=x;y[n.DONT_SAVE_STICKY]=w;y[n.CLOSE_DIALOG]=true;o.privacyUpdate(y);j.log(k.PRIVACY_ADD,{privacy_setting:x});};u.prototype._updateCustomSelectedOption=function(v,w){"use strict";var x=i.find(this.getCustomSelectedOption(),'span','option-desc');i.setContent(x,v);h.set(this.getCustomSelectedOption(),{value:w});if(w)i.show(this.getCustomSelectedOption());};u.prototype._addHeightConstraint=function(){"use strict";this._removeHeightConstraint();var v=q.getUseableHeight();this._heightConstraint=q.addHeightConstraint(v);};u.prototype._removeHeightConstraint=function(){"use strict";if(this._heightConstraint){this._heightConstraint.release();this._heightConstraint=null;}};u.prototype._handlePrivacyUpdate=function(){"use strict";var v=m.get(n.PRIVACY_FBID,null),w=m.get(n.DONT_SAVE_STICKY,false),x=m.get(n.CLOSE_DIALOG,false);if(w!==undefined)this._dontSaveSticky=w;var y=i.scry(this._root,'tr','privacy-option');if(v===null)v=h.get(this._stickyOption).value;x=x||this._hiddenInput.value!=v;var z=i.scry(document.body,'button','privacy-button')[0];if(v!==null&&x){var aa=null;for(var ba=0;ba<y.length;ba++)if(h.get(y[ba]).value==v)aa=y[ba];if(!aa){if(z)g.conditionShow(z,false);return;}this._hiddenInput.value=v;if(this._selectedOption)g.conditionClass(this._selectedOption,'checked',false);this._selectedOption=aa;g.conditionClass(aa,'checked',true);var ca=!!i.scry(aa,'span','plus-label').length,da=i.find(this._selectedOption,'i','icon').outerHTML,ea=i.find(aa,'span','option-desc');r.invoke('MPrivacyComposerMenu::change',null,{value:this._hiddenInput.value,showPlus:ca,iconHTML:da,optionLabel:ea,instance:this});if(!this._dontSaveSticky&&this._stickyURI){this._stickyOption=this._selectedOption;new p(this._stickyURI).setData({privacyx:this._hiddenInput.value}).send();}}if(z)g.conditionShow(z,true);};u.init=function(v,w,x,y){"use strict";return new u(v,w,x,y);};u.getInstance=function(v){"use strict";return h.get(v).instance;};e.exports=u;},null);
__d("MPrivacyComposerSelector",["CSS","DataStore","DOM","HTML","MComposerLogger","MComposerWaterfallEvent","MPrivacyComposerMenu","MViewport","Stratcom","Vector","$","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(t,u){"use strict";this._root=q(t);this._button=i.scry(this._root,'button','privacy-button')[0];if(!this._button)this._button=i.find(this._root,'div','privacy-button');this._buttonIcon=i.find(this._root,'div','privacy-button-icon');this._menu=i.find(this._root,'div','privacy-composer-menu');this._config=u;i.listen(this._root,'click','privacy-button',function(event){if(this.isOpen()){this.hideMenu();k.log(l.PRIVACY_CANCEL);}else{this.showMenu();k.log(l.PRIVACY_INTENT);}document.activeElement.blur();}.bind(this));o.listen('MPrivacyComposerMenu::change',null,function(v){var w=v.getData();if(w.instance!=m.getInstance(this._menu))return;if(this._config.updatebuttontext){var x=i.find(this._button,'span','button-text');i.setContent(x,w.optionLabel.cloneNode(true));}var y=i.find(this._button,'span','plus-label');if(w.showPlus){i.show(y);}else i.hide(y);i.setContent(this._buttonIcon,new j(w.iconHTML));this.hideMenu();}.bind(this));h.set(this._root,{instance:this});}s.prototype.setShowTagExpansion=function(t){"use strict";g.conditionClass(this._root,"_27-k",t);m.getInstance(this._menu).setShowTagExpansion(t);};s.prototype.getSelectedValue=function(){"use strict";var t=m.getInstance(this._menu);return t&&t.getSelectedValue();};s.prototype.showMenu=function(){"use strict";i.show(this._menu);o.invoke('MPrivacyComposerMenu::show',null,{selector:this._root});this._heightConstraint=n.addMinHeightConstraint(p.getDim(this._menu).y+p.getPos(this._menu).y);};s.prototype.hideMenu=function(){"use strict";if(this.isOpen()){i.hide(this._menu);o.invoke('MPrivacyComposerMenu::hide',null,{selector:this._root});this._heightConstraint&&this._heightConstraint.release();}};s.prototype.isOpen=function(){"use strict";return (this._menu.style.display!='none');};s.init=function(t,u){"use strict";return new s(t,u);};s.getInstance=function(t){"use strict";return h.get(t).instance;};e.exports=s;},null);
__d("Popover",["setTimeoutAcrossTransitions","CSS","DOM","MAria","MViewport","Stratcom","Vector","$","copyProperties","eventsMixinDeprecated"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=40;function r(s){"use strict";var t=s.flyout;this.flyout=(typeof t=='string')?n(t):t;this.content=i.scry(this.flyout,'div','flyout-content')[0];this.options=s;this._onOrientationChange=this._reposition.bind(this);h.conditionClass(this.flyout,'popover_flyout',true);var u=s.button;if(u){this.button=(typeof u=='string')?n(u):u;this.buttonClickListener=i.listen(this.button,'click',null,this._openHandler.bind(this));this.button.setAttribute('role','button');j.setupPopup(this.button,this.flyout);}var v=s.flyoutAnchor;if(v){this.flyoutAnchor=(typeof v=='string')?n(v):v;}else this.flyoutAnchor=this.button;if(this.options.flyoutFromRoot)this.flyoutClickListener=i.listen(this.flyout,'click',null,this._openHandler.bind(this));if(this.options.touchstart_callback)this.flyoutTouchStartListener=i.listen(this.flyout,'touchstart',null,this._touchStartHandler.bind(this));if(this.options.touchmove_callback)this.flyoutTouchMoveListener=i.listen(this.flyout,'touchmove',null,this._touchMoveHandler.bind(this));if(this.options.touchend_callback)this.flyoutTouchEndListener=i.listen(this.flyout,'touchend',null,this._touchEndHandler.bind(this));r._instances[this.flyout.id]=this;}r.prototype.isOpen=function(){"use strict";return !!this._isOpen;};r.prototype.open=function(){"use strict";if(this.isOpen())return;if(r._activePopover)r._activePopover.close();r._activePopover=this;this._isOpen=true;this.constraint=null;h.conditionClass(this.flyout,'popover_hidden',false);if(this.options.flyoutFromRoot)this._absolutePositionFlyout();this._position();h.conditionClass(document.body,'disableClicks',true);this.globalListener=l.listenCapture('click',null,this._closeHandler.bind(this));window.addEventListener('orientationchange',this._onOrientationChange,false);j.showPopup(this.button,this.flyout);if(this.options.ensureVisible){var s=k.getScrollTop(),t=this._getElementPosition(this.flyout).y,u=t+this.flyout.offsetHeight,v=u-(s+k.getUseableHeight());if(v>0){var w=Math.min(v,Math.max(t-s-q,0));k.scrollTo(0,s+w);}}this.invoke('open');};r.prototype.close=function(s){"use strict";if(!this.isOpen())return;r._activePopover=null;this._isOpen=false;h.conditionClass(this.flyout,'popover_hidden',true);if(this.options.flyoutFromRoot){this.flyoutParent.appendChild(this.flyout);delete this.flyoutParent;}g(function(){h.conditionClass(document.body,'disableClicks',false);}.bind(this),400);this.globalListener.remove();window.removeEventListener('orientationchange',this._onOrientationChange,false);this._releaseConstraint();j.hidePopup(this.button,this.flyout);if(!s)this.invoke('close');};r.prototype.clear=function(){"use strict";this.globalListener&&this.globalListener.remove();this.buttonClickListener&&this.buttonClickListener.remove();this.flyoutClickListener&&this.flyoutClickListener.remove();this.flyoutTouchStartListener&&this.flyoutTouchStartListener.remove();this.flyoutTouchMoveListener&&this.flyoutTouchMoveListener.remove();this.flyoutTouchEndListener&&this.flyoutTouchEndListener.remove();delete r._instances[this.flyout.id];};r.prototype.refreshConstraints=function(){"use strict";if(!this._isOpen)return false;var s=this.flyout;this._releaseConstraint();if(this.options.heightConstraint){s.style.minHeight=k.getUseableHeight()+'px';this.constraint=k.addHeightConstraint(m.getDim(this.content).y+this._getElementPosition(s).y);}else this.constraint=k.addMinHeightConstraint(m.getDim(s).y+this._getElementPosition(s).y+r._MARGIN);};r.prototype._getTouchPoint=function(event){"use strict";var s=event.getRawEvent().targetTouches[0],t={x:s?s.screenX:0,y:s?s.screenY:0};return t;};r.prototype._touchStartHandler=function(event){"use strict";this.options.touchstart_callback(this._getTouchPoint(event));};r.prototype._touchMoveHandler=function(event){"use strict";if(this.isOpen())this.options.touchmove_callback(this._getTouchPoint(event));};r.prototype._touchEndHandler=function(event){"use strict";this.options.touchend_callback(this._getTouchPoint(event));};r.prototype._openHandler=function(event){"use strict";event.prevent();var s=this.isOpen();if(s&&!this.options.preventClose){this.close();}else if(!s){var t=i.scry(document,'input');for(var u=0;u<t.length;u++)t[u].blur();this.open();}};r.prototype._closeHandler=function(event){"use strict";if(!event.getNode('popover'))this.close();};r.prototype._getElementPosition=function(s){"use strict";var t=s.offsetLeft,u=s.offsetTop;s=s.offsetParent;while(s&&s!==document.documentElement){t+=s.offsetLeft;u+=s.offsetTop;var v=window.getComputedStyle(s);t+=parseInt(v.getPropertyValue('border-left-width').slice(0,-2),10);u+=parseInt(v.getPropertyValue('border-top-width').slice(0,-2),10);s=s.offsetParent;}return new m(t,u);};r.prototype._absolutePositionFlyout=function(){"use strict";this.flyoutParent=this.flyout.parentNode;n('root').appendChild(this.flyout);var s=this._getElementPosition(this.flyout.parentNode),t=this._getElementPosition(this.flyoutAnchor),u=m.getDim(this.flyoutAnchor),v=t.y-s.y+u.y;this.flyout.style.position='absolute';this.flyout.style.top=v+'px';};r.prototype._position=function(){"use strict";var s=this.flyout;if(this.flyoutAnchor&&this.options.positionNub){var t=this._getElementPosition(this.flyoutAnchor),u=i.find(this.flyout,'*','nub'),v=m.getDim(u).x,w=m.getDim(this.flyoutAnchor).x,x=this._getElementPosition(s);(new m(t.x-x.x+(w-v)/2,0)).setPos(u);}this.refreshConstraints();};r.prototype._reposition=function(){"use strict";g(this._position.bind(this),0);};r.prototype._releaseConstraint=function(){"use strict";if(this.constraint){this.constraint.release();this.constraint=null;}};r.getInstance=function(s){"use strict";return r._instances[s];};r.clearAll=function(){"use strict";for(var s=0;s<r._instances.length;s++)r._instances[s].clear();};p(r,['open','close']);o(r,{_activePopover:null,_MARGIN:40,_instances:{}});e.exports=r;},null);
__d("MQuickSearch",["DOM","HTML","MRequest","MRequestTypes","MViewport","Stratcom","Vector","$","copyProperties","createArrayFrom","destroyOnUnload","eventsMixinDeprecated","setIntervalAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=[];function u(v,w){"use strict";this._uri=v.uri;this._args=v.args||{};var x=n(v.nodeID);this._input=g.find(x,'input','quicksearch-input');this._button=g.scry(x,'*','quicksearch-button')[0];this._container=n(v.containerID);this._resultsBoxID=v.resultsBoxID;this._resultsBox=n(this._resultsBoxID);this._shouldScroll=v.shouldScroll;if(v.throbber)this._throbber=new h(v.throbber);this._request=null;this._searchLogger=w||null;this._listeners=[g.listen(this._input,'focus',null,this._focus.bind(this)),g.listen(this._input,'blur',null,this._cleanup.bind(this)),g.listen(this._input,'keydown',null,this._handleKeyDown.bind(this)),g.listen(this._input,'keyup',null,this._handleKeyUp.bind(this))];if(this._button)this._listeners.push(g.listen(this._button,'click',null,this._click.bind(this)));if(this._args.bootstrap)this.search(this._input.value);t.push(this);q(function(){l.removeCurrentListener();t.forEach(function(y){return y._destroy();});t=[];});}u.prototype._handleKeyDown=function(event){"use strict";this._scrollToContainer();this._previousText=this._input.value;};u.prototype._handleKeyUp=function(event){"use strict";if(event.getSpecialKey()==='delete'&&(this._args.bootstrap||this._args.showInitialResultsOnClear)){var v=this._input.value;if(v.trim()===''&&v!==this._previousText)this.reset();}};u.prototype._scrollToContainer=function(){"use strict";if(this._shouldScroll)k.scrollTo(m.getPos(this._container));};u.prototype._update=function(){"use strict";var v=this._input.value;if(this._previousText==v)return;this._previousText=v;if(/^\s*$/.test(v)&&!this._args.bootstrap){this._resetContent();this._abortRequest();return;}this._saveInitialNodes();this.search(v);};u.prototype.search=function(v){"use strict";if(this.invoke('search',v).getPrevented())return;this._throbber&&g.setContent(this._resultsBox,this._throbber);this.addQueryParameters({q:v||''});this._abortRequest();if(this._searchLogger)this._searchLogger.onSearch(this._args);this._request=new i(this._uri);this._request.setType(j.DEPENDENT);this._request.listen('done',function(w){this._resultsBox=n(this._resultsBoxID);if(this._searchLogger)this._searchLogger.onResults(this._request,this._resultsBox);if(this._needsDefaultNodes){this._saveInitialNodes();this._needsDefaultNodes=false;}this._request=null;}.bind(this));this._request.setMethod('GET');this._request.setData(this._args).send();};u.prototype._abortRequest=function(){"use strict";this._request&&this._request.abort()&&(this._request=null);};u.prototype._resetContent=function(){"use strict";g.setContent(this._resultsBox,this._initialNodes);};u.prototype.resetToThrobber=function(){"use strict";this._resultsBox=n(this._resultsBoxID);if(this._throbber&&this._resultsBox)g.setContent(this._resultsBox,this._throbber);};u.prototype.addQueryParameters=function(v){"use strict";o(this._args,v);};u.prototype.maybeAddQueryParameters=function(v){"use strict";for(var w in v)if(!(w in this._args))this._args[w]=v[w];};u.prototype.clear=function(){"use strict";this._input.value='';this._initialNodes=null;};u.prototype._focus=function(event){"use strict";this._focused=true;if(this._button){this._button.setAttribute('type','button');this._button.disabled=false;}this._scrollToContainer();this._previousText=this._input.value;clearInterval(this._interval);this._interval=s(this._update.bind(this),300);};u.prototype._click=function(event){"use strict";event.prevent();this.reset();};u.prototype._cleanup=function(){"use strict";if(this._searchLogger)this._searchLogger.onCleanup();this._focused=false;if(!this._input.value&&this._button){this._button.setAttribute('type','submit');this._button.disabled=true;}clearInterval(this._interval);};u.prototype.reset=function(){"use strict";this._abortRequest();this._cleanup();this._saveInitialNodes();this._resetContent();this._input.value='';this._input.blur();if(this._button){this._button.setAttribute('type','submit');this._button.disabled=true;}if(this._args.showInitialResultsOnClear)this.search('');this._scrollToContainer();};u.prototype._saveInitialNodes=function(){"use strict";if(!this._initialNodes)this._initialNodes=p(this._resultsBox.childNodes);};u.prototype._destroy=function(){"use strict";this._listeners.forEach(function(v){return v&&v.remove();});this._listeners.length=0;};u.prototype.setNeedsDefaultNodes=function(){"use strict";this._needsDefaultNodes=true;};u.getInstances=function(){"use strict";return t;};r(u,['search']);o(u.prototype,{_uri:null,_args:null,_input:null,_button:null,_container:null,_resultsBox:null,_shouldScroll:true,_throbber:null,_focused:false,_initialNodes:null,_previousText:null,_interval:null,_needsDefaultNodes:false,_searchLogger:null});e.exports=u;},null);