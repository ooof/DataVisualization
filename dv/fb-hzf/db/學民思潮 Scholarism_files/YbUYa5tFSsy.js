/*!CK:4247504135!*//*1415833365,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["apJFu"]); }

__d("MProgressBar.react",["MAnimator","React","joinClasses","cx"],function(a,b,c,d,e,f,g,h,i,j){var k=h.createClass({displayName:"MProgressBar",propTypes:{initialValue:h.PropTypes.number.isRequired,min:h.PropTypes.number,max:h.PropTypes.number},getDefaultProps:function(){return {min:0,max:100};},getInitialState:function(){return {value:this.props.initialValue};},_calculatePercentage:function(l){var m=this.props,n=Math.min(Math.max((l-m.min)/(m.max-m.min)*100,0),100);return n;},_getFillArea:function(){var l=this._calculatePercentage(this.state.value),m=Math.round(l),n=(("fill")+(m===0?' '+"empty":'')+(m===100?' '+"full":''));return (h.createElement("div",{className:n,style:{width:l+'%'}}));},animate:function(l,m){var n=this._calculatePercentage(this.state.value),o=this._calculatePercentage(l);g.play(n,o,m,this.setValue);},setValue:function(l){if(this.isMounted())this.setState({value:l});},render:function(){return (h.createElement("div",{className:i(this.props.className,"_lbu")},this._getFillArea()));}});e.exports=k;},null);
__d("areSameOrigin",[],function(a,b,c,d,e,f){function g(h,i){if(h.isEmpty()||i.isEmpty())return false;if(h.getProtocol()&&h.getProtocol()!=i.getProtocol())return false;if(h.getDomain()&&h.getDomain()!=i.getDomain())return false;if(h.getPort()&&h.getPort()!=i.getPort())return false;return true;}e.exports=g;},null);
__d("BlobFactory",["emptyFunction"],function(a,b,c,d,e,f,g){var h,i=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder;if(a.Blob){var j;try{new a.Blob();j=true;}catch(k){j=false;}h={getBlob:function(l,m){l=l||[];m=m||{};if(j){return new a.Blob(l,m);}else{var n=new i();for(var o=0;o<l.length;o++)n.append(l[o]);return n.getBlob(m.type);}},isSupported:g.thatReturnsTrue};}else h={getBlob:function(){},isSupported:g.thatReturnsFalse};e.exports=h;},null);
__d("arrayContains",[],function(a,b,c,d,e,f){function g(h,i){return h.indexOf(i)!=-1;}e.exports=g;},null);
__d("filterObject",[],function(a,b,c,d,e,f){'use strict';var g=Object.prototype.hasOwnProperty;function h(i,j,k){if(!i)return null;var l={};for(var m in i)if(g.call(i,m)&&j.call(k,i[m],m,i))l[m]=i[m];return l;}e.exports=h;},null);
__d("DataViewPolyfill",[],function(a,b,c,d,e,f){"use strict";function g(h,i,j){if(i===undefined){this.$DataViewPolyfill0=new Uint8Array(h);}else if(j===undefined){this.$DataViewPolyfill0=new Uint8Array(h,i);}else this.$DataViewPolyfill0=new Uint8Array(h,i,j);this.byteLength=this.$DataViewPolyfill0.byteLength;}g.prototype.getUint8=function(h){if(h>=this.$DataViewPolyfill0.length)throw new Error('Trying to read beyond bounds of DataViewPolyfill');return this.$DataViewPolyfill0[h];};g.prototype.getUint16=function(h,i){var j=this.getUint8(h),k=this.getUint8(h+1);return i?(k*256)+j:(j*256)+k;};g.prototype.getUint32=function(h,i){var j=this.getUint8(h),k=this.getUint8(h+1),l=this.getUint8(h+2),m=this.getUint8(h+3);return i?(((m*256+l)*256+k)*256)+j:(((j*256+k)*256+l)*256)+m;};g.isSupported=function(){return !!a.Uint8Array;};e.exports=g;},null);
__d("Emscripten",[],function(a,b,c,d,e,f){e.exports={isSupported:function(){return (typeof Int32Array!=='undefined'&&typeof Float64Array!=='undefined'&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set);}};},null);
__d("XHRHttpError",[],function(a,b,c,d,e,f){var g='HTTP_CLIENT_ERROR',h='HTTP_PROXY_ERROR',i='HTTP_SERVER_ERROR',j='HTTP_TRANSPORT_ERROR',k='HTTP_UNKNOWN_ERROR';function l(m,n){if(n===0){var o=m.getProtocol();if(o==='file'||o==='ftp')return null;return j;}else if(n>=100&&n<200){return h;}else if(n>=200&&n<300){return null;}else if(n>=400&&n<500){return g;}else if(n>=500&&n<600){return i;}else if(n>=12001&&n<12156){return j;}else return k;}e.exports={getErrorCode:l,HTTP_CLIENT_ERROR:g,HTTP_PROXY_ERROR:h,HTTP_SERVER_ERROR:i,HTTP_TRANSPORT_ERROR:j,HTTP_UNKNOWN_ERROR:k};},null);
__d("xhrSimpleDataSerializer",[],function(a,b,c,d,e,f){function g(h){var i=[],j;for(j in h)i.push(encodeURIComponent(j)+'='+encodeURIComponent(h[j]));return i.join('&');}e.exports=g;},null);
__d("XHRRequest",["ErrorUtils","URI","XHRHttpError","getSameOriginTransport","invariant","xhrSimpleDataSerializer"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={errorCode:null,errorMsg:null,errorType:null},n={loadedBytes:null,totalBytes:null};function o(p){"use strict";this.setURI(p);this.setMethod('POST');this.setIsAsynchronous(true);this.setTransportBuilder(j);this.setDataSerializer(l);this.$XHRRequest0=this.$XHRRequest0.bind(this);}o.prototype.setURI=function(p){"use strict";this.$XHRRequest1=new h(p);return this;};o.prototype.getURI=function(){"use strict";return this.$XHRRequest1;};o.prototype.setMethod=function(p){"use strict";this.$XHRRequest2=p;return this;};o.prototype.getMethod=function(){"use strict";return this.$XHRRequest2;};o.prototype.setData=function(p){"use strict";this.$XHRRequest3=p;return this;};o.prototype.getData=function(){"use strict";return this.$XHRRequest3;};o.prototype.setRawData=function(p){"use strict";this.$XHRRequest4=p;return this;};o.prototype.setRequestHeader=function(p,q){"use strict";if(!this.$XHRRequest5)this.$XHRRequest5={};this.$XHRRequest5[p]=q;return this;};o.prototype.setTimeout=function(p){"use strict";this.$XHRRequest6=p;return this;};o.prototype.setResponseHandler=function(p){"use strict";this.$XHRRequest7=p;return this;};o.prototype.setErrorHandler=function(p){"use strict";this.$XHRRequest8=p;return this;};o.prototype.setAbortHandler=function(p){"use strict";this.$XHRRequest9=p;return this;};o.prototype.setTimeoutHandler=function(p){"use strict";this.$XHRRequesta=p;return this;};o.prototype.setUploadProgressHandler=function(p){"use strict";this.$XHRRequestb=p;return this;};o.prototype.setIsAsynchronous=function(p){"use strict";this.$XHRRequestc=p;return this;};o.prototype.setTransportBuilder=function(p){"use strict";this.$XHRRequestd=p;return this;};o.prototype.setDataSerializer=function(p){"use strict";this.$XHRRequeste=p;return this;};o.prototype.send=function(){"use strict";var p=this.$XHRRequest6,q=this.$XHRRequestd(),r=this.getURI();this.$XHRRequestf=q;var s;k(this.$XHRRequest2==='POST'||!this.$XHRRequest4);if(this.$XHRRequest2==='GET'||this.$XHRRequest4){r.addQueryData(this.$XHRRequest3);s=this.$XHRRequest4;}else s=this.$XHRRequeste(this.$XHRRequest3);q.onreadystatechange=this.$XHRRequest0;if(q.upload&&this.$XHRRequestb)q.upload.onprogress=this.$XHRRequestg.bind(this);if(p)this.$XHRRequesth=setTimeout(this.$XHRRequesti.bind(this),p);q.open(this.$XHRRequest2,r.toString(),this.$XHRRequestc);if(this.$XHRRequest5)for(var t in this.$XHRRequest5)q.setRequestHeader(t,this.$XHRRequest5[t]);q.send(s);if(!this.$XHRRequestc)q.onreadystatechange(null,true);};o.prototype.abort=function(){"use strict";this.$XHRRequestj();if(this.$XHRRequest9)g.applyWithGuard(this.$XHRRequest9,null,null,null,'XHRRequest:_abortHandler');};o.prototype.$XHRRequestj=function(){"use strict";var p=this.$XHRRequestf;if(p){p.onreadystatechange=null;p.abort();}this.$XHRRequestk();};o.prototype.$XHRRequesti=function(){"use strict";this.$XHRRequestj();if(this.$XHRRequesta)g.applyWithGuard(this.$XHRRequesta,null,null,null,'XHRRequest:_abortHandler');};o.prototype.$XHRRequest0=function(p,q){"use strict";if(!this.$XHRRequestc&&q!==true)return;var r=this.$XHRRequestf,s=r,t=s.readyState;if(t>=2){var u=t===4,v=this.getURI(),w=i.getErrorCode(v,r.status),x=this.$XHRRequest7;if(w!==null){if(u){m.errorCode=w;m.errorMsg=r.responseText;m.errorType='HTTP';if(this.$XHRRequest8)g.applyWithGuard(this.$XHRRequest8,null,[m],null,'XHRRequest:_errorHandler');}}else if(x){var y=null;if(x.includeHeaders)y=r.getAllResponseHeaders();if(u||(x.parseStreaming&&t===3))g.applyWithGuard(x,null,[r.responseText,y,u],null,'XHRRequest:handler');}if(u)this.$XHRRequestk();}};o.prototype.$XHRRequestg=function(p){"use strict";n.loadedBytes=p.loaded;n.totalBytes=p.total;if(this.$XHRRequestb)g.applyWithGuard(this.$XHRRequestb,null,[n],null,'XHRRequest:_uploadProgressHandler');};o.prototype.$XHRRequestk=function(){"use strict";clearTimeout(this.$XHRRequesth);delete this.$XHRRequestf;};e.exports=o;},null);
__d("WebWorker",["BanzaiLogger","WebWorkerConfig","BlobFactory","EventListener","URI","areSameOrigin","destroyOnUnload","SubscriptionsHandler","XHRRequest","arrayContains","emptyFunction","getCrossOriginTransport","performanceNow","invariant","memoize","merge","filterObject"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=a.URL||a.webkitURL;function y(ea){"use strict";this.$WebWorker0=false;this.$WebWorker1=null;this.$WebWorker2=ea;this.$WebWorker3=null;this.$WebWorker4=q;this.$WebWorker5=q;this.$WebWorker6=[];this.$WebWorker7=false;this.$WebWorker8=new n();m(function(){if(!this.$WebWorker7)this.terminate();}.bind(this));this.$WebWorker9('constructed');}y.prototype.setMessageHandler=function(ea){"use strict";this.$WebWorker4=ea||q;return this;};y.prototype.setErrorHandler=function(ea){"use strict";this.$WebWorker5=ea||q;return this;};y.prototype.postMessage=function(ea,fa){"use strict";t(!this.isCurrentState('constructed'));t(!this.isCurrentState('terminated'));if(this.isCurrentState('preparing')){this.$WebWorker6.push(this.postMessage.bind(this,ea,fa));return this;}var ga={type:'message',message:ea};if(fa){this.$WebWorker3.postMessage(ga,fa);}else this.$WebWorker3.postMessage(ga);return this;};y.prototype.terminate=function(){"use strict";if(this.isCurrentState('executing'))this.$WebWorker3.terminate();if(!this.isCurrentState('terminated')){this.$WebWorker9('terminated');this.$WebWorker3=null;this.$WebWorkera();this.$WebWorker6=[];}return this;};y.prototype.execute=function(){"use strict";t(!this.isCurrentState('terminated'));if(['preparing','executing'].some(this.isCurrentState,this))return this;this.$WebWorker9('preparing');y.prepareResource(this.$WebWorker2,this.$WebWorkerb.bind(this));return this;};y.prototype.setAllowCrossPageTransition=function(ea){"use strict";this.$WebWorker7=ea;return this;};y.prototype.isCurrentState=function(ea){"use strict";t(p(y.states,ea));return ea===this.$WebWorker1;};y.prototype.$WebWorkerb=function(){"use strict";t(!this.isCurrentState('executing'));if(this.isCurrentState('terminated'))return;t(this.$WebWorker2.sameOriginURL||this.$WebWorker2.source);if(this.$WebWorker2.sameOriginURL){this.$WebWorker3=new a.Worker(this.$WebWorker2.sameOriginURL);}else{this.$WebWorker3=new a.Worker(y.evalWorkerURL);this.$WebWorker3.postMessage(this.$WebWorker2.source);}this.$WebWorkerc('ping',Date.now());this.$WebWorkerd();this.$WebWorker9('executing');this.$WebWorker6.forEach(function(ea){return ea();});this.$WebWorker6=null;};y.prototype.$WebWorkera=function(){"use strict";this.$WebWorker8.release();};y.prototype.$WebWorkerc=function(ea){"use strict";for(var fa=[],ga=1,ha=arguments.length;ga<ha;ga++)fa.push(arguments[ga]);this.$WebWorker3.postMessage({type:ea,args:fa});};y.prototype.$WebWorkere=function(event,ea){"use strict";y.$WebWorkere(event,this.$WebWorker2.name,v(ea,{cross_page_transition:!!this.$WebWorker7,state:this.$WebWorker1}));};y.$WebWorkerf=function(){"use strict";return Object.keys(w({object_url:y.$WebWorkerg(),eval_url:ca(),data_url:y.$WebWorkerh(),worker:y.isSupported(),transferables:y.areTransferablesSupported()},function(ea){return !!ea;}));};y.prototype.$WebWorkerd=function(){"use strict";this.$WebWorker8.addSubscriptions(j.listen(this.$WebWorker3,'message',this.$WebWorkeri.bind(this)),j.listen(this.$WebWorker3,'error',this.$WebWorkerj.bind(this)));};y.prototype.$WebWorkerj=function(ea){"use strict";var fa=this.$WebWorker5(ea);if(!fa&&!ea.defaultPrevented)this.$WebWorkere('exception',{message:ea.message});};y.prototype.$WebWorkeri=function(event){"use strict";var ea=event.data;switch(ea.type){case 'message':this.$WebWorker4(ea.message);break;case 'pong':this.$WebWorker0=true;this.$WebWorkere('executed',{dt:Math.floor(ea.args[1]-ea.args[0]),bytes:this.$WebWorker2.source.length});break;case 'terminate':this.terminate();break;case 'haste-error':this.terminate();this.$WebWorkere('haste_error',{message:ea.message});break;case 'console':var fa=ea.args.shift();t(p(['log','error','info','debug','warn'],fa));a.console[fa].apply(a.console,ea.args);break;}};y.prototype.$WebWorker9=function(ea){"use strict";t(p(y.states,ea));this.$WebWorkere('transition',{next_state:ea});this.$WebWorker1=ea;};y.prepareResource=function(ea,fa){"use strict";fa=fa||q;t(ea.sameOriginURL||ea.url||ea.source);t(!!y.isSupported());if(ea.sameOriginURL){fa();}else if(ea.url&&l(new k(ea.url),new k(a.location.href))){ea.sameOriginURL=ea.url;fa();}else if(ea.source){if(y.$WebWorkerk())ea.sameOriginURL=y.$WebWorkerl(ea.source);fa();}else if(!ea.loading){var ga=s();ea.loading=[fa];y.$WebWorkerm(ea.url,function(ha){if(ha){ea.source=ha;if(y.$WebWorkerk())ea.sameOriginURL=y.$WebWorkerl(ha);}y.$WebWorkere('prepared',ea.name,{dt:Math.floor(s()-ga),bytes:ha.length});ea.loading.forEach(function(ia){return ia();});ea.loading=false;});}else ea.loading.push(fa);return ea;};y.releaseResource=function(ea){"use strict";if(ea.sameOriginURL.indexOf('blob:')===0){if(x.revokeObjectURL)x.revokeObjectURL(ea.sameOriginURL);ea.sameOriginURL=null;}return ea;};y.isSupported=function(){"use strict";return ba&&(y.$WebWorkerk()||ca());};y.areTransferablesSupported=function(){"use strict";return y.isSupported()&&da();};y.$WebWorkerm=function(ea,fa){"use strict";new o(ea).setTransportBuilder(r).setMethod('GET').setResponseHandler(function(ga){fa(ga);}).setErrorHandler(fa.bind(null,null)).send();};y.$WebWorkerl=function(ea){"use strict";t(y.$WebWorkerk());if(y.$WebWorkerg()){var fa=i.getBlob([ea],{type:'application/javascript'});return x.createObjectURL(fa);}if(y.$WebWorkerh())return 'data:application/javascript,'+encodeURIComponent(ea);};y.$WebWorkerg=function(){"use strict";return i.isSupported()&&z();};y.$WebWorkerh=function(){"use strict";return aa();};y.$WebWorkerk=function(){"use strict";return y.$WebWorkerg()||y.$WebWorkerh();};y.$WebWorkere=function(event,ea,fa){"use strict";if(!h.logging.enabled)return;g.log(h.logging.config,v(fa,{features_array:y.$WebWorkerf(),event:event,resource:ea}));};var z=u(function(){var ea,fa;if(!x||!x.createObjectURL)return false;try{ea=x.createObjectURL(i.getBlob([''],{type:'application/javascript'}));var ha=new a.Worker(ea);ha.terminate();fa=true;}catch(ga){fa=false;}finally{if(x.revokeObjectURL)x.revokeObjectURL(ea);}return fa;}),aa=u(function(){var ea;try{var ga=new a.Worker('data:application/javascript,');ga.terminate();ea=true;}catch(fa){ea=false;}return ea;}),ba=!!a.Worker,ca=u(function(){var ea;try{var ga=new a.Worker(y.evalWorkerURL);ga.terminate();ea=true;}catch(fa){ea=false;}return ea;}),da=u(function(){var ea;try{var ga=new a.Worker(y.evalWorkerURL),ha=new ArrayBuffer(0);ga.postMessage({buffer:ha},[ha]);ga.terminate();ea=true;}catch(fa){ea=false;}return ea;});y.states=['constructed','preparing','executing','terminated'];y.evalWorkerURL=h.evalWorkerURL;e.exports=y;},null);
__d("PooledWebWorker",["WebWorker"],function(a,b,c,d,e,f,g){for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k,l,m){"use strict";i.constructor.call(this,m);this.$PooledWebWorker0=l;this.$PooledWebWorker1=k;}j.prototype.getIndex=function(){"use strict";return this.$PooledWebWorker0;};j.prototype.getPool=function(){"use strict";return this.$PooledWebWorker1;};e.exports=j;},null);
__d("WebWorkerPool",["PooledWebWorker","emptyFunction"],function(a,b,c,d,e,f,g,h){i.isSupported=function(){"use strict";return g.isSupported();};function i(j,k){"use strict";this.$WebWorkerPool0=[];for(var l=0;l<k;l++)this.$WebWorkerPool0.push(new g(this,l,j).setErrorHandler(this.$WebWorkerPool1).setMessageHandler(this.$WebWorkerPool2).execute());this.$WebWorkerPool3=0;}i.prototype.setMessageHandler=function(j){"use strict";this.$WebWorkerPool4=j||h;return this;};i.prototype.setAllowCrossPageTransition=function(j){"use strict";this.$WebWorkerPool0.forEach(function(k){return k.setAllowCrossPageTransition(j);});return this;};i.prototype.setErrorHandler=function(j){"use strict";this.$WebWorkerPool5=j||h;return this;};i.prototype.postMessage=function(){"use strict";for(var j=[],k=0,l=arguments.length;k<l;k++)j.push(arguments[k]);var m=this.getWorker();m.postMessage.apply(m,j);return m;};i.prototype.$WebWorkerPool2=function(){"use strict";for(var j=[],k=0,l=arguments.length;k<l;k++)j.push(arguments[k]);j.unshift(this);this.getPool().$WebWorkerPool4.apply(this.getPool(),j);};i.prototype.$WebWorkerPool1=function(){"use strict";for(var j=[],k=0,l=arguments.length;k<l;k++)j.push(arguments[k]);j.unshift(this);return this.getPool().$WebWorkerPool5.apply(this.getPool(),j);};i.prototype.getWorker=function(){"use strict";var j=this.$WebWorkerPool0[this.$WebWorkerPool3];this.$WebWorkerPool3=(this.$WebWorkerPool3+1)%this.$WebWorkerPool0.length;return j;};e.exports=i;},null);
__d("JpegResizer",["Emscripten","JpegResizerConfig","JpegResizeWorkerResource","WebWorker","WebWorkerPool","PUWErrorCodes"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=null;n.isSupported=function(){"use strict";return k.isSupported()&&g.isSupported()&&!h.isGKBlacklisted;};n.getSingleton=function(){"use strict";if(!m)m=new n(n.DEFAULT_POOL_SIZE).setAllowCrossPageTransition(true);return m;};n.prepareResource=function(o){"use strict";j.prepareResource(i,o);};function n(o){"use strict";o=o||n.DEFAULT_POOL_SIZE;j.prepareResource(i);this.$JpegResizer0=(new k(i,o)).setErrorHandler(this.$JpegResizer1.bind(this)).setMessageHandler(this.$JpegResizer2.bind(this));this.$JpegResizer3={};this.$JpegResizer4=n.DEFAULT_RESIZE_HEIGHT;this.$JpegResizer5=n.DEFAULT_RESIZE_WIDTH;}n.prototype.setHighQuality=function(o){"use strict";if(o){this.$JpegResizer4=n.DEFAULT_RESIZE_HEIGHT;this.$JpegResizer5=n.DEFAULT_RESIZE_WIDTH;}else{this.$JpegResizer4=n.LOW_QUALITY_RESIZE_HEIGHT;this.$JpegResizer5=n.LOW_QUALITY_RESIZE_WIDTH;}return this;};n.prototype.setAllowCrossPageTransition=function(o){"use strict";this.$JpegResizer0.setAllowCrossPageTransition(o);return this;};n.prototype.resizeBlob=function(o,p,q){"use strict";var r=this.$JpegResizer0.getWorker();if(r.isCurrentState('terminated')){var s=new Error('Worker terminated');s.code=l.WORKER_TERMINATED;p(s);return this;}var t=r.postMessage({blob:o,height:this.$JpegResizer4,width:this.$JpegResizer5}).getIndex();this.$JpegResizer6(t).unshift({done:p,progress:q});return this;};n.prototype.$JpegResizer6=function(o){"use strict";if(!this.$JpegResizer3.hasOwnProperty(o))this.$JpegResizer3[o]=[];return this.$JpegResizer3[o];};n.prototype.$JpegResizer1=function(o,p){"use strict";o.terminate();var q=this.$JpegResizer6(o.getIndex());this.$JpegResizer7(p);q.forEach(function(r){return r.done(p);});q.length=0;};n.prototype.$JpegResizer2=function(o,p){"use strict";if(p.error)this.$JpegResizer7(p.error);if(p.done){this.$JpegResizer6(o.getIndex()).pop().done(p.error,p.blob,p.skipped);}else{var q=this.$JpegResizer6(o.getIndex()),r=q[q.length-1].progress;if(r)r({written:p.written,total:p.total});}};n.prototype.$JpegResizer7=function(o){"use strict";var p=o.message;if(p.indexOf('Not a JPEG file')!==-1){o.code=l.BAD_JPEG;}else if(p.indexOf('abort()')!==-1){o.code=l.WORKER_ABORT;}else o.code=l.UNKNOWN_RESIZE_ERROR;};n.DEFAULT_POOL_SIZE=3;n.DEFAULT_RESIZE_HEIGHT=2048;n.DEFAULT_RESIZE_WIDTH=2048;n.LOW_QUALITY_RESIZE_HEIGHT=960;n.LOW_QUALITY_RESIZE_WIDTH=960;e.exports=n;},null);
__d("supportsXHR2",["memoize"],function(a,b,c,d,e,f,g){function h(){if(!window.FormData||!window.XMLHttpRequest)return false;var i=new XMLHttpRequest();return ('upload' in i&&'withCredentials' in i);}e.exports=g(h);},null);
__d("base64toUint8Array",[],function(a,b,c,d,e,f){function g(h){var i=atob(h),j=i.length,k=new Uint8Array(j);for(var l=0;l<j;l++)k[l]=i.charCodeAt(l);return k;}e.exports=g;},null);
__d("getExifOrientation",["DataViewPolyfill"],function(a,b,c,d,e,f,g){var h=a.DataView||g;function i(j,k){var l=new FileReader();l.onload=function(m){var n="Exif\0\0",o=0,p,q=new h(m.target.result);for(var r=0;r<250;r++)if(q.getUint8(r)===n.charCodeAt(o)){o+=1;p=r+1;if(o===n.length)break;}else o=0;if(!o){k(null);return;}var s;if(q.getUint8(p)==77&&q.getUint8(p+1)==77){s=false;}else if(q.getUint8(p)==73&&q.getUint8(p+1)==73){s=true;}else{k(null);return;}p+=2;p+=2;var t,u,v,w;t=q.getUint32(p,s);p+=(t-8)+4;u=q.getUint16(p,s);p+=2;for(var x=0;x<Math.min(25,u);x++){v=q.getUint16(p,s);p+=8;if(v==274){w=q.getUint16(p,s);k(w);return;}p+=4;}k(null);};l.readAsArrayBuffer(j);}e.exports=i;},null);
/**
 * Mega pixel image rendering library for iOS6 Safari
 *
 * @providesModule MegaPixImage
 * @preserve-header
 *
 * Fixes iOS6 Safari's image file rendering issue for large size image (over mega-pixel),
 * which causes unexpected subsampling when drawing it in canvas.
 * By using this library, you can safely render the image with proper stretching.
 *
 * Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>
 * Released under the MIT license
 */__d("MegaPixImage",[],function(a,b,c,d,e,f){function g(n){var o=n.naturalWidth,p=n.naturalHeight;if(o*p>1024*1024){var q=document.createElement('canvas');q.width=q.height=1;var r=q.getContext('2d');r.drawImage(n,-o+1,0);return r.getImageData(0,0,1,1).data[3]===0;}else return false;}function h(n,o,p){var q=document.createElement('canvas');q.width=1;q.height=p;var r=q.getContext('2d');r.drawImage(n,0,0);var s=r.getImageData(0,0,1,p).data,t=0,u=p,v=p;while(v>t){var w=s[(v-1)*4+3];if(w===0){u=v;}else t=v;v=(u+t)>>1;}var x=(v/p);return (x===0)?1:x;}function i(n,o,p){var q=document.createElement('canvas');j(n,q,o,p);return q.toDataURL("image/jpeg",o.quality||.8);}function j(n,o,p,q){var r=n.naturalWidth,s=n.naturalHeight,t=p.width,u=p.height,v=o.getContext('2d');v.save();k(o,t,u,p.orientation);var w=g(n);if(w){r/=2;s/=2;}var x=1024,y=document.createElement('canvas');y.width=y.height=x;var z=y.getContext('2d'),aa=q?h(n,r,s):1,ba=Math.ceil(x*t/r),ca=Math.ceil(x*u/s/aa),da=0,ea=0;while(da<s){var fa=0,ga=0;while(fa<r){z.clearRect(0,0,x,x);z.drawImage(n,-fa,-da);v.drawImage(y,0,0,x,x,ga,ea,ba,ca);fa+=x;ga+=ba;}da+=x;ea+=ca;}v.restore();y=z=null;}function k(n,o,p,q){switch(q){case 5:case 6:case 7:case 8:n.width=p;n.height=o;break;default:n.width=o;n.height=p;}var r=n.getContext('2d');switch(q){case 2:r.translate(o,0);r.scale(-1,1);break;case 3:r.translate(o,p);r.rotate(Math.PI);break;case 4:r.translate(0,p);r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI);r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI);r.translate(0,-p);break;case 7:r.rotate(.5*Math.PI);r.translate(o,-p);r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI);r.translate(-o,0);break;default:break;}}var l=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;function m(n){if(n instanceof Blob){var o=new Image();if(!l)throw Error("No createObjectURL function found to create blob url");o.src=l.createObjectURL(n);this.blob=n;n=o;}if(!n.naturalWidth&&!n.naturalHeight){var p=this;n.onload=function(){var q=p.imageLoadListeners;if(q){p.imageLoadListeners=null;for(var r=0,s=q.length;r<s;r++)q[r]();}};this.imageLoadListeners=[];}this.srcImage=n;}m.isSupported=!!l;m.prototype.render=function(n,o){if(this.imageLoadListeners){var p=this;this.imageLoadListeners.push(function(){p.render(n,o);});return;}o=o||{};var q=this.srcImage.naturalWidth,r=this.srcImage.naturalHeight,s=o.width,t=o.height,u=o.maxWidth,v=o.maxHeight,w=!this.blob||this.blob.type==='image/jpeg';if(s&&!t){t=(r*s/q)<<0;}else if(t&&!s){s=(q*t/r)<<0;}else{s=q;t=r;}if(u&&s>u){s=u;t=(r*s/q)<<0;}if(v&&t>v){t=v;s=(q*t/r)<<0;}var x={width:s,height:t};for(var y in o)x[y]=o[y];var z=n.tagName.toLowerCase();if(z==='img'){n.src=i(this.srcImage,x,w);}else if(z==='canvas')j(this.srcImage,n,x,w);if(typeof this.onrender==='function')this.onrender(n);};e.exports=m;},null);
__d("MPhotoResizer",["base64toUint8Array","getExifOrientation","invariant","mixin","performanceNow","requestAnimationFrame","PhotosUploadWaterfallXMixin","PUWSteps","MegaPixImage","Vector"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q='data:image/jpeg;base64,',r=j(m);for(var s in r)if(r.hasOwnProperty(s))u[s]=r[s];var t=r===null?null:r.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=r;function u(){"use strict";this.$MPhotoResizer0=new p(960,960);this.$MPhotoResizer1=.85;}u.prototype.setFile=function(v){"use strict";this.$MPhotoResizer2=v;return this;};u.prototype.setDimensions=function(v){"use strict";this.$MPhotoResizer0=v;return this;};u.prototype.setQuality=function(v){"use strict";this.$MPhotoResizer1=v;return this;};u.prototype.setHandler=function(v){"use strict";this.$MPhotoResizer3=v;return this;};u.prototype.setWaterfall=function(v,w,x){"use strict";this.$MPhotoResizer4=v;this.$MPhotoResizer5=w;this.$MPhotoResizer6=x;return this;};u.prototype.resize=function(){"use strict";i(this.$MPhotoResizer2);i(this.$MPhotoResizer0);i(this.$MPhotoResizer1);i(this.$MPhotoResizer3);i(this.$MPhotoResizer4);i(this.$MPhotoResizer5);if(!o.isSupported){this.logStep(n.CLIENT_PROCESS_UNAVAILABLE,{error:'canvas_not_supported'});this.$MPhotoResizer3(this.$MPhotoResizer2);return;}if(!this.$MPhotoResizer7()){this.logStep(n.CLIENT_PROCESS_UNAVAILABLE,{error:'no_jpeg_output'});this.$MPhotoResizer3(this.$MPhotoResizer2);return;}this.logStep(n.CLIENT_PROCESS_BEGIN);var v=k();h(this.$MPhotoResizer2,function(w){l(function(){var x=document.createElement('canvas'),y=new o(this.$MPhotoResizer2);y.onrender=function(){l(function(){var z=x.toDataURL('image/jpeg',this.$MPhotoResizer1);x=null;z=z.substr(q.length);l(function(){var aa=g(z);z=null;var ba=new Blob([aa.buffer],{type:'image/jpeg'});this.logStep(n.CLIENT_PROCESS_SUCCESS,{timeResizing:k()-v,originalSize:this.$MPhotoResizer2&&this.$MPhotoResizer2.size,resizedSize:ba&&ba.size});this.$MPhotoResizer3(ba);}.bind(this));}.bind(this));}.bind(this);y.render(x,{maxWidth:this.$MPhotoResizer0.x,maxHeight:this.$MPhotoResizer0.y,orientation:w});}.bind(this));}.bind(this));};u.prototype.$MPhotoResizer7=function(){"use strict";var v=document.createElement('canvas');v.width=1;v.height=1;var w=v.toDataURL('image/jpeg');return w.substr(0,q.length)===q;};u.prototype.getWaterfallID=function(){"use strict";return this.$MPhotoResizer4;};u.prototype.getWaterfallAppName=function(){"use strict";return this.$MPhotoResizer5;};u.prototype.getWaterfallSource=function(){"use strict";return this.$MPhotoResizer6;};e.exports=u;},null);
__d("MPhotoUploadRequest",["ActorURI","CurrentUser","DOM","MRequest","PhotosUploadWaterfallXMixin","PUWSteps","XMobilePhotosSaveUnpublishedControllerURIBuilder","copyProperties","invariant","mixin","performanceNow","supportsXHR2","MPhotoResizer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=p(k);for(var u in t)if(t.hasOwnProperty(u))w[u]=t[u];var v=t===null?null:t.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=t;function w(){"use strict";this.$MPhotoUploadRequest0=0;}w.prototype.setClonedFileInput=function(z){"use strict";this.$MPhotoUploadRequest1=z;return this;};w.prototype.setAttachedFile=function(z){"use strict";this.$MPhotoUploadRequest2=z;return this;};w.prototype.setDTSG=function(z){"use strict";this.$MPhotoUploadRequest3=z;return this;};w.prototype.setUploadDomain=function(z){"use strict";this.$MPhotoUploadRequest4=z;return this;};w.prototype.setWaterfall=function(z,aa,ba){"use strict";this.$MPhotoUploadRequest5=z;this.$MPhotoUploadRequest6=aa;this.$MPhotoUploadRequest7=ba;return this;};w.prototype.setHandler=function(z){"use strict";this.$MPhotoUploadRequest8=z;return this;};w.prototype.setProgressHandler=function(z){"use strict";this.$MPhotoUploadRequest9=z;return this;};w.prototype.setErrorHandler=function(z){"use strict";this.$MPhotoUploadRequesta=z;return this;};w.prototype.setThumbnailDimensions=function(z){"use strict";this.$MPhotoUploadRequestb=z;return this;};w.prototype.setShouldResize=function(z){"use strict";this.$MPhotoUploadRequestc=z;return this;};w.prototype.setTargetID=function(z){"use strict";this.$MPhotoUploadRequestd=z;return this;};w.prototype.setActorID=function(z){"use strict";this.$MPhotoUploadRequeste=z;return this;};w.prototype.setJpegResizer=function(z){"use strict";this.$MPhotoUploadRequestf=z;return this;};w.prototype.send=function(){"use strict";o(this.$MPhotoUploadRequest1);o(this.$MPhotoUploadRequest4);o(this.$MPhotoUploadRequest3);o(this.$MPhotoUploadRequest5);o(this.$MPhotoUploadRequest6);o(this.$MPhotoUploadRequest7);o(this.$MPhotoUploadRequest8);o(this.$MPhotoUploadRequestb);o(!this.$MPhotoUploadRequestg&&!this.$MPhotoUploadRequesth);if(!r()){this.$MPhotoUploadRequesti();}else this.$MPhotoUploadRequestj();return this;};w.prototype.$MPhotoUploadRequestk=function(z,aa){"use strict";this.logStep(z,n({retriesNeeded:this.$MPhotoUploadRequest0},aa||{}));};w.prototype.abort=function(z){"use strict";if(!this.$MPhotoUploadRequest1)return;this.$MPhotoUploadRequestk(l.CLIENT_TRANSFER_CANCEL,{elapsed_time:q()-this.transferStartTime,bytes:this.fileSize,progress:z});if(r()){this.$MPhotoUploadRequestl();}else this.$MPhotoUploadRequestm();};w.prototype.retry=function(){"use strict";this.$MPhotoUploadRequest0++;this.abort();this.send();};w.prototype.$MPhotoUploadRequestn=function(){"use strict";var z=this.$MPhotoUploadRequest1.files;return (z&&z.item&&z.item(0)&&z.item(0).size);};w.prototype.$MPhotoUploadRequesto=function(){"use strict";var z=new m().setInt('thumbnail_width',this.$MPhotoUploadRequestb.x).setInt('thumbnail_height',this.$MPhotoUploadRequestb.y).setString('waterfall_id',this.$MPhotoUploadRequest5).setString('waterfall_app_name',this.$MPhotoUploadRequest6).setString('waterfall_source',this.$MPhotoUploadRequest7).setInt('target_id',this.$MPhotoUploadRequestd).getURI().setProtocol(this.$MPhotoUploadRequest4.getProtocol()).setDomain(this.$MPhotoUploadRequest4.getDomain());return g.create(z,this.$MPhotoUploadRequeste);};w.prototype.$MPhotoUploadRequestj=function(){"use strict";var z=this.$MPhotoUploadRequest2,aa=this.$MPhotoUploadRequestc||'no_resize';if(z&&aa=='webworker_resize'){if(!this.$MPhotoUploadRequestf){this.logStep(l.CLIENT_PROCESS_UNAVAILABLE);this.$MPhotoUploadRequestp(z);return;}this.$MPhotoUploadRequestk(l.CLIENT_PROCESS_BEGIN);var ba=q();this.$MPhotoUploadRequestf.resizeBlob(z,function(ca,da,ea){if(ca){this.$MPhotoUploadRequestk(l.CLIENT_PROCESS_FAIL,{timeResizing:q()-ba,originalSize:z.size,error_code:ca.message});}else if(ea){this.$MPhotoUploadRequestk(l.CLIENT_PROCESS_SKIP,{timeResizing:q()-ba,originalSize:z.size});}else this.$MPhotoUploadRequestk(l.CLIENT_PROCESS_SUCCESS,{timeResizing:q()-ba,originalSize:z.size,resizedSize:da&&da.size});da=da||z;this.$MPhotoUploadRequestp(da);}.bind(this));}else if(z&&aa=='canvas_resize'){new s().setFile(z).setWaterfall(this.$MPhotoUploadRequest5,this.$MPhotoUploadRequest6,this.$MPhotoUploadRequest7).setHandler(function(ca){this.$MPhotoUploadRequestp(ca);}.bind(this)).resize();}else this.$MPhotoUploadRequestp(z);};w.prototype.$MPhotoUploadRequestp=function(z){"use strict";var aa=new FormData();aa.append(this.$MPhotoUploadRequest1.name,z);this.fileSize=z.size;this.transferStartTime=q();this.$MPhotoUploadRequestk(l.CLIENT_TRANSFER_BEGIN,{bytes:this.fileSize});var ba=this.$MPhotoUploadRequestg=new j(this.$MPhotoUploadRequesto()).setCORS(true).setData({fb_dtsg:this.$MPhotoUploadRequest3}).setRawData(aa);ba.listen('open',function(ca){var da=ca.getTransport();da.withCredentials=true;});ba.listen('done',function(ca){this.$MPhotoUploadRequestk(l.CLIENT_TRANSFER_SUCCESS,{elapsed_time:q()-this.transferStartTime,bytes:this.fileSize,fbid:ca.fbid});this.$MPhotoUploadRequest8(ca);}.bind(this));ba.listen('error',function(ca){this.$MPhotoUploadRequestk(l.CLIENT_TRANSFER_FAIL,{error_type:'mrequest_fail',elapsed_time:q()-this.transferStartTime,bytes:this.fileSize});this.$MPhotoUploadRequesta&&this.$MPhotoUploadRequesta(ca);}.bind(this));ba.listen('uploadprogress',function(ca){this.$MPhotoUploadRequest9&&this.$MPhotoUploadRequest9(ca);}.bind(this));ba.send();};w.prototype.$MPhotoUploadRequestl=function(){"use strict";this.$MPhotoUploadRequestg&&this.$MPhotoUploadRequestg.abort();this.$MPhotoUploadRequestg=null;};w.prototype.$MPhotoUploadRequestq=function(z,aa){"use strict";return i.create('input',{type:'hidden',name:z,value:aa});};w.prototype.$MPhotoUploadRequesti=function(){"use strict";var z='MPhotoUpload'+(x++),aa=this.$MPhotoUploadRequesth=i.create('iframe',{name:z,id:z});aa.style.display='none';var ba=this.$MPhotoUploadRequestr=i.create('form',{target:z,action:this.$MPhotoUploadRequesto().toString(),method:'POST',enctype:'multipart/form-data'});ba.style.display='none';var ca={fb_dtsg:this.$MPhotoUploadRequest3,__a:1,__user:h.getID(),upload_id:z};for(var da in ca)i.appendContent(ba,this.$MPhotoUploadRequestq(da,ca[da]));i.appendContent(document.body,aa);i.appendContent(document.body,ba);i.appendContent(ba,this.$MPhotoUploadRequest1);this.fileSize=this.$MPhotoUploadRequestn();y[z]=function(ea){if(!ea){this.$MPhotoUploadRequests('no_payload');return;}delete y[z];this.$MPhotoUploadRequestm();this.$MPhotoUploadRequestk(l.CLIENT_TRANSFER_SUCCESS,{elapsed_time:q()-this.transferStartTime,bytes:this.fileSize,fbid:ea.fbid});this.$MPhotoUploadRequest8(ea);}.bind(this);aa.onerror=this.$MPhotoUploadRequests.bind('iframe_onerror');this.transferStartTime=q();this.$MPhotoUploadRequestk(l.CLIENT_TRANSFER_BEGIN,{bytes:this.fileSize});document.domain='facebook.com';ba.submit();};w.prototype.$MPhotoUploadRequests=function(z){"use strict";this.$MPhotoUploadRequestk(l.CLIENT_TRANSFER_FAIL,{error_type:z,elapsed_time:q()-this.transferStartTime,bytes:this.fileSize});this.$MPhotoUploadRequesta&&this.$MPhotoUploadRequesta();this.$MPhotoUploadRequestm();};w.prototype.$MPhotoUploadRequestm=function(){"use strict";this.$MPhotoUploadRequesth&&i.remove(this.$MPhotoUploadRequesth);this.$MPhotoUploadRequesth=null;this.$MPhotoUploadRequestr&&i.remove(this.$MPhotoUploadRequestr);this.$MPhotoUploadRequestr=null;};w.prototype.getWaterfallID=function(){"use strict";return this.$MPhotoUploadRequest5;};w.prototype.getWaterfallAppName=function(){"use strict";return this.$MPhotoUploadRequest6;};w.prototype.getWaterfallSource=function(){"use strict";return this.$MPhotoUploadRequest7;};w.handleResponse=function(z,aa){"use strict";y[z](aa);};var x=0,y={};e.exports=w;},null);
__d("AnimatableContainer",["React","StaticContainer.react","getVendorPrefixedName"],function(a,b,c,d,e,f,g,h,i){var j=i('transform'),k=.5,l=g.createClass({displayName:"AnimatableContainer",getDefaultProps:function(){return {blockUpdates:true,component:'div',contentComponent:'span',opacity:1,rotate:null,timeout:200,translate:null};},componentWillMount:function(){this.wasEverOnGPU=false;this.isAnimating=false;this.lastAnimationTime=0;this.animationInterval=null;},componentWillUnmount:function(){if(this.animationInterval)window.clearInterval(this.animationInterval);},componentWillReceiveProps:function(m){var n=this.getStyle(this.props),o=this.getStyle(m);this.isAnimating=(o.opacity!==n.opacity||o[j]!==n[j]);if(this.isAnimating){this.lastAnimationTime=Date.now();if(this.props.timeout&&!this.animationInterval)this.animationInterval=window.setInterval(this.checkAnimationEnd,this.props.timeout*k);}},checkAnimationEnd:function(){if(Date.now()-this.lastAnimationTime>this.props.timeout){window.clearInterval(this.animationInterval);this.animationInterval=null;this.isAnimating=false;this.forceUpdate();}},getStyle:function(m){var n={};if(this.props.style)for(var o in this.props.style)n[o]=this.props.style[o];var p='';if(m.opacity!==1)n.opacity=m.opacity;if(m.translate)p+=('translate3d('+(m.translate.x||0)+'px, '+(m.translate.y||0)+'px, '+(m.translate.z||0)+'px) ');if(m.rotate)p+=('rotate3d('+(m.rotate.x||0)+', '+(m.rotate.y||0)+', '+(m.rotate.z||0)+', '+m.rotate.deg+'deg)');if(p.length>0){n[j]=p;this.wasEverOnGPU=true;}else if(this.wasEverOnGPU)n[j]='translate3d(0, 0, 0)';return n;},render:function(){var m=this.props.component,n=this.props.contentComponent;return (g.createElement(m,{className:this.props.className,style:this.getStyle(this.props)},g.createElement(h,{shouldUpdate:!this.props.blockUpdates||!this.isAnimating},g.createElement(n,null,this.props.children))));}});e.exports=l;},null);
__d("TouchableArea",["React"],function(a,b,c,d,e,f,g){var h=g.createClass({displayName:"TouchableArea",getDefaultProps:function(){return {component:'div',touchable:true,blockingTouchable:true};},handleTouchStart:function(i){if(!this.props.scroller||!this.props.touchable)return;this.props.scroller.doTouchStart(i.touches,i.timeStamp);},handleTouchMove:function(i){if(!this.props.scroller||!this.props.touchable)return;this.props.scroller.doTouchMove(i.touches,i.timeStamp,i.scale);if(this.props.blockingTouchable)i.preventDefault();},handleTouchEnd:function(i){if(!this.props.scroller||!this.props.touchable)return;this.props.scroller.doTouchEnd(i.timeStamp);},render:function(){var i=this.props.component;return (g.createElement(i,g.__spread({},this.props,{onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,onTouchCancel:this.handleTouchEnd}),this.props.children));}});e.exports=h;},null);
__d("ZyngaScrollerAnimate",["requestAnimationFrame"],function(a,b,c,d,e,f,g){var h=Date.now||function(){return +new Date();},i=60,j=1000,k={},l=1,m={stop:function(n){var o=k[n]!=null;if(o)k[n]=null;return o;},isRunning:function(n){return k[n]!=null;},start:function(n,o,p,q,r,s){var t=h(),u=t,v=0,w=0,x=l++;if(!s)s=document.body;if(x%20===0){var y={};for(var z in k)y[z]=true;k=y;}var aa=function(ba){var ca=ba!==true,da=h();if(!k[x]||(o&&!o(x))){k[x]=null;p&&p(i-(w/((da-t)/j)),x,false);return;}if(ca){var ea=Math.round((da-u)/(j/i))-1;for(var fa=0;fa<Math.min(ea,4);fa++){aa(true);w++;}}if(q){v=(da-t)/q;if(v>1)v=1;}var ga=r?r(v):v;if((n(ga,da,ca)===false||v===1)&&ca){k[x]=null;p&&p(i-(w/((da-t)/j)),x,v===1||q==null);}else if(ca){u=da;g(aa,s);}};k[x]=true;g(aa,s);return x;}};e.exports=m;},null);
__d("ZyngaScroller",["ZyngaScrollerAnimate"],function(a,b,c,d,e,f,g){var h;(function(){var i=function(){};h=function(n,o){this.__callback=n;this.options={scrollingX:true,scrollingY:true,animating:true,animationDuration:250,bouncing:true,locking:true,paging:false,snapping:false,zooming:false,minZoom:.5,maxZoom:3,speedMultiplier:1,scrollingComplete:i,penetrationDeceleration:.03,penetrationAcceleration:.08};for(var p in o)this.options[p]=o[p];};var j=function(n){return (Math.pow((n-1),3)+1);},k=function(n){if((n/=.5)<1)return .5*Math.pow(n,3);return .5*(Math.pow((n-2),3)+2);},l={__isSingleTouch:false,__isTracking:false,__didDecelerationComplete:false,__isGesturing:false,__isDragging:false,__isDecelerating:false,__isAnimating:false,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:false,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions:function(n,o,p,q){var r=this;if(n===+n)r.__clientWidth=n;if(o===+o)r.__clientHeight=o;if(p===+p)r.__contentWidth=p;if(q===+q)r.__contentHeight=q;r.__computeScrollMax();r.scrollTo(r.__scrollLeft,r.__scrollTop,true);},setPosition:function(n,o){var p=this;p.__clientLeft=n||0;p.__clientTop=o||0;},setSnapSize:function(n,o){var p=this;p.__snapWidth=n;p.__snapHeight=o;},activatePullToRefresh:function(n,o,p,q){var r=this;r.__refreshHeight=n;r.__refreshActivate=o;r.__refreshDeactivate=p;r.__refreshStart=q;},triggerPullToRefresh:function(){this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,true);if(this.__refreshStart)this.__refreshStart();},finishPullToRefresh:function(){var n=this;n.__refreshActive=false;if(n.__refreshDeactivate)n.__refreshDeactivate();n.scrollTo(n.__scrollLeft,n.__scrollTop,true);},getValues:function(){var n=this;return {left:n.__scrollLeft,top:n.__scrollTop,zoom:n.__zoomLevel};},getScrollMax:function(){var n=this;return {left:n.__maxScrollLeft,top:n.__maxScrollTop};},zoomTo:function(n,o,p,q,r){var s=this;if(!s.options.zooming)throw new Error("Zooming is not enabled!");if(r)s.__zoomComplete=r;if(s.__isDecelerating){g.stop(s.__isDecelerating);s.__isDecelerating=false;}var t=s.__zoomLevel;if(p==null)p=s.__clientWidth/2;if(q==null)q=s.__clientHeight/2;n=Math.max(Math.min(n,s.options.maxZoom),s.options.minZoom);s.__computeScrollMax(n);var u=((p+s.__scrollLeft)*n/t)-p,v=((q+s.__scrollTop)*n/t)-q;if(u>s.__maxScrollLeft){u=s.__maxScrollLeft;}else if(u<0)u=0;if(v>s.__maxScrollTop){v=s.__maxScrollTop;}else if(v<0)v=0;s.__publish(u,v,n,o);},zoomBy:function(n,o,p,q,r){var s=this;s.zoomTo(s.__zoomLevel*n,o,p,q,r);},scrollTo:function(n,o,p,q){var r=this;if(r.__isDecelerating){g.stop(r.__isDecelerating);r.__isDecelerating=false;}if(q!=null&&q!==r.__zoomLevel){if(!r.options.zooming)throw new Error("Zooming is not enabled!");n*=q;o*=q;r.__computeScrollMax(q);}else q=r.__zoomLevel;if(!r.options.scrollingX){n=r.__scrollLeft;}else if(r.options.paging){n=Math.round(n/r.__clientWidth)*r.__clientWidth;}else if(r.options.snapping)n=Math.round(n/r.__snapWidth)*r.__snapWidth;if(!r.options.scrollingY){o=r.__scrollTop;}else if(r.options.paging){o=Math.round(o/r.__clientHeight)*r.__clientHeight;}else if(r.options.snapping)o=Math.round(o/r.__snapHeight)*r.__snapHeight;n=Math.max(Math.min(r.__maxScrollLeft,n),0);o=Math.max(Math.min(r.__maxScrollTop,o),0);if(n===r.__scrollLeft&&o===r.__scrollTop)p=false;r.__publish(n,o,q,p);},scrollBy:function(n,o,p){var q=this,r=q.__isAnimating?q.__scheduledLeft:q.__scrollLeft,s=q.__isAnimating?q.__scheduledTop:q.__scrollTop;q.scrollTo(r+(n||0),s+(o||0),p);},doMouseZoom:function(n,o,p,q){var r=this,s=n>0?.97:1.03;return r.zoomTo(r.__zoomLevel*s,false,p-r.__clientLeft,q-r.__clientTop);},doTouchStart:function(n,o){if(n.length==null)throw new Error("Invalid touch list: "+n);if(o instanceof Date)o=o.valueOf();if(typeof o!=="number")throw new Error("Invalid timestamp value: "+o);var p=this;p.__interruptedAnimation=true;if(p.__isDecelerating){g.stop(p.__isDecelerating);p.__isDecelerating=false;p.__interruptedAnimation=true;}if(p.__isAnimating){g.stop(p.__isAnimating);p.__isAnimating=false;p.__interruptedAnimation=true;}var q,r,s=n.length===1;if(s){q=n[0].pageX;r=n[0].pageY;}else{q=Math.abs(n[0].pageX+n[1].pageX)/2;r=Math.abs(n[0].pageY+n[1].pageY)/2;}p.__initialTouchLeft=q;p.__initialTouchTop=r;p.__zoomLevelStart=p.__zoomLevel;p.__lastTouchLeft=q;p.__lastTouchTop=r;p.__lastTouchMove=o;p.__lastScale=1;p.__enableScrollX=!s&&p.options.scrollingX;p.__enableScrollY=!s&&p.options.scrollingY;p.__isTracking=true;p.__didDecelerationComplete=false;p.__isDragging=!s;p.__isSingleTouch=s;p.__positions=[];},doTouchMove:function(n,o,p){if(n.length==null)throw new Error("Invalid touch list: "+n);if(o instanceof Date)o=o.valueOf();if(typeof o!=="number")throw new Error("Invalid timestamp value: "+o);var q=this;if(!q.__isTracking)return;var r,s;if(n.length===2){r=Math.abs(n[0].pageX+n[1].pageX)/2;s=Math.abs(n[0].pageY+n[1].pageY)/2;}else{r=n[0].pageX;s=n[0].pageY;}var t=q.__positions;if(q.__isDragging){var u=r-q.__lastTouchLeft,v=s-q.__lastTouchTop,w=q.__scrollLeft,x=q.__scrollTop,y=q.__zoomLevel;if(p!=null&&q.options.zooming){var z=y;y=y/q.__lastScale*p;y=Math.max(Math.min(y,q.options.maxZoom),q.options.minZoom);if(z!==y){var aa=r-q.__clientLeft,ba=s-q.__clientTop;w=((aa+w)*y/z)-aa;x=((ba+x)*y/z)-ba;q.__computeScrollMax(y);}}if(q.__enableScrollX){w-=u*this.options.speedMultiplier;var ca=q.__maxScrollLeft;if(w>ca||w<0)if(q.options.bouncing){w+=(u/2*this.options.speedMultiplier);}else if(w>ca){w=ca;}else w=0;}if(q.__enableScrollY){x-=v*this.options.speedMultiplier;var da=q.__maxScrollTop;if(x>da||x<0)if(q.options.bouncing){x+=(v/2*this.options.speedMultiplier);if(!q.__enableScrollX&&q.__refreshHeight!=null)if(!q.__refreshActive&&x<=-q.__refreshHeight){q.__refreshActive=true;if(q.__refreshActivate)q.__refreshActivate();}else if(q.__refreshActive&&x>-q.__refreshHeight){q.__refreshActive=false;if(q.__refreshDeactivate)q.__refreshDeactivate();}}else if(x>da){x=da;}else x=0;}if(t.length>60)t.splice(0,30);t.push(w,x,o);q.__publish(w,x,y);}else{var ea=q.options.locking?3:0,fa=5,ga=Math.abs(r-q.__initialTouchLeft),ha=Math.abs(s-q.__initialTouchTop);q.__enableScrollX=q.options.scrollingX&&ga>=ea;q.__enableScrollY=q.options.scrollingY&&ha>=ea;t.push(q.__scrollLeft,q.__scrollTop,o);q.__isDragging=(q.__enableScrollX||q.__enableScrollY)&&(ga>=fa||ha>=fa);if(q.__isDragging)q.__interruptedAnimation=false;}q.__lastTouchLeft=r;q.__lastTouchTop=s;q.__lastTouchMove=o;q.__lastScale=p;},doTouchEnd:function(n){if(n instanceof Date)n=n.valueOf();if(typeof n!=="number")throw new Error("Invalid timestamp value: "+n);var o=this;if(!o.__isTracking)return;o.__isTracking=false;if(o.__isDragging){o.__isDragging=false;if(o.__isSingleTouch&&o.options.animating&&(n-o.__lastTouchMove)<=100){var p=o.__positions,q=p.length-1,r=q;for(var s=q;s>0&&p[s]>(o.__lastTouchMove-100);s-=3)r=s;if(r!==q){var t=p[q]-p[r],u=o.__scrollLeft-p[r-2],v=o.__scrollTop-p[r-1];o.__decelerationVelocityX=u/t*(1000/60);o.__decelerationVelocityY=v/t*(1000/60);var w=o.options.paging||o.options.snapping?4:1;if(Math.abs(o.__decelerationVelocityX)>w||Math.abs(o.__decelerationVelocityY)>w)if(!o.__refreshActive)o.__startDeceleration(n);}else o.options.scrollingComplete();}else if((n-o.__lastTouchMove)>100)o.options.scrollingComplete();}if(!o.__isDecelerating)if(o.__refreshActive&&o.__refreshStart){o.__publish(o.__scrollLeft,-o.__refreshHeight,o.__zoomLevel,true);if(o.__refreshStart)o.__refreshStart();}else{if(o.__interruptedAnimation||o.__isDragging)o.options.scrollingComplete();o.scrollTo(o.__scrollLeft,o.__scrollTop,true,o.__zoomLevel);if(o.__refreshActive){o.__refreshActive=false;if(o.__refreshDeactivate)o.__refreshDeactivate();}}o.__positions.length=0;},__publish:function(n,o,p,q){var r=this,s=r.__isAnimating;if(s){g.stop(s);r.__isAnimating=false;}if(q&&r.options.animating){r.__scheduledLeft=n;r.__scheduledTop=o;r.__scheduledZoom=p;var t=r.__scrollLeft,u=r.__scrollTop,v=r.__zoomLevel,w=n-t,x=o-u,y=p-v,z=function(ca,da,ea){if(ea){r.__scrollLeft=t+(w*ca);r.__scrollTop=u+(x*ca);r.__zoomLevel=v+(y*ca);if(r.__callback)r.__callback(r.__scrollLeft,r.__scrollTop,r.__zoomLevel);}},aa=function(ca){return r.__isAnimating===ca;},ba=function(ca,da,ea){if(da===r.__isAnimating)r.__isAnimating=false;if(r.__didDecelerationComplete||ea)r.options.scrollingComplete();if(r.options.zooming){r.__computeScrollMax();if(r.__zoomComplete){r.__zoomComplete();r.__zoomComplete=null;}}};r.__isAnimating=g.start(z,aa,ba,r.options.animationDuration,s?j:k);}else{r.__scheduledLeft=r.__scrollLeft=n;r.__scheduledTop=r.__scrollTop=o;r.__scheduledZoom=r.__zoomLevel=p;if(r.__callback)r.__callback(n,o,p);if(r.options.zooming){r.__computeScrollMax();if(r.__zoomComplete){r.__zoomComplete();r.__zoomComplete=null;}}}},__computeScrollMax:function(n){var o=this;if(n==null)n=o.__zoomLevel;o.__maxScrollLeft=Math.max((o.__contentWidth*n)-o.__clientWidth,0);o.__maxScrollTop=Math.max((o.__contentHeight*n)-o.__clientHeight,0);},__startDeceleration:function(n){var o=this;if(o.options.paging){var p=Math.max(Math.min(o.__scrollLeft,o.__maxScrollLeft),0),q=Math.max(Math.min(o.__scrollTop,o.__maxScrollTop),0),r=o.__clientWidth,s=o.__clientHeight;o.__minDecelerationScrollLeft=Math.floor(p/r)*r;o.__minDecelerationScrollTop=Math.floor(q/s)*s;o.__maxDecelerationScrollLeft=Math.ceil(p/r)*r;o.__maxDecelerationScrollTop=Math.ceil(q/s)*s;}else{o.__minDecelerationScrollLeft=0;o.__minDecelerationScrollTop=0;o.__maxDecelerationScrollLeft=o.__maxScrollLeft;o.__maxDecelerationScrollTop=o.__maxScrollTop;}var t=function(x,y,z){o.__stepThroughDeceleration(z);},u=o.options.snapping?4:.1,v=function(){var x=Math.abs(o.__decelerationVelocityX)>=u||Math.abs(o.__decelerationVelocityY)>=u;if(!x)o.__didDecelerationComplete=true;return x;},w=function(x,y,z){o.__isDecelerating=false;if(o.__didDecelerationComplete)o.options.scrollingComplete();o.scrollTo(o.__scrollLeft,o.__scrollTop,o.options.snapping);};o.__isDecelerating=g.start(t,v,w);},__stepThroughDeceleration:function(n){var o=this,p=o.__scrollLeft+o.__decelerationVelocityX,q=o.__scrollTop+o.__decelerationVelocityY;if(!o.options.bouncing){var r=Math.max(Math.min(o.__maxDecelerationScrollLeft,p),o.__minDecelerationScrollLeft);if(r!==p){p=r;o.__decelerationVelocityX=0;}var s=Math.max(Math.min(o.__maxDecelerationScrollTop,q),o.__minDecelerationScrollTop);if(s!==q){q=s;o.__decelerationVelocityY=0;}}if(n){o.__publish(p,q,o.__zoomLevel);}else{o.__scrollLeft=p;o.__scrollTop=q;}if(!o.options.paging){var t=.95;o.__decelerationVelocityX*=t;o.__decelerationVelocityY*=t;}if(o.options.bouncing){var u=0,v=0,w=o.options.penetrationDeceleration,x=o.options.penetrationAcceleration;if(p<o.__minDecelerationScrollLeft){u=o.__minDecelerationScrollLeft-p;}else if(p>o.__maxDecelerationScrollLeft)u=o.__maxDecelerationScrollLeft-p;if(q<o.__minDecelerationScrollTop){v=o.__minDecelerationScrollTop-q;}else if(q>o.__maxDecelerationScrollTop)v=o.__maxDecelerationScrollTop-q;if(u!==0)if(u*o.__decelerationVelocityX<=0){o.__decelerationVelocityX+=u*w;}else o.__decelerationVelocityX=u*x;if(v!==0)if(v*o.__decelerationVelocityY<=0){o.__decelerationVelocityY+=v*w;}else o.__decelerationVelocityY=v*x;}}};for(var m in l)h.prototype[m]=l[m];})();e.exports=h;},null);
__d("MMultiPhotoUploaderSimpleScroller",["React","cx","AnimatableContainer","TouchableArea","ZyngaScroller"],function(a,b,c,d,e,f,g,h,i,j,k){var l={bottom:0,left:0,position:'absolute',right:0,top:0},m=g.createClass({displayName:"MMultiPhotoUploaderSimpleScroller",getInitialState:function(){return {left:0,top:0};},componentWillMount:function(){this.scroller=new k(this.handleScroll,this.props.options);this.configured=false;this.shouldScrollToEnd=false;},componentDidMount:function(){this.configure();},componentDidUpdate:function(){this.configure();},configure:function(){if(this.configured)return;this.configured=true;this.resizeScroller();},resizeScroller:function(){var n=this.refs.content.getDOMNode();this.scroller.setDimensions(this.getDOMNode().clientWidth,this.getDOMNode().clientHeight,n.clientWidth,n.clientHeight);},checkShouldScrollToEnd:function(){var n=this.scroller.getValues().left,o=this.getDOMNode().clientWidth,p=this.refs.content.getDOMNode().clientWidth;this.shouldScrollToEnd=n+o>=p-this.props.thumbnailSize;},scrollHorizontallyToEnd:function(){var n=this.refs.content.getDOMNode().clientWidth,o=this.getDOMNode().clientWidth;if(this.shouldScrollToEnd&&n>o){this.shouldScrollToEnd=false;var p=n-o;this.scroller.scrollTo(p,0,false);}},handleScroll:function(n,o){if(this.isMounted())this.setState({left:n,top:o});},render:function(){return (g.createElement(j,g.__spread({},this.props,{scroller:this.scroller,style:Object.assign({},(this.props.style||{}),{overflow:'hidden'})}),g.createElement(i,{translate:{x:-1*this.state.left,y:-1*this.state.top},style:l},g.createElement("div",{ref:"content",className:"_4yl8"},this.props.children))));}});e.exports=m;},null);
__d("MMultiPhotoUploaderAttachment.react",["MMultiPhotoUploaderAttachmentState","MLoadingIndicator.react","MProgressBar.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=2,m=.7,n=500,o=10000,p=250,q=j.createClass({displayName:"Attachment",getInitialState:function(){return {previewLoaded:false};},componentDidMount:function(){if(this.props.state===g.UPLOADED&&!this.state.previewLoaded)this.loadPreview();},componentDidUpdate:function(r,s){if(this.refs.progressBar)if(this.props.state===g.SENDING&&this.props.loaded&&this.props.totalSize)if(this.props.loaded===this.props.totalSize){this.refs.progressBar.animate(100,o);}else{var t=100*m*this.props.loaded/this.props.totalSize;this.refs.progressBar.animate(t,n);}if(r.state!==g.UPLOADED&&this.props.state===g.UPLOADED)this.loadPreview();if(!s.previewLoaded&&this.state.previewLoaded&&this.props.onPreviewLoaded)this.props.onPreviewLoaded();},getLoadingIndicator:function(){if(this.props.loaded>0){if(!this.state.previewLoaded){return this.getProgressBar();}else return this.getSpinner();}else return this.getSpinner();},getProgressBar:function(){if(this.props.state!==g.SENDING&&this.props.state!==g.UPLOADED)return null;if(this.state.previewLoaded)return null;return (j.createElement("div",{className:"_r6h"},j.createElement(i,{initialValue:0,ref:"progressBar"})));},getSpinner:function(){if(this.props.state!==g.SENDING&&!this.props.isPollingTagSuggestions)return null;return (j.createElement("div",{className:((this.props.isPollingTagSuggestions?"_2d1s":''))},j.createElement(h,{className:"_5r-2"})));},loadPreview:function(){if(this.refs.progressBar)this.refs.progressBar.animate(100,o);var r=new Image();r.onload=function(){if(this.refs.progressBar){this.refs.progressBar.animate(100,p);setTimeout(function(){this.setState({previewLoaded:true});}.bind(this),p);}else this.setState({previewLoaded:true});}.bind(this);r.src=this.props.imageURI;},getPreview:function(r,s){if(this.props.state!==g.UPLOADED)return null;if(!this.state.previewLoaded)return null;return (j.createElement("img",{className:"_5r-3",src:this.props.imageURI,width:r,height:s}));},getError:function(){if(this.props.state!==g.ERROR)return null;return j.createElement("div",{className:"_5r-4"});},getAbortButton:function(){var r=this.props.shouldShowWhiteDesign?"_3lx9":"_5r-6",s=this.props.shouldShowWhiteDesign?"_3lxa":"_5r-5";return (j.createElement("div",{className:s,"data-sigil":"touchable",onClick:this.props.onRemoveClick},j.createElement("div",{className:r})));},getTagCountIndicator:function(){if(this.props.state!==g.UPLOADED)return null;if(!this.state.previewLoaded)return null;var r=this.props.tagCount;if(!r)return null;var s=(("_5pt")+(r===1?' '+"_5pu":'')+(r===2?' '+"_5pv":'')+(r>2?' '+"_5pw":''));return (j.createElement("div",{className:s}));},getPhotoBorder:function(){var r=null;if(this.props.shouldShowWhiteDesign)r=j.createElement("div",{className:"_23rn"});return r;},render:function(){var r;if(this.props.shouldShowWhiteDesign){r="_s50";}else if(this.props.shouldShowLargeThumbnails){r="_3vnj";}else r="_51s2";var s=this.props.previewSize-l,t=s;if(this.props.state===g.UPLOADED&&this.state.previewLoaded&&this.props.shouldShowLargeThumbnails)t=Math.floor(this.props.thumbnail_width*s/this.props.thumbnail_height);var u={width:t};return (j.createElement("div",{className:r,style:u},j.createElement("div",{onClick:this.props.onThumbnailClicked,"data-sigil":"touchable"},this.getLoadingIndicator(),this.getPreview(t,s),this.getError(),this.getTagCountIndicator(),this.getPhotoBorder()),this.getAbortButton()));}});e.exports=q;},null);
__d("MPhotoUploadDisable",["DOM","Stratcom","fbt"],function(a,b,c,d,e,f,g,h,i){var j={IOS_8_PHOTO_UPLOAD_DISABLE_MESSAGE:i._("\u5f88\u62b1\u6b49\uff0ciOS 8 \u6682\u65f6\u65e0\u6cd5\u4f7f\u7528 Safari \u4e0a\u4f20\u7167\u7247\u3002{line break}\u6211\u4eec\u5df2\u7ecf\u901a\u77e5 Apple\uff0c\u5171\u540c\u4fee\u590d\u6b64\u95ee\u9898\u3002\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002",[i.param("line break",'\n')]),alertIOS8FileUploadDisabled:function(event){alert(this.IOS_8_PHOTO_UPLOAD_DISABLE_MESSAGE);event.kill();},disableIOS8FileUpload:function(k){this._listeners=[g.listen(k,'click',null,this.alertIOS8FileUploadDisabled.bind(this)),h.listen('m:page:unload',null,this._cleanup.bind(this))];},_cleanup:function(){this._listeners.forEach(function(k){k.remove();});}};e.exports=j;},null);
__d("MPhotoUploadFileInput",["DOM","MTouchClick","Stratcom"],function(a,b,c,d,e,f,g,h,i){function j(k){"use strict";this.$MPhotoUploadFileInput0=k;i.listen('m:page:unload',null,function(){if(this.$MPhotoUploadFileInput1)this.$MPhotoUploadFileInput1.remove();if(this.$MPhotoUploadFileInput2)this.$MPhotoUploadFileInput2.remove();}.bind(this));}j.prototype.setChangeHandler=function(k){"use strict";if(this.$MPhotoUploadFileInput3)this.$MPhotoUploadFileInput1.remove();this.$MPhotoUploadFileInput3=k;this.$MPhotoUploadFileInput1=g.listen(this.$MPhotoUploadFileInput0,'change',null,k);};j.prototype.setClickHandler=function(k){"use strict";if(this.$MPhotoUploadFileInput4)this.$MPhotoUploadFileInput2.remove();this.$MPhotoUploadFileInput4=k;this.$MPhotoUploadFileInput2=g.listen(this.$MPhotoUploadFileInput0,'click',null,k);};j.prototype.getDOMNode=function(){"use strict";return this.$MPhotoUploadFileInput0;};j.prototype.cloneDOMNode=function(){"use strict";var k=this.$MPhotoUploadFileInput0;this.$MPhotoUploadFileInput0=k.cloneNode(true);this.$MPhotoUploadFileInput0.value='';g.replace(k,this.$MPhotoUploadFileInput0);if(this.$MPhotoUploadFileInput3){this.$MPhotoUploadFileInput1.remove();this.$MPhotoUploadFileInput1=g.listen(this.$MPhotoUploadFileInput0,'change',null,this.$MPhotoUploadFileInput3);}if(this.$MPhotoUploadFileInput4){this.$MPhotoUploadFileInput2.remove();this.$MPhotoUploadFileInput2=g.listen(this.$MPhotoUploadFileInput0,'click',null,this.$MPhotoUploadFileInput4);}return k;};j.prototype.click=function(k){"use strict";h.click(this.$MPhotoUploadFileInput0,{getRawEvent:function(){return k.nativeEvent;}});};e.exports=j;},null);
__d("MMultiPhotoUploaderPlusAttachment.react",["cx","React","fbt","MXUILayout.react","MXUILayoutFillColumn.react"],function(a,b,c,d,e,f,g,h,i,j,k){var l=h.createClass({displayName:"PlusAttachment",getAttachmentChildContainer:function(){if(!this.props.shouldShowWhiteDesign)return null;var m=this.props.shouldShowAddPhotoLabel?(h.createElement("div",{className:"_vbw"},"\u7167\u7247")):null;return (h.createElement(j,null,h.createElement(k,{alignself:"center",className:"_2-24"},h.createElement("div",{className:"_vbx"},h.createElement("div",{className:"_vby"}),m))));},getAttachmentClass:function(){var m,n=this.props.largeThumbnails;if(this.props.shouldShowWhiteDesign){m="_vbz";}else m=((n?"_3vnj":'')+(!n?' '+"_51s2":'')+(n?' '+"_14y0":'')+(!n?' '+"_5e0r":''));return m;},render:function(){var m=this.getAttachmentClass(),n=this.getAttachmentChildContainer();return (h.createElement("div",{"data-sigil":"touchable",className:m,role:"button",tabIndex:"0",onClick:this.props.onClick},n));}});e.exports=l;},null);
__d("MMultiPhotoUploaderHiddenInputs.react",["React"],function(a,b,c,d,e,f,g){var h=g.createClass({displayName:"HiddenInputs",render:function(){return (g.createElement("div",null,this.props.fbids.map(function(i){return (g.createElement("input",{key:i,type:"hidden",name:'photo_ids['+i+']',value:i}));})));}});e.exports=h;},null);
__d("MMultiPhotoUploader.react",["cx","fbt","MPhotoUploadRequest","PhotosUploadWaterfallXMixin","PUWSteps","React","Stratcom","Vector","MMultiPhotoUploaderSimpleScroller","JpegResizer","MMultiPhotoUploaderAttachment.react","MMultiPhotoUploaderAttachmentState","MPhotoUploadDisable","MPhotoUploadFileInput","MMultiPhotoUploaderPlusAttachment.react","MMultiPhotoUploaderHiddenInputs.react","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=l.PropTypes,y=0,z=80,aa=56,ba=l.createClass({displayName:"MMultiPhotoUploader",propTypes:{dtsg:x.string.isRequired,fileInput:x.instanceOf(t).isRequired,formHiddenInputs:x.instanceOf(HTMLElement).isRequired,uploadDomain:x.instanceOf(w).isRequired,waterfallID:x.string.isRequired,waterfallAppName:x.string.isRequired,waterfallSource:x.string.isRequired,actorID:x.number,targetID:x.number,shouldResize:x.string,singlePhoto:x.bool,maxPhotosAllowed:x.number,initCollapsed:x.bool,logFlowBeginOnClick:x.bool,shouldScroll:x.bool,shouldShowLargeThumbnails:x.bool,shouldShowWhiteDesign:x.bool,shouldShowAddPhotoLabel:x.bool,showDropShadow:x.bool,disableIOS8SafariAlert:x.bool,onUploadSuccess:x.func,onRemove:x.func,onThumbnailClicked:x.func,onUploadStarted:x.func},mixins:[j],setCollapsed:function(ca){this.setState({collapsed:ca});},isCollapsed:function(){return this.state.collapsed;},getAttachmentCount:function(){return this.attachments.length;},hasAttachments:function(){return this.attachments.length>0;},clearAttachments:function(){this.setAttachments(this.attachments.filter(function(ca){if(ca.state===r.SENDING)ca.request.abort();return false;}));},getInitialState:function(){this.attachments=[];return {attachments:this.attachments,collapsed:this.props.initCollapsed};},numAttachmentsWithState:function(ca){return this.attachments.filter(function(da){return da.state===ca;}).length;},_numPollingAttachments:function(){return this.attachments.filter(function(ca){return ca.isPollingTagSuggestions;}).length;},isMaxAttachmentReached:function(){return this.attachments.length>=this.props.maxPhotosAllowed;},setAttachments:function(ca){m.invoke('multi-photos-attachment-change',null,{attachments:ca,multiPhotoUploader:this});this.setAttachmentsSilent(ca);},setAttachmentsSilent:function(ca){this.attachments=ca;this.setState({attachments:ca});var da=this.props.fileInput.getDOMNode();da.disabled=this.isMaxAttachmentReached();m.invoke('multi-photos-change',null,{input_id:da.id});var ea={input_id:da.id};for(var fa in r){if(!r.hasOwnProperty(fa)||typeof r[fa]!=='string')continue;var ga=r[fa];ea[ga]=this.numAttachmentsWithState(ga);}ea.polling=this._numPollingAttachments();m.invoke('MMultiPhotoUploader:attachments:change',null,ea);},addAttachment:function(ca){m.invoke('MMultiPhotoUploader:attachments:add',null,{photo_count:ca.length||1});this.setAttachments(this.attachments.concat([ca]));},removeAttachment:function(ca){m.invoke('MMultiPhotoUploader:attachments:remove',null,{photo_count:1});this.setAttachments(this.attachments.filter(function(da){if(da.id===ca){if(da.state===r.SENDING){var ea=0;if(da.totalSize)ea=Math.floor(100*(da.loaded/da.totalSize));da.request.abort(ea);}else this.logStep(k.CLIENT_UPLOAD_REMOVE,{fbid:da.fbid});if(da.fbid)this.props.onRemove&&this.props.onRemove(da.fbid);return false;}return true;}.bind(this)));},updateAttachment:function(ca){this.setAttachments(this.attachments.map(function(da){if(da.id===ca.id)return ca;return da;}));},getAttachment:function(ca){return this.attachments.filter(function(da){return da.id===ca;})[0];},setAttachmentProps:function(ca,da){var ea=this.getAttachment(ca),fa={};for(var ga in ea)fa[ga]=ea[ga];for(ga in da)fa[ga]=da[ga];this.updateAttachment(fa);},retryAttachment:function(ca){var da=this.getAttachment(ca);this.logStep(k.CLIENT_ATTEMPT_RETRY,{fbid:da.fbid});da.request.retry();this.updateAttachment({id:ca,state:'sending',request:da.request});},setAttachmentTagCounts:function(ca){this.setAttachmentsSilent(this.attachments.map(function(da){da.tagCount=ca[da.id];return da;}));},componentDidMount:function(){this.props.fileInput.setChangeHandler(this.onFileInputChange);this.props.fileInput.setClickHandler(this.onFileInputClick);if(!this.hasAttachments()&&!this.props.logFlowBeginOnClick)this.logStep(k.CLIENT_FLOW_BEGIN);},initializeJpegResizer:function(){if(!p.isSupported())return;this._jpegResizer=this._jpegResizer||new p(p.DEFAULT_POOL_SIZE);},onFileInputChange:function(){this.uploadPhotos(this.props.fileInput.getDOMNode().files);},onFileInputClick:function(event){if(this.props.disableIOS8SafariAlert===true)s.alertIOS8FileUploadDisabled(event);if(!this.hasAttachments()&&this.props.logFlowBeginOnClick)this.logStep(k.CLIENT_FLOW_BEGIN);this.logStep(k.CLIENT_SELECT_BEGIN);if(this.props.shouldResize=='webworker_resize')this.initializeJpegResizer();},uploadPhotos:function(ca){if(ca.length===0){this.logStep(k.CLIENT_SELECT_FAIL);return;}var da=this.props.fileInput.cloneDOMNode();for(var ea=0;ea<ca.length;ea++){var fa=ca[ea];if(fa.name===''&&fa.fileName===''&&fa.size===0&&fa.fileSize===0){this.logStep(k.CLIENT_SELECT_FAIL);continue;}this.logStep(k.CLIENT_SELECT_SUCCESS);var ga=y++,ha=this.props.shouldShowLargeThumbnails?z:aa,ia=new i().setClonedFileInput(da).setAttachedFile(fa).setUploadDomain(this.props.uploadDomain).setThumbnailDimensions(new n(ha,ha)).setShouldResize(this.props.shouldResize).setDTSG(this.props.dtsg).setWaterfall(this.props.waterfallID,this.props.waterfallAppName,this.props.waterfallSource).setHandler(this.handleUploadSuccess.bind(this,ga)).setErrorHandler(this.handleUploadError.bind(this,ga)).setProgressHandler(this.handleUploadProgress.bind(this,ga)).setTargetID(this.props.targetID).setActorID(this.props.actorID).setJpegResizer(this._jpegResizer).send();this.props.onUploadStarted&&this.props.onUploadStarted();if(this.props.singlePhoto)this.clearAttachments();this.addAttachment({id:ga,state:'sending',request:ia});this.setCollapsed(false);}},handleUploadError:function(ca){var da=this.getAttachment(ca);this.updateAttachment({id:ca,state:'error',request:da.request});},handleUploadProgress:function(ca,da){var ea=this.getAttachment(ca);this.updateAttachment({id:ca,state:ea.state,request:ea.request,loaded:da.loaded,totalSize:da.totalSize});},handleUploadSuccess:function(ca,da){if(!da.fbid){this.handleUploadError(ca);return;}var ea=this.getAttachment(ca);this.updateAttachment({id:ca,state:'uploaded',fbid:da.fbid,imageURI:da.thumbnail_uri,thumbnail_width:da.thumbnail_width,thumbnail_height:da.thumbnail_height,loaded:ea.loaded,totalSize:ea.totalSize,previewURI:da.preview_uri});this.props.onUploadSuccess&&this.props.onUploadSuccess(da.fbid,ca);},onPlusClick:function(event){this.props.fileInput.click(event);},onRemoveClick:function(ca){var da=this.getAttachment(ca),ea=false;if(da.state===r.SENDING||da.state===r.ERROR)ea=confirm("This photo didn't upload. Do you want to try again?");if(ea){this.retryAttachment(ca);}else this.removeAttachment(ca);},componentWillUpdate:function(){if(this.props.shouldScroll&&this.refs&&this.refs.scroller)this.refs.scroller.checkShouldScrollToEnd();},componentDidUpdate:function(){var ca=this.state.attachments.filter(function(da){return da.state===r.UPLOADED;}).map(function(da){return da.fbid;});l.render(l.createElement(v,{fbids:ca}),this.props.formHiddenInputs);if(this.props.shouldScroll&&this.refs&&this.refs.scroller){this.refs.scroller.resizeScroller();this.refs.scroller.scrollHorizontallyToEnd();}},getPlusAttachment:function(){if(this.props.singlePhoto&&this.state.collapsed)return null;if(this.isMaxAttachmentReached())return null;return (l.createElement(u,{onClick:this.onPlusClick,largeThumbnails:this.props.shouldShowLargeThumbnails,shouldShowWhiteDesign:this.props.shouldShowWhiteDesign,shouldShowAddPhotoLabel:this.props.shouldShowAddPhotoLabel}));},adjustScroller:function(){if(this.props.shouldScroll&&this.refs&&this.refs.scroller){this.refs.scroller.checkShouldScrollToEnd();this.refs.scroller.resizeScroller();this.refs.scroller.scrollHorizontallyToEnd();}},render:function(){if(this.state.collapsed)return l.createElement("div",null);var ca=this.state.attachments.map(function(ea){var fa=this.props.shouldShowLargeThumbnails?z:aa;return (l.createElement(q,l.__spread({},ea,{key:ea.id,shouldShowLargeThumbnails:this.props.shouldShowLargeThumbnails,previewSize:fa,shouldShowWhiteDesign:this.props.shouldShowWhiteDesign,onRemoveClick:function(){this.onRemoveClick(ea.id);}.bind(this),onPreviewLoaded:function(){this.adjustScroller();}.bind(this),loaded:ea.loaded,totalSize:ea.totalSize,onThumbnailClicked:function(){this.props.onThumbnailClicked&&this.props.onThumbnailClicked(ea);}.bind(this)})));}.bind(this));if(this.props.shouldScroll){var da=((!this.props.shouldShowLargeThumbnails?"_1upb":'')+(' '+"_xy")+(this.props.showDropShadow?' '+"_bgx":''));return (l.createElement(o,{options:{scrollingY:false},className:da,thumbnailSize:z,ref:"scroller"},ca,this.getPlusAttachment()));}return (l.createElement("div",{className:"_5cqb"},ca,this.getPlusAttachment()));},getWaterfallID:function(){return this.props.waterfallID;},getWaterfallAppName:function(){return this.props.waterfallAppName;},getWaterfallSource:function(){return this.props.waterfallSource;}});e.exports=ba;},null);
__d("MMultiPhotoUploaderInitReact",["$","MMultiPhotoUploaderAttachmentState","DOM","React","Stratcom","StratcomManager","MMultiPhotoUploader.react","MPhotoUploadFileInput","URI","PUWSteps"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(r){"use strict";var s=document.createElement('div');i.insertBefore(g(r.previewGridId),s);var t=document.createElement('div');i.appendContent(g(r.targetFormId),t);var u=(j.createElement(m,{fileInput:new n(g(r.inputId)),formHiddenInputs:t,uploadDomain:new o(r.uploadDomain),dtsg:r.dtsg,shouldResize:r.shouldResize,singlePhoto:+r.maxPhotosAllowed===1,maxPhotosAllowed:r.maxPhotosAllowed,waterfallID:r.waterfallID,waterfallAppName:r.waterfallAppName,waterfallSource:r.waterfallSource,initCollapsed:r.initCollapsed,logFlowBeginOnClick:r.logFlowBeginOnClick,targetID:r.targetID,actorID:r.actorID,shouldScroll:r.horizontalScrolling,shouldShowLargeThumbnails:r.largeThumbnails,shouldShowWhiteDesign:r.useWhiteDesign,shouldShowAddPhotoLabel:r.showPhotoLabel,showDropShadow:r.composerDropShadow,disableIOS8SafariAlert:r.disableIOS8SafariAlert}));this.$MMultiPhotoUploaderInitReact0=j.render(u,s);l.enableDispatch(window,'reset');k.listen('reset',['id:'+r.targetFormId],function(){this.resetState();}.bind(this));k.listen('MStructuredComposer-canceled',null,function(){if(!this.$MMultiPhotoUploaderInitReact0.isCollapsed())this.$MMultiPhotoUploaderInitReact0.logStep(p.CLIENT_FLOW_CANCEL,{volume:this.$MMultiPhotoUploaderInitReact0.getAttachmentCount()});}.bind(this));}q.prototype.logClientPost=function(r){"use strict";this.$MMultiPhotoUploaderInitReact0.logStep(p.CLIENT_FLOW_POST,{volume:this.$MMultiPhotoUploaderInitReact0.getAttachmentCount()},r);};q.prototype.alterPreviewGrid=function(r){"use strict";return this.$MMultiPhotoUploaderInitReact0.setCollapsed(!r);};q.prototype.getUploader=function(){"use strict";return this.$MMultiPhotoUploaderInitReact0;};q.prototype.resetState=function(){"use strict";this.$MMultiPhotoUploaderInitReact0.clearAttachments();return this.alterPreviewGrid(false);};q.prototype.hasPhotos=function(){"use strict";return this.$MMultiPhotoUploaderInitReact0.numAttachmentsWithState(h.UPLOADED)>0;};q.prototype.getPhotosCount=function(){"use strict";return this.$MMultiPhotoUploaderInitReact0.numAttachmentsWithState(h.UPLOADED);};q.prototype.uploadPhotos=function(r){"use strict";this.$MMultiPhotoUploaderInitReact0.uploadPhotos(r);};e.exports=q;},null);