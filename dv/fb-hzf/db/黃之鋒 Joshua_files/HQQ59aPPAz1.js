/*!CK:3102664067!*//*1415719568,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["eN\/wO"]); }

__d("MFeedErrorDetection",["Banzai"],function(a,b,c,d,e,f,g){var h={};function i(event,k,l,m){var n={event:event,shouldLogDetail:k,site:'mtouch'};if(k){n.intValues=l;n.normalValues=m;}g.post('feed_error_detection',n,{delay:0});}var j={registerFeedStories:function(k,l){var m=k.childNodes;for(var n=0;n<m.length;n++){var o=m[n],p=o.childNodes[0],q=p.getAttribute('data-dedupekey'),r=o.getAttribute('data-ft');if(!q||!r)continue;if(q in h){var s={};if(l)s={dedupKey:q,ft_A:r,ft_B:h[q]};i('mtouch_duplicate_stories',l,{},{dup_field:s});}else h[q]=r;}}};e.exports=j;},null);
__d("MCurationFooter",["CSS","DOM","MLoadingIndicator","MPageController","SaveState","SaveStateHandler","cx","destroyOnUnload","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p="_3n7c",q="_3n7d";function r(s,t,u,v,w){"use strict";var x=o(v);l.listen(u,function(z){switch(z){case k.SAVING:g.addClass(x,p);this.$MCurationFooter0=true;break;case k.SAVED:if(this.$MCurationFooter1){j.load(w);g.removeClass(s,q);this.$MCurationFooter1=false;}this.$MCurationFooter0=false;break;case k.UNSAVING:g.removeClass(x,p);break;case k.UNSAVED:g.removeClass(x,p);break;}}.bind(this));var y=h.listen(s,'click',null,function(){if(this.$MCurationFooter0){this.$MCurationFooter1=true;g.addClass(s,q);i.init(t);}else j.load(w);}.bind(this));n(function(){y.remove();});}e.exports=r;},null);
__d("MShareAngoraAttachment",["Stratcom"],function(a,b,c,d,e,f,g){var h=false,i=function(j){if(h)return;h=true;window.addEventListener('error',function(event){if(event.target.nodeName=='IMG'){for(var k=event.target;k!=document.body&&!g.hasSigil(k,'shareAngoraAttachmentMedia');k=k.parentNode);if(k!=document.body)k.style.display='none';}},true);};f.registerDeadImageListener=i;},null);
__d("MSeeTranslation",["cx","CSS","DOM","fbt","Stratcom","Locale","MRequest","XIntlSeeTranslationControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o='m-see-translate-link',p=false;function q(s){var t=s.getNode(o),u=t.getAttribute('data-ftid'),v=new n().setString('ftid',u).getURI(),w=new m(v);w.listen('done',function(x){var y=x.payload.text||"\u76ee\u524d\u6ca1\u6709\u7ffb\u8bd1",z=i.create('div',{className:"_5yi4"},y);h.addClass(z,l.isRTL()?"_55d6":"_55d7");i.replace(t,z);});w.send();s.prevent();}var r={listenOnSeeTranslate:function(){if(p)return;k.listen('click',o,q);p=true;}};e.exports=r;},null);
__d("MMoreItemAutomatic",["MPageCache","MPageControllerPath","MRequest","MRequestTypes","MResponseData","MStopNGo","MURI","MViewport","Stratcom","Vector","copyProperties","createDeprecatedProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(t){"use strict";this._href=t.href;this._proximityPages=t.proximity_pages||7;this._loggerID=t.logger_id;this._loggerName=t.logger_name;this._loadImmediately=t.load_first_immediately;var u=document.getElementById(t.id);if(u){this._verticalOffset=p.getPos(u).y;this.setMoreItem(u);this.setPersistOnReload(t.persist_on_reload);this._setUpSendRequest();}else this.uninstall();}s.prototype.isElementVisible=function(){"use strict";if(!this._isElementRendered())return false;var t,u=this.getMoreItem();if('getBoundingClientRect' in u){var v=u.getBoundingClientRect(),w=v.width/10,x=v.height/10,y=v.left,z=v.right,aa=v.top,ba=v.bottom,ca;while(ca!==u&&y<=z&&aa<=ba){y+=w;aa+=x;ca=document.elementFromPoint(Math.round(y),Math.round(aa));}t=ca===u;}else{var da=p.getPos(u).y,ea=da+p.getDim(u).y,fa=n.getScrollTop(),ga=fa+n.getUseableHeight();t=da<=ga&&ea>=fa;}return t;};s.prototype._checkScrolledIntoFetched=function(){"use strict";var t=this.getMoreItem();if(t)if(this._verticalOffset-n.getScrollTop()<0){o.invoke('m:more_item_automatic:items_visible',this._loggerID);this.uninstall();}};s.prototype._onGo=function(){"use strict";if(!this._itemsLoaded){this._readyToUpdate=true;if(this.isElementVisible())o.invoke('m:more_item_automatic:spinner_visible',this._loggerID);if(!this._requestSent){this._sendRequestIfScrolledDown();}else this._updateItems();}else this._checkScrolledIntoFetched();};s.prototype._onStop=function(){"use strict";if(!this._itemsLoaded)this._readyToUpdate=false;};s.prototype._onAjaxPageLoad=function(){"use strict";if(!this._requestSent&&(this._loadImmediately||this.isElementVisible())){this._sendRequest();this._loadImmediately=false;}};s.prototype._setUpSendRequest=function(){"use strict";if(!this._requestSent&&(this._loadImmediately||this.isElementVisible())){this._sendRequest();this._loadImmediately=false;}this._listeners=[l.listen('go',this._onGo.bind(this)),l.listen('stop',this._onStop.bind(this)),o.listen('m:ajax:complete',null,this._onAjaxPageLoad.bind(this))];};s.prototype._existsOnPage=function(){"use strict";var t=this.getMoreItem();return t?document.documentElement.contains(t):false;};s.prototype.uninstall=function(){"use strict";while(this._listeners&&this._listeners.length)this._listeners.pop().remove();this._requestSent=false;this._prefetchResponse=null;this.setMoreItem(null);this.setPersistOnReload(false);};s.prototype.withinProximity=function(){"use strict";var t=this.getMoreItem();return t&&p.getPos(t).y-n.getScrollTop()<n.getUseableHeight()*(1+this._proximityPages);};s.prototype._updateItems=function(){"use strict";if(this._prefetchResponse){if(this._existsOnPage()){this._prefetchResponse.process();g.addCachedIUIResponse(h.getRequestPath(),this._prefetchResponse);}o.invoke('m:more_item_automatic:items_loaded',this._loggerID);this._itemsLoaded=true;}};s.prototype._isElementRendered=function(){"use strict";var t=this.getMoreItem();if(!t||!t.offsetHeight)return false;return true;};s.prototype._sendRequestIfScrolledDown=function(){"use strict";if(this.isElementVisible()||(this._isElementRendered()&&n.getScrollTop()>100&&this.withinProximity()))this._sendRequest();};s.prototype._sendRequest=function(){"use strict";var t=new i(new m(this._href).setAsync(true).toString()).setType(j.DEPENDENT);t.setAutoProcess(false);var u=[],v=false,w=function(){if(!v&&u.length){v=true;u.shift().process();}};t.listen('response',function(x){x=new k(x);x.listen('complete',function(){v=false;w();});if(x.isPagelet()){u.push(x);w();return;}v=true;this._prefetchResponse=x;if(this._readyToUpdate)this._updateItems();}.bind(this));t.send();this._requestSent=true;};r(s,{moreItem:null,persistOnReload:false});q(s.prototype,{_requestSent:false,_readyToUpdate:true,_moreStartTime:0,_moreLogged:false,_proximityPages:null,_prefetchResponse:null,_listeners:null,_href:null,_loggerName:null,_loggerID:null,_itemsLoaded:false,_verticalOffset:0});q(s,{TRY_AGAIN_DELAY:1500});e.exports=s;},null);
__d("InitMMoreItemAutomatic",["MMoreItemAutomatic","Stratcom"],function(a,b,c,d,e,f,g,h){var i,j=function(k){if(!i){i={};h.listen('m:page:loading',null,function(m){for(var n in i)if(!i[n].getPersistOnReload()){i[n].uninstall();delete i[n];}});}var l=k.id;if(i[l])i[l].uninstall();i[l]=new g(k);};f.main=j;},null);
__d("MMoreItemAutomaticLogger",["Stratcom","MarauderLogger","copyProperties"],function(a,b,c,d,e,f,g,h,i){function j(k,l){this._loggerName=k;this._loggerID=l;this._listeners=[g.listen('m:page:unload',null,this._pageUnload.bind(this)),g.listen('m:more_item_automatic:spinner_visible',null,this._onSpinnerVisible.bind(this)),g.listen('m:more_item_automatic:items_loaded',null,this._onItemsLoaded.bind(this)),g.listen('m:more_item_automatic:items_visible',null,this._onItemsVisible.bind(this))];}i(j.prototype,{_loggerName:'',_loggerID:'',_spinnerUnloaded:false,_spinnerVisible:false,_spinnerStartTime:null,_cleanup:function(){while(this._listeners&&this._listeners.length)this._listeners.pop().remove();},_pageUnload:function(){if(this._spinnerVisible){this._spinnerUnloaded=true;this._logLoadingSpinnerTime(this._getTimeSpan(),true);}this._cleanup();},_onSpinnerVisible:function(event){if(event.getPath()[0]===this._loggerID&&!this._spinnerVisible){this._spinnerVisible=true;this._spinnerStartTime=Date.now();}},_onItemsLoaded:function(event){if(event.getPath()[0]===this._loggerID&&!this._spinnerUnloaded){this._logLoadingSpinnerTime(this._getTimeSpan(),false);this._spinnerVisible=false;this._spinnerStartTime=null;}},_onItemsVisible:function(event){if(event.getPath()[0]===this._loggerID)this._logItemsVisible();},_getTimeSpan:function(){return this._spinnerVisible?Date.now()-this._spinnerStartTime:0;},_logLoadingSpinnerTime:function(k,l){h.log('m_more_items_automatic_spinner_visible_time',undefined,{name:this._loggerName,id:this._loggerID,visible_time:k,spinner_unloaded:l});},_logItemsVisible:function(){h.log('m_more_items_automatic_fetched_items_visible',undefined,{name:this._loggerName,id:this._loggerID});this._cleanup();}});j.init=function(k,l){new j(k,l);};e.exports=j;},null);
__d("MScrollAreaHelper",["DataStore"],function(a,b,c,d,e,f,g){function h(i,j){j=j||10;var k;while(j>0&&i&&i.nodeType===1){k=g.get(i);if(k&&k.scrollArea)return k.scrollArea;i=i.parentNode;j--;}return null;}f.findScrollArea=h;},null);