/*!CK:3380808090!*//*1405325409,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["327Ti"]); }

__d("binarySearch",[],function(a,b,c,d,e,f){function g(h,i){var j=0,k=h.length-1;while(j<=k){var l=Math.floor((k+j)/2),m=i(h[l],l);if(m===0)return l;if(m>0){k=l-1;}else j=l+1;}return -1;}e.exports=g;},null);
__d("MProgressivePhotoLoad",["$"],function(a,b,c,d,e,f,g){var h=function(i){function j(m,n){var o=new Image();o.onerror=l.bind(null,o);o.onload=k.bind(null,m,o);o.src=n;}function k(m,n){var o=n.src;m.style.backgroundImage='url('+o+')';l(n);}function l(m){m.onload=null;m.onerror=null;}if(i.newSrc)j(g(i.id),i.newSrc);};f.main=h;},null);
__d("MHideOutsideViewportManager",["setTimeoutAcrossTransitions","CSS","DataStore","DOM","Stratcom","binarySearch","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){"use strict";this.resetElements();this.$MHideOutsideViewportManager0=[];this.$MHideOutsideViewportManager1=[];}n.prototype.dispose=function(){"use strict";this.clearElementsToDraw();this.$MHideOutsideViewportManager1=[];this.$MHideOutsideViewportManager2=null;};n.prototype.resetElements=function(){"use strict";this.$MHideOutsideViewportManager2=j.scry(document.body,'div',n.SIGIL);this.$MHideOutsideViewportManager2=this.$MHideOutsideViewportManager2.filter(function(p){return p.getBoundingClientRect().height>0;});this.$MHideOutsideViewportManager2.sort(function(p,q){return p.getBoundingClientRect().top-q.getBoundingClientRect().top;});if(!this.hasReachedThreshold())for(var o=0;o<this.$MHideOutsideViewportManager2.length;o++)this.$MHideOutsideViewportManager3(this.$MHideOutsideViewportManager2[o],false);};n.prototype.clearElementsToDraw=function(){"use strict";this.$MHideOutsideViewportManager0=[];clearTimeout(this.$MHideOutsideViewportManager4);this.$MHideOutsideViewportManager4=null;};n.prototype.hasReachedThreshold=function(){"use strict";return this.$MHideOutsideViewportManager2.length>=n.THRESHOLD;};n.prototype.$MHideOutsideViewportManager5=function(o){"use strict";var p=o.getBoundingClientRect();if(p.top>window.innerHeight+n.BUFFER*1.5)return 1;if(p.bottom<-n.BUFFER*.5)return -1;return 0;};n.prototype.$MHideOutsideViewportManager6=function(o,p,q){"use strict";var r=true;for(var s=o;s!==q;s+=p){var t=this.$MHideOutsideViewportManager2[s],u=i.get(t),v=u.hiddenArea,w=u.alwaysShow;if((r&&this.$MHideOutsideViewportManager5(t)===0)||w){if(v||v===undefined)this.$MHideOutsideViewportManager0.push(t);}else{r=false;if(!v)this.$MHideOutsideViewportManager1.push(t);}}};n.prototype.$MHideOutsideViewportManager7=function(o,p){"use strict";var q=p.getBoundingClientRect();return Math.abs(o-(q.top+q.height/2));};n.prototype.$MHideOutsideViewportManager8=function(o,p){"use strict";return o.distance-p.distance;};n.prototype.showElementsInViewport=function(){"use strict";var o=l(this.$MHideOutsideViewportManager2,this.$MHideOutsideViewportManager5);this.$MHideOutsideViewportManager0=[];this.$MHideOutsideViewportManager1=[];if(o>-1){this.$MHideOutsideViewportManager0.push(this.$MHideOutsideViewportManager2[o]);this.$MHideOutsideViewportManager6(o-1,-1,-1);this.$MHideOutsideViewportManager6(o+1,1,this.$MHideOutsideViewportManager2.length);}else this.$MHideOutsideViewportManager6(0,1,this.$MHideOutsideViewportManager2.length);if(this.$MHideOutsideViewportManager0){var p=window.innerHeight/2,q=this.$MHideOutsideViewportManager0.map(function(s){return {element:s,distance:this.$MHideOutsideViewportManager7(p,s)};},this);q=q.sort(this.$MHideOutsideViewportManager8);this.$MHideOutsideViewportManager0=q.map(function(s){return s.element;});}var r=[];this.$MHideOutsideViewportManager1.forEach(function(s){r.push(s.getBoundingClientRect());});this.$MHideOutsideViewportManager1.forEach(function(s,t){this.$MHideOutsideViewportManagera(s,r[t]);},this);this.$MHideOutsideViewportManager4=g(this.$MHideOutsideViewportManagerb.bind(this),n.DRAW_TIMER_DELAY);};n.prototype.$MHideOutsideViewportManagerb=function(){"use strict";clearTimeout(this.$MHideOutsideViewportManager4);if(this.$MHideOutsideViewportManager0.length){this.$MHideOutsideViewportManagerc(this.$MHideOutsideViewportManager0.shift());this.$MHideOutsideViewportManager4=g(this.$MHideOutsideViewportManagerb.bind(this),n.DRAW_TIMER_DELAY);}};n.prototype.$MHideOutsideViewportManager3=function(o,p){"use strict";var q=this.$MHideOutsideViewportManagerd(o);if(q){h.conditionClass(q,'hideoutOutside',p);if(!n.disableAcceleration)h.conditionClass(q,'accelerate',!p);}};n.prototype.$MHideOutsideViewportManagerc=function(o){"use strict";var p=o.style,q=o.children;this.$MHideOutsideViewportManager3(o,false);for(var r=0,s=q.length;r<s;r++)q[r].style.display='';p.height='';p.width='';i.get(o).hiddenArea=false;k.invoke('m:hideout:reflow');};n.prototype.$MHideOutsideViewportManagerd=function(o){"use strict";while(o&&(' '+o.className+' ').indexOf(' accelerateContainer ')===-1)o=o.parentNode;return o;};n.prototype.$MHideOutsideViewportManagera=function(o,p){"use strict";var q=o.style;i.get(o).hiddenArea=true;var r,s,t,u;q.height=p.height+'px';q.width=p.width+'px';var v=o.children;for(var w=0,x=v.length;w<x;w++)v[w].style.display='none';this.$MHideOutsideViewportManager3(o,true);};n.setOptions=function(o){"use strict";var p=n;p.BUFFER=o.buffer||p.BUFFER;p.THRESHOLD=o.threshold||p.THRESHOLD;p.disableAcceleration=o.disable_acceleration;};m(n,{DRAW_TIMER_DELAY:0,BUFFER:6000,THRESHOLD:90,DEBUG_SCROLL:true,SIGIL:'m-hide-outside',disableAcceleration:false});m(n.prototype,{_elements:null,_arrToVisible:null,_arrToHidden:null,_drawTimer:null});e.exports=n;},null);
__d("MTimelineHideOutsideViewportManager",["setTimeoutAcrossTransitions","MHideOutsideViewportManager","MStopNGo","Stratcom"],function(a,b,c,d,e,f,g,h,i,j){var k,l=function(m){if(k){j.invoke('m-hide-outside-viewport:update-items');return;}k=true;if(!document.body.getBoundingClientRect)return;h.setOptions(m);var n=200,o,p,q=[],r=new h(),s=false,t=function(){if(s||!r)return;r.resetElements();v();z();},u=r.showElementsInViewport.bind(r),v=function(da){if(!r.hasReachedThreshold())return;clearTimeout(o);r.clearElementsToDraw();o=g(u,n);},w=function(da){clearTimeout(o);if(!r.hasReachedThreshold())return;r.clearElementsToDraw();},x=function(){if(!k)return;while(q.length)q.pop().remove();s=false;clearTimeout(o);clearTimeout(p);q=null;y=null;r.dispose();r=null;k=false;},y,z=function(){if(!r.hasReachedThreshold()||y)return;y=true;q.push(i.listen('stop',w),i.listen('go',v));};function aa(){p=g(t,0);}function ba(){s=true;r.clearElementsToDraw();}function ca(){s=false;t();}aa();q.push(j.listen('m:page:unload',null,x),j.listen(['m-timeline-section-loader:onshow','m-timeline-two-column-layout:rebalance-complete','m-hide-outside-viewport:update-items','m:schedulable:loaded'],null,aa),j.listen('m-timeline-hide-outside:resume',null,ca),j.listen('m-timeline-hide-outside:hold',null,ba));};f.main=l;},null);
__d("MTimelineUnit",["setTimeoutAcrossTransitions","$","CSS","DOM"],function(a,b,c,d,e,f,g,h,i,j){var k={hideByID:function(l){j.hide(h(l));},hideOffScreen:function(l,m){i.conditionClass(l,'deleting',true);g(i.conditionClass.bind(null,l,'deleted',true),0);if(m)l.addEventListener('webkitTransitionEnd',function(n){l.removeEventListener(n.type,arguments.callee,true);m(l);},true);},unhideOffScreen:function(l){j.show(l);g(i.conditionClass.bind(null,l,'deleted',false),0);}};e.exports=k;},null);
__d("MUnitFlyout",["$","CSS","DOM","DataStore","MParent","MActionBubbleHelper","Stratcom","MTimelineUnit"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p={};function q(r){if(o)return;o=r;var s,t='m-unit-popup-opener',u='hidesUnit',v='deletesUnit',w='reportComponentUnit',x='reportUnit',y='action-title',z='action-subtitle';function aa(){var ja=k.bySigil(o.getCausalElement(),t),ka=j.get(ja),la=g(ka.target);h.conditionClass(la,'editing',true);var ma=o.getRoot(),na=ka.editOptions,oa=i.scry(ha,'a');oa.forEach(function(qa){l.toggleActionBubbleItem(qa,false);});for(var pa in na){if(na[pa].rel==='dialog'){ca(ma,pa,na[pa].uri);}else ba(ma,pa,na[pa].uri);da(ma,pa,na[pa].label,na[pa].subtitle,na[pa].icon);}s=la;}function ba(ja,ka,la){var ma=i.find(ja,'a',ka);ma.href=la;ma.removeAttribute('rel');m.removeSigil(ma,'dialog-link');l.toggleActionBubbleItem(ma,!!la);}function ca(ja,ka,la){var ma=i.find(ja,'a',ka),na=j.get(ma);na.dialogURI=la;ma.setAttribute('rel','dialog');m.addSigil(ma,'dialog-link');l.toggleActionBubbleItem(ma,!!la);}function da(ja,ka,la,ma,na){var oa=i.find(ja,'a',ka);if(la){var pa=i.find(oa,'div',y);if(pa)pa.textContent=la;}if(ma){var qa=i.find(oa,'div',z);if(qa)qa.textContent=ma;}if(na){var ra=i.find(oa,'i');ra&&i.replace(ra,na);}}function ea(){if(s){h.conditionClass(s,'editing',false);s=null;}}function fa(event){var ja=event.getNode(u)||event.getNode(v);if(ja){var ka=s;if(m.hasSigil(ka,w)){var la=k.bySigil(ka,x),ma=i.scry(la,'*',w);if(ma.length<2)ka=la;}var na=event.getNode(v)?i.remove.bind(i,ka):null;n.hideOffScreen(ka,na);}o.hide();}function ga(){o&&o.updateIfShown();}var ha=r.getRoot(),ia=[m.listen('m:page:unload',null,function(){while(ia&&ia.length>0)ia.pop().remove();o=null;s=null;ha=null;p={};}),m.listen(['m-timeline-rebalance','m-timeline-section-loader:onshow'],null,ga),r.addListener('beforeshow',aa),r.addListener('hide',ea),i.listen(ha,'click',null,fa)];}f.main=q;},null);
__d("MOrientationResize",["setTimeoutAcrossTransitions","DOM","DataStore","MParent","Stratcom","Vector"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m,n=function(o){var p='orientation-resizable',q='content-pane';if(m){r(o.id);return;}m=true;function r(ga){var ha=document.getElementById(ga);ha&&aa([{root:j.bySigil(ha,q),elements:[ha]}]);}function s(ga,ha){var ia=ha.padding||0,ja=ha.aspectRatio||1,ka=ha.widthRatio||1,la=ha.containerAspectRatio,ma=ga*ka-ia;if(!la){var na=ma,oa=Math.floor(ma/ja);}else{var pa=ma,qa=pa/la,ra=pa/qa,sa=ja,ta=sa/ra;if(ta>1){na=pa;oa=1/ta*qa;}else{na=ta*pa;oa=qa;}}return new l(na,oa);}function t(ga,ha){var ia=ha.aspectRatio||1,ja=ha.columnCount||1,ka=ha.gridPadding||0,la=ha.photoMargin||0,ma=ga-ka-(ja-1)*la,na=Math.floor(ma/ja),oa=Math.ceil(na/ia);return new l(na,oa);}function u(ga,ha){var ia=ha.aspectRatio||1,ja=ha.widthRatio||1,ka=ha.padding||0,la=ga*ja,ma=la/ia;return new l(Math.round(la)-ka,Math.floor(ma)-ka);}function v(ga){var ha=ga.getData(),ia=h.scry(ha,'*',p);ia&&aa([{root:j.bySigil(ha,q),elements:ia}]);}var w,x;function y(){x++;var ga=false,ha=h.scry(document,'*',q);if(ha&&ha.length){var ia=[];for(var ja=0;ja<ha.length;ja++){var ka=ha[ja],la=ka.offsetWidth,ma=i.get(ka),na=ma&&ma.offsetWidth;if(la!==na){i.set(ka,{offsetWidth:la});ga=true;ia.push({root:ka,elements:h.scry(ka,'*',p)});}}if(ia.length)aa(ia);}if(x<3)w=g(y,500);if(ga)k.invoke('m:orientation-resize:complete');}function z(){x=0;clearTimeout(w);y();}function aa(ga){var ha=[];for(var ia=0;ia<ga.length;ia++){var ja=ga[ia].root,ka=ga[ia].elements;if(!ja||!ka)continue;var la=ja.offsetWidth;if(la===0)continue;for(var ma=0;ma<ka.length;ma++){var na=ka[ma],oa=i.get(na),pa=null,qa;switch(oa.mode){case 'scale-photo-attachment':pa=s(la,oa);break;case 'scale-photo-relative-item':pa=u(la-oa.outerPadding,oa);break;case 'scale-photo-grid-item':pa=t(la,oa);break;case 'resize-to-unit':pa=ba(la,na,oa);break;case 'resize-feed-2-photos-attachment':qa=ea(la,na,oa);ha=ha.concat(qa);continue;case 'resize-feed-3-photos-attachment':qa=fa(la,na,oa);ha=ha.concat(qa);continue;default:continue;}ha.push({node:na,width:pa.x,height:pa.y});}}ha.forEach(function(ra){if(!ra||!ra.node)return;ra.node.style.width=ra.width+'px';ra.node.style.height=ra.height+'px';});}function ba(ga,ha,ia){var ja=ia.padding||0,ka=ia.aspectRatio||1,la=ia.widthRatio||1,ma=ca(ha),na=ma?l.getDim(ma).x:ga,oa=na*la-ja,pa=Math.floor(oa/ka);return new l(oa,pa);}function ca(ga){while(ga&&ga!=document){if(k.hasSigil(ga,'orientation-resize-parent'))return ga;ga=ga.parentNode;}return null;}function da(ga,ha){var ia=ha==='P'?4/3:3/4;return Math.floor(ga*ia);}function ea(ga,ha,ia){var ja=ia.orient,ka=ga-ia.spacing,la,ma,na;if(ja==='PL'||ja==='LP'){var oa=Math.round(ka*ia.fraction),pa=ka-oa;na=da(oa,'L');if(ja==='PL'){la=pa;ma=oa;}else{la=oa;ma=pa;}}else{la=Math.round(ka/2);ma=ka-la;na=da(la,ja[0]);}var qa=h.scry(ha,'*','photoleft')[0],ra=h.scry(ha,'*','photoright')[0],sa=[];if(qa)sa.push({node:qa,width:la,height:na});if(ra)sa.push({node:ra,width:ma,height:na});return sa;}function fa(ga,ha,ia){var ja=ga-ia.spacing,ka=Math.round(ja*ia.fraction),la=ja-ka,ma=da(ka,ia.orient),na=Math.floor(ma/2)-ia.margin,oa=ma-na-ia.margin;return [{node:h.find(ha,'*','mainphoto'),width:ka,height:ma},{node:h.find(ha,'*','topphoto'),width:la,height:na},{node:h.find(ha,'*','bottomphoto'),width:la,height:oa}];}if(o.id)r(o.id);k.listen(['m:viewport:orientation-change','m:page:render:complete','m:page:render:cache:complete','m:ajax:complete','m:plugin:resize'],null,z);k.listen(['m:timeline:unit:resize','m-timeline-two-column-layout:pre-section-balance'],null,v);};f.main=n;},null);
__d("MInViewportManager",["setTimeoutAcrossTransitions","DataStore","MStopNGo","Stratcom","MViewport","Vector"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=[],n=[],o=false,p=0,q=300,r='in-viewport-height';function s(fa,ga,ha,ia){if(ia===undefined)ia=true;if(ia&&x(fa,ha)){ga(fa);return;}v();y(fa,ga,ha);}function t(fa,ga,ha){s(fa,ga,0,ha);}function u(){var fa=m;m=[];fa.some(function(ga){y(ga.elem,ga.callback,ga.buffer);});}function v(){if(!o){n.push(j.listen('m:page:unload',null,ea),i.listen('stop',ba),i.listen('go',ca));o=true;}}var w=function(fa){if(fa.getBoundingClientRect){w=function(ga){return ga.getBoundingClientRect();};}else w=function(ga){var ha=k.getScrollTop(),ia=l.getDim(ga).y,ja=l.getPos(ga).y-ha;return {top:ja,bottom:ja+ia};};return w(fa);};function x(fa,ga){var ha=w(fa),ia=h.get(fa)[r],ja=k.getUseableHeight(),ka,la;if(ia){ka=ha.top+ia<=ja;la=ha.bottom-ia>=0;}else{ka=ha.top>=0;la=(ha.bottom-ga)<=ja;}return document.documentElement.contains(fa)&&ka&&la;}function y(fa,ga,ha){var ia=w(fa).top-ha,ja=0;for(var ka=0;ka<=m.length;ka++){ja=ka;if(ka===m.length)break;var la=m[ka].elem;if(ia<w(la).top)break;}m.splice(ja,0,{elem:fa,callback:ga,buffer:ha});}function z(){var fa=m.length;if(fa===0){clearTimeout(p);return;}var ga=m[0].elem,ha=m[0].buffer;if(w(ga).top-ha>k.getUseableHeight())return;var ia=m[fa-1].elem;if(w(ia).bottom<0)return;m.some(function(ja){if(x(ja.elem,ja.buffer)){p=g(aa.bind(null,ja.elem,ja.callback,ja.buffer),0);return true;}return false;});}function aa(fa,ga,ha){if(x(fa,ha)){m=m.filter(function(ia){return ia.elem!=fa;});ga(fa);}clearTimeout(p);da(z);}function ba(){clearTimeout(p);}function ca(fa){clearTimeout(p);if(m.length===0)return;da(z);}function da(fa){p=g(fa,q);}function ea(){while(n.length)n.pop().remove();clearTimeout(p);m=[];o=false;}f.invalidateElementOrder=u;f.watch=t;f.watchWithBuffer=s;f.isInViewport=x;},null);