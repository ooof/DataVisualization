/*!CK:3515656011!*//*1415720457,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["c3+pu"]); }

__d("MTimelineSectionLoader",["setTimeoutAcrossTransitions","$","CSS","DOM","DataStore","MRequest","Stratcom","MAjaxify","MInViewportManager","MParent","MViewport","Vector"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=false,t={initialized:false,sections_to_load_count:0,listeners:[],deleting_timers:[],SECTION_SIGIL:'timeline-section',HIDDEN_CONTENT_SIGIL:'hidden-content',UNIT_CONTAINER_SIGIL:'unit-container',UNIT_SIGIL:'tlUnit',SECTION_LABEL_SIGIL:'timeline-label',SECTION_LOADER_SIGIL:'section-loader',SECTION_LOADER_BUTTON_SIGIL:'section-loader-button',SHOW_SPINNER_CLASS:'tl_elem_saving',SHOW_HEADER_CLASS:'loadedSectionContent',processNewlyLoadedSection:function(u){var v=h(u.section_content_id),w=t.getParentSection(v);if(w){t._onSectionAjaxComplete(w);t._loadSection(w,u);}},getParentSection:function(u){return p.bySigil(u,t.SECTION_SIGIL);},setAutoloadForever:function(u){s=u;},_initSections:function(){var u=j.scry(document.body,'div','timeline-section');t.sections_to_load_count=u.length;var v=false;for(var w=0;w<u.length;w++){var x=u[w],y=k.get(x);if(y._loaded||(' '+x.className+' ').indexOf(' loadedSection ')>-1){y._loaded=true;t.sections_to_load_count--;i.conditionClass(u[w],'loadedSection',true);var z=t._getSiblingSection(u,w,false);if(z)i.conditionClass(z,'nextSectionLoaded',true);var aa=t._getSiblingSection(u,w,true);if(aa)i.conditionClass(aa,'previousSectionLoaded',true);}if(!v)v=t._autoloadSection(x,false);}},init:function(){i.conditionClass(document.body,'tlBody',true);t._initSections();t.listeners.push(m.listen('m:onload',null,t._initSections),m.listen('click',t.SECTION_LOADER_BUTTON_SIGIL,t.ajaxSectionListener));t.initialized=true;m.invoke('m-timeline-section-loader:init');},cleanupOnUnload:function(){while(t.listeners.length)t.listeners.pop().remove();while(t.deleting_timers.length)clearTimeout(t.deleting_timers.pop());t.sections=null;t.initialized=false;i.conditionClass(document.body,'tlBody',false);},_loadSection:function(u,v){var w=k.get(u);if(!w._hidden)return;w._hidden=false;var x=j.scry(u,'*',t.HIDDEN_CONTENT_SIGIL)[0],y=null;if(v.subsection){var z=t._getSiblingSections(u);if(z[0])y=z[0];}else y=u;var aa=j.scry(x,'div',t.UNIT_SIGIL);if(!aa.length||!t.initialized){t._loadSectionHelper(x,u,y,v);}else o.watchWithBuffer(u,t._loadSectionHelper.bind(null,x,u,y,v),100);},_loadSectionHelper:function(u,v,w,x){var y=j.scry(u,'*',t.UNIT_SIGIL),z=null,aa=null;if(x.expand_inline){w=v;aa=v;j.insertBefore(v,y);j.remove(v);}else{do{z=u.nextSibling;}while(z&&z.getAttribute('data-sigil')!==t.SECTION_SIGIL);if(w)aa=j.scry(w,'*',t.UNIT_CONTAINER_SIGIL)[0];if(aa&&y.length){j.appendContent(aa,y);m.invoke('m-timeline-section-loader:onshow',null,j.uniqID(aa));}i.conditionClass(u,'sectionContentHidden',false);var ba=j.scry(v,'div',t.SECTION_LOADER_BUTTON_SIGIL)[0];if(ba){i.conditionClass(ba,'sectionLoaderButton',false);i.conditionClass(ba,t.SHOW_SPINNER_CLASS,false);}}var ca=false;if(z){if(!t._hasClass(z,'loadMoreSection'))v.parentNode.insertBefore(z,v.nextSibling);i.conditionClass(z,'sectionContentHidden',false);if(!y.length)ca=true;if(v!=w)j.remove(v);}else if(v!=w){if(y.length){j.remove(v);}else{var da=j.scry(aa,'div',t.UNIT_SIGIL);if(da.length){var ea=j.scry(v,'div',t.SECTION_LABEL_SIGIL)[1];if(ea)i.conditionClass(ea,'sectionContentHidden',false);t.deleting_timers.push(g(t._fadeoutSection.bind(null,v),1000));}w=v;}}else if(!x.expand_inline)if(!y.length)ca=true;if(ca||s)t._autoloadNextSection(w,ca);var fa=v.id+'_dependent',ga=j.scry(document.body,'div',fa);for(var ha=0;ha<ga.length;ha++)i.conditionClass(ga[ha],'sectionContentHidden',false);g((function(ia){t._initSections();m.invoke('m-timeline-rebalance');if(ia.length){var ja=ia[0],ka=r.getPos(ja),la=100,ma=q.getScrollPos().y+q.getUseableHeight(),na=ma-ka.y;if(na<la)q.scrollBy(0,la-na);}}).bind(null,y),50);m.invoke('m-timeline-section-loader:complete',null,null);},_autoloadNextSection:function(u,v){var w=t._getSiblingSections(u)[1];if(w)return t._autoloadSection(w,v);return false;},_autoloadSection:function(u,v){var w=null,x=j.scry(u,'div',t.SECTION_LOADER_SIGIL)[0];if(x&&(k.get(x).autoload||v))w=j.scry(u,'div',t.SECTION_LOADER_BUTTON_SIGIL)[0];if(w){t.ajaxSection(u);return true;}return false;},_fadeoutSection:function(u){o.watch(u,t._fadeoutSectionHelper);},_fadeoutSectionHelper:function(u){i.conditionClass(u,'sectionFading',true);t.deleting_timers.push(g(function(){u.style.opacity=.2;t.deleting_timers.push(g(function(){o.watch(u,function(){j.remove(u);t._initSections();});},1200));},0));},_onSectionAjaxComplete:function(u){var v=j.scry(u,'div',t.SECTION_LOADER_SIGIL)[0],w=k.get(u);w._ajaxified=true;if(v){var x=v.getAttribute('data-sigil').replace('touchable','');v.setAttribute('data-sigil',x);}w._loaded=true;w._hidden=true;},ajaxSectionListener:function(u){var v=u.getNode(t.SECTION_SIGIL);t.ajaxSection(v,u);},ajaxSection:function(u,v){var w=k.get(u);if(w._ajaxified)return;t._revealSection(u);var x=j.scry(u,'div',t.SECTION_LOADER_SIGIL)[0],y=k.get(x);i.conditionClass(x,t.SHOW_SPINNER_CLASS,true);n.ajaxify(v?v.getRawEvent():null,x,new l(y.href),null,{error:function(){i.conditionClass(x,t.SHOW_SPINNER_CLASS,false);if(s){var z=j.scry(document.body,'div','timeline-section');z.forEach(t._revealSection);s=false;}}});},_revealSection:function(u){var v=j.scry(u,'div',t.SECTION_LOADER_SIGIL)[0];v&&i.conditionClass(v,t.SHOW_HEADER_CLASS,true);},_getSiblingSections:function(u){var v=j.scry(document.body,'div','timeline-section'),w=v.indexOf(u);return [t._getSiblingSection(v,w,false),t._getSiblingSection(v,w,true)];},_getSiblingSection:function(u,v,w){if(v>=u.length||v<0)return null;var x=u[v];while(true){v+=w?1:-1;if(v>=u.length||v<0)break;if(u[v].parentNode===x.parentNode)return u[v];}return null;},_hasClass:function(u,v){return (' '+u.className+' ').indexOf(' '+v+' ')>-1;}};e.exports=t;},null);
__d("InitMTimelineSectionLoader",["MTimelineSectionLoader","Stratcom"],function(a,b,c,d,e,f,g,h){var i=false,j=function(k){if(k.section_content_id){g.processNewlyLoadedSection(k);return;}function l(){g.cleanupOnUnload();h.removeCurrentListener();i=false;}if(!i){g.init();h.listen('m:page:unload',null,l);i=true;}};f.main=j;},null);
__d("MTimelineActionBar",["DataStore","MarauderLogger","MParent","Stratcom","destroyOnUnload"],function(a,b,c,d,e,f,g,h,i,j,k){var l='hq-profile-logging-action-bar-button';function m(){"use strict";var n=j.listen('click',[l],m.$MTimelineActionBar0);k(function(){return n&&n.remove();});}m.$MTimelineActionBar0=function(n){"use strict";var o=n.getTarget(),p=i.bySigil(o,l);if(p===null)return;var q=g.get(p),r=q['hq-profile-logging'];h.log('profile_high_quality_action',undefined,r);};e.exports=m;},null);
__d("MTimelineContextClickLogging",["BanzaiLogger","DataStore","DOM","destroyOnUnload"],function(a,b,c,d,e,f,g,h,i,j){f.init=function(k){var l=i.listen(k,'click','context-item-link',function(m){var n=m.getNode('context-item-link');g.log('MTimelineXContextItemsLoggerConfig',h.get(n));});j(l.remove.bind(l));};},null);
__d("MTimelineExpandedContextLogging",["BanzaiLogger","DataStore","DOM","destroyOnUnload"],function(a,b,c,d,e,f,g,h,i,j){var k='TimelineExpandedContextLoggerConfig',l='expanded-context-log';f.init=function(m){var n=i.listen(m,'click',l,function(o){return g.log(k,h.get(o.getNode(l)));});j(function(){return n.remove();});};},null);
__d("MTimelineLandscapeCoverCrop",["setTimeoutAcrossTransitions","DOM","Stratcom","MViewport"],function(a,b,c,d,e,f,g,h,i,j){var k,l=function(m){if(k)return;k=true;function n(){var o=j.isLandscape(),p=h.scry(document.body,'div','landscapeCoverCrop')[0],q=h.scry(document.body,'*','cover-photo')[0];if(!p||!q)return;if(o){var r=j.getUseableHeight(),s=Math.max(window.innerHeight,window.innerWidth),t=s/m.aspectRatio,u=Math.round(r-m.bottomPadding),v=Math.round((t-u)/2);p.style.height=u+'px';q.style.bottom=v+'px';}else{p.style.height='';q.style.bottom='';}i.invoke('m:landscape-cover-crop:complete');}i.listen('m:orientation-resize:complete',null,function(){g(n,0);});n();};f.main=l;},null);
__d("MTimelineUnfriendConfirmation",["DataStore","Stratcom","MRequest","destroyOnUnload","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){var l='unfriend',m;function n(){if(m)return;m=h.listen('click',l,function(o){var p=g.get(o.getNode(l));new i(p.unfriendAttemptURI).send();var q=k._("\u662f\u5426\u786e\u5b9a\u8981\u79fb\u9664\u670b\u53cb{name}\uff1f",[k.param("name",p.shortName)]);if(confirm(q))new i(p.unfriendURI).send();});j(function(){m.remove();m=null;});}f.init=n;},null);
__d("MTimelineXCoverCarousel",["Banzai","CSS","DataStore","DOM","MLoadingIndicator","MLoadingIndicatorSigils","MRequest","MViewport","Stratcom","XTimelineCoverSwapControllerURIBuilder","cx","destroyOnUnload","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t='timelinex_cover_carousel',u=Math.pow(2,53),v=3000,w=3,x="_-1c",y="_-1d";function z(aa,ba,ca){"use strict";this.$MTimelineXCoverCarousel0=aa;this.$MTimelineXCoverCarousel1=ba;this.$MTimelineXCoverCarousel2=ca;this.$MTimelineXCoverCarousel3=0;var da=false;this.$MTimelineXCoverCarousel4=Math.floor(Math.random()*u);this.$MTimelineXCoverCarousel5();var ea=[o.listen('MScrollArea:create',null,function(fa){if(fa.getData().element===this.$MTimelineXCoverCarousel0)this.$MTimelineXCoverCarousel6=fa.getData().scrollarea;}.bind(this)),o.listen('MScrollArea:scrollstart',null,function(fa){if(fa.getData().scrollarea===this.$MTimelineXCoverCarousel6){if(!da){this.$MTimelineXCoverCarousel7();da=true;}this.$MTimelineXCoverCarousel8();}}.bind(this)),o.listen('MScrollArea:scrollend',null,function(fa){if(fa.getData().scrollarea===this.$MTimelineXCoverCarousel6){if(this.$MTimelineXCoverCarousel6.getNumChildren()-this.$MTimelineXCoverCarousel6.getScrollPageIndex()<=w)this.$MTimelineXCoverCarousel7();this.$MTimelineXCoverCarousel9();}}.bind(this)),o.listen('m:orientation-resize:complete','*',function(fa){this.$MTimelineXCoverCarousel6&&this.$MTimelineXCoverCarousel6.scrollToIndex(this.$MTimelineXCoverCarousel6.getScrollPageIndex());}.bind(this))];if(this.$MTimelineXCoverCarousel2.hasFullBleedProfilePic)ea.push(o.listen('m:viewport:orientation-change','*',this.$MTimelineXCoverCarousela.bind(this)));r(function(){while(ea.length)ea.pop().remove();});}z.prototype.$MTimelineXCoverCarousela=function(aa){"use strict";var ba=new p().setInt('profile_id',this.$MTimelineXCoverCarousel2.profileID).setBool('full_bleed_profile_pic',this.$MTimelineXCoverCarouselb()).getURI();new m(ba).setMethod('GET').send();};z.prototype.$MTimelineXCoverCarouselb=function(){"use strict";return !n.isLandscape();};z.prototype.$MTimelineXCoverCarousel7=function(){"use strict";var aa=j.scry(this.$MTimelineXCoverCarousel0,'a','cover-carousel-placeholder')[0];if(!aa||i.get(aa).requestSent)return;new k(j.find(aa,'div',l.ROOT));var ba=new m(aa.href).setMethod('GET');ba.listen('done',this.$MTimelineXCoverCarousel9.bind(this));ba.send();i.set(aa,{requestSent:true});};z.prototype.$MTimelineXCoverCarousel9=function(){"use strict";var aa=this.$MTimelineXCoverCarousel6.getScrollPageIndex();if(aa>this.$MTimelineXCoverCarousel3){this.$MTimelineXCoverCarousel3=aa;this.$MTimelineXCoverCarousel5();}var ba=aa===0,ca=o.hasSigil(this.$MTimelineXCoverCarousel6.getChildAtPageIndex(aa),'cover-carousel-more-link');h.conditionClass(this.$MTimelineXCoverCarousel1,y,ba);h.conditionClass(this.$MTimelineXCoverCarousel1,"_-1e",ca);h.conditionClass(this.$MTimelineXCoverCarousel1,x,false);if(this.$MTimelineXCoverCarouselc)this.$MTimelineXCoverCarouselc&&clearTimeout(this.$MTimelineXCoverCarouselc);if(!ba&&!ca)this.$MTimelineXCoverCarouselc=s(h.conditionClass.bind(h,this.$MTimelineXCoverCarousel1,x,true),v);};z.prototype.$MTimelineXCoverCarousel8=function(){"use strict";h.conditionClass(this.$MTimelineXCoverCarousel1,y,false);h.conditionClass(this.$MTimelineXCoverCarousel1,x,false);};z.prototype.$MTimelineXCoverCarousel5=function(){"use strict";if(g.isEnabled(t)){var aa={nuxtype:this.$MTimelineXCoverCarousel2.nuxType,profileid:this.$MTimelineXCoverCarousel2.profileID,relationtype:this.$MTimelineXCoverCarousel2.relationType,sessionid:this.$MTimelineXCoverCarousel4};g.post(t,aa);}};e.exports=z;},null);
__d("MTimelineXFriendingButton",["CSS","DOM","Stratcom","MFriendingActionError","$","destroyOnUnload","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n,o,p,q,r;function s(){var v=n.style.display!=='none',w=m('pymkMProfile');g.conditionShow(n,!v);g.conditionShow(o,v);w&&h.remove(w);if(!v)q.hide();}function t(v){var w=v.getData();if(w.userid!==r)return;if(w.error===j.SEND_OUTGOING_REQUEST_ERROR||w.error===j.CANCEL_OUTGOING_REQUEST_ERROR)s();}function u(v,w,x){n=v;o=w.getContext();p=h.find(w.getRoot(),'*','cancel-request-button');q=w;r=x;var y=[i.listen('friending_state_change',null,t),h.listen(n,'click',null,s),h.listen(p,'click',null,s)];l(function(){n=null;o=null;p=null;o=null;while(y.length)y.pop().remove();});}f.init=u;},null);
__d("MTimelineYearOverviewClickLogging",["BanzaiLogger","DataStore","DOM","destroyOnUnload"],function(a,b,c,d,e,f,g,h,i,j){var k='year-overview-logging',l='yearOverviewLoggingData',m=10;function n(o){var p=i.listen(o,'click',k,function(q){var r=q.getNode(k);g.create({delay:m}).log('MTimelineYearOverviewLoggerConfig',h.get(r)[l]);});j(p.remove.bind(p));}f.init=n;},null);