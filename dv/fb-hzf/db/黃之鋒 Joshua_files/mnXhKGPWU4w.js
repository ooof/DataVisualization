/*!CK:1053703531!*//*1414386091,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["AfXcT"]); }

__d("MTouchChannelManager",["MChannelManager","Stratcom"],function(a,b,c,d,e,f,g,h){function i(l){h.invoke(l.type,null,l);}var j=false;function k(){if(j)return;j=true;g.addListener(g.CHANNEL_MESSAGE,i);h.listen(['m:onload','m:jewels:init-counts'],null,g.startChannel);}f.initialize=k;},null);
__d("MPresenceIcon",["setTimeoutAcrossTransitions","DOM","DataStore","MRequest","MURI","Stratcom"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=0,n=1,o=2,p;function q(){var r=h.scry(document.body,'i','presence-icon'),s=[];for(var t=0,u=r.length;t<u;++t){var v=i.get(r[t]);if(v.userid&&!s[v.userid])s[v.userid]=1;}var w=new k('/chat/presence_icon.php').setAsync(true).toString(),x=new j(w).setData({ids:Object.keys(s)}).setIgnoreErrors(true);x.listen('done',function(y){for(var z=0,aa=r.length;z<aa;++z){var ba=i.get(r[z]);if(ba&&ba.userid&&((l.hasSigil(r[z],'online-icon'))&&(y[ba.userid]==n))||((l.hasSigil(r[z],'mobile-icon'))&&(y[ba.userid]==o))){h.show(r[z]);}else h.hide(r[z]);}});x.listen('finally',function(y){clearTimeout(p);p=g(q,m);});x.send();}m=m?m*100:60000;q();},null);
__d("StrSet",[],function(a,b,c,d,e,f){function g(h){"use strict";this.$StrSet0={};this.$StrSet1=0;if(h)this.addAll(h);}g.prototype.add=function(h){"use strict";if(!this.$StrSet0.hasOwnProperty(h)){this.$StrSet0[h]=true;this.$StrSet1++;}return this;};g.prototype.addAll=function(h){"use strict";h.forEach(this.add,this);return this;};g.prototype.remove=function(h){"use strict";if(this.$StrSet0.hasOwnProperty(h)){delete this.$StrSet0[h];this.$StrSet1--;}return this;};g.prototype.removeAll=function(h){"use strict";h.forEach(this.remove,this);return this;};g.prototype.toArray=function(){"use strict";return Object.keys(this.$StrSet0);};g.prototype.toMap=function(h){"use strict";var i={};Object.keys(this.$StrSet0).forEach(function(j){i[j]=typeof h=='function'?h(j):h||true;});return i;};g.prototype.contains=function(h){"use strict";return this.$StrSet0.hasOwnProperty(h);};g.prototype.count=function(){"use strict";return this.$StrSet1;};g.prototype.clear=function(){"use strict";this.$StrSet0={};this.$StrSet1=0;};g.prototype.clone=function(){"use strict";return new g(this);};g.prototype.forEach=function(h,i){"use strict";Object.keys(this.$StrSet0).forEach(h,i);};g.prototype.map=function(h,i){"use strict";return Object.keys(this.$StrSet0).map(h,i);};g.prototype.some=function(h,i){"use strict";return Object.keys(this.$StrSet0).some(h,i);};g.prototype.every=function(h,i){"use strict";return Object.keys(this.$StrSet0).every(h,i);};g.prototype.filter=function(h,i){"use strict";return new g(Object.keys(this.$StrSet0).filter(h,i));};g.prototype.union=function(h){"use strict";return this.clone().addAll(h);};g.prototype.intersect=function(h){"use strict";return this.filter(function(i){return h.contains(i);});};g.prototype.difference=function(h){"use strict";return h.filter(function(i){return !this.contains(i);}.bind(this));};g.prototype.equals=function(h){"use strict";var i=function(m,n){return m===n?0:m<n?-1:1;},j=this.toArray(),k=h.toArray();if(j.length!==k.length)return false;var l=j.length;j=j.sort(i);k=k.sort(i);while(l--)if(j[l]!==k[l])return false;return true;};e.exports=g;},null);
__d("PlatformBaseVersioning",["PlatformVersions","getObjectValues","StrSet","invariant"],function(a,b,c,d,e,f,g,h,i,j){var k=new i(h(g.versions)),l=location.pathname,m=l.substring(1,l.indexOf('/',1)),n=k.contains(m)?m:g.versions.UNVERSIONED;function o(r,s){if(s==g.versions.UNVERSIONED)return r;j(k.contains(s));if(r.indexOf('/')!==0)r='/'+r;return '/'+s+r;}function p(r){if(k.contains(r.substring(1,r.indexOf('/',1))))return r.substring(r.indexOf('/',1));return r;}var q={addVersionToPath:o,getLatestVersion:function(){return g.LATEST;},versionAwareURI:function(r){return r.setPath(o(r.getPath(),n));},versionAwarePath:function(r){return o(r,n);},getUnversionedPath:p};e.exports=q;},null);
__d("PlatformWidgetEndpoint",["PlatformBaseVersioning"],function(a,b,c,d,e,f,g){function h(m,n){return g.versionAwarePath('/dialog'+'/'+m+(n?'/'+n:''));}function i(m,n){return g.versionAwarePath('/plugins'+'/'+m+(n?'/'+n:''));}function j(m){return (/^\/plugins\//).test(g.getUnversionedPath(m));}function k(m){return (/^\/dialog\//).test(g.getUnversionedPath(m));}var l={dialog:h,plugins:i,isPluginEndpoint:j,isDialogEndpoint:k};e.exports=l;},null);
__d("MAnimation",["CSS","DataStore","getVendorPrefixedName","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j){var k=i('animation-duration');function l(m,n,o){var p=h.get(m);clearTimeout(p.timerEnd);delete p.timerEnd;g.conditionClass(m,n,false);g.conditionClass(m,'accelerate',true);m.style[k]=o+'ms';p.timerStart=j(g.conditionClass.bind(null,m,n,true),0);p.timerEnd=j(function(){g.conditionClass.bind(null,m,n,false);m.style[k]='';g.conditionClass(m,'accelerate',false);var q=h.get(m);clearTimeout(q.timerStart);delete q.timerStart;},o);}e.exports={animate:l};},null);
__d("MExpandablePymk",["setTimeoutAcrossTransitions","CSS","DOM","DataStore","cx"],function(a,b,c,d,e,f,g,h,i,j,k){var l='m-add-friend';function m(o,p,q){var r=[],s=0;if(o){var t=i.scry(o,'div','story-wrap');for(var u=0;u<t.length;u++){var v=i.find(t[u],'a',l),w=j.get(v);r.push(w.id);var x=j.get(t[u]);if(x.sent)s++;}q.pymk_group_id=p;}if(r)q.uw=r.join(',');if(s)q.pc=s;return r;}function n(o,event,p){if(!o)return;var q=o.getElementsByClassName("_4-ck");if(q.length>0)g(function(){o.style.height="";},800);var r=function(z){return (function(){h.conditionClass(z,"_4-cl",true);});},s=function(z){return (function(){h.conditionClass(z,"_4-ck",false);});},t=i.scry(o,'div','story-wrap'),u=0;for(var v=0;v<t.length;v++){var w=j.get(t[v]);if(w.transitionIn){j.set(t[v],{transitionIn:false});g(r(t[v]),800);g(s(t[v]),1200);}else if(w.sent){var x=t[v];if(q.length>0)o.style.height=(o.offsetHeight-q.length*q[0].offsetHeight).toString()+'px';h.conditionClass(x,"_4-cn",true);if(p){h.conditionClass(x,"_4-co",true);h.conditionClass(x,"_4-cp",false);}g(function(){i.remove(x);},600);u++;}}if(u<t.length){var y=event.getNode('story-wrap');j.set(y,{sent:true});if(p){h.conditionClass(y,"_4-cp",true);h.conditionClass(y,"_4-co",false);}}}e.exports={getExtraArgs:m,animateExpansion:n};},null);
__d("MFriendingState",[],function(a,b,c,d,e,f){e.exports={REQUEST_SENT:'m:friending-state:request-sent',REQUEST_CANCELED:'m:friending-state:request-canceled',UNFRIENDED:'m:friending-state:unfriended'};},null);
__d("MAddFriend",["CSS","DOM","DataStore","Stratcom","MAnimation","MExpandablePymk","MFriendingState","MPageCache","MPageControllerPath","MRequest","MRequestTypes","MURI","MFriendingActionError","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u='m-add-friend',v='m-cancel-request',w='m-unfriend-request',x='m-unfollow-request',y='m-follow-request',z='check',aa='friends',ba='add_friend_pymk_chain_placeholder',ca='/a/mobile/friends/add_friend.php',da='/a/friendrequest/cancel/index.php',ea='/a/friends/remove',fa='/a/subscriptions/remove',ga='/a/subscriptions/add',ha=86;function ia(sa){var ta=sa.querySelector('.touched_hide');ta&&k.animate(ta,"_4-ic",500);}function ja(){var sa=o.getRequestPath();n.removeCachedPage(sa);n.clearCachedIUIResponses(sa);}function ka(event){var sa=event.getNode(u),ta=i.get(sa),ua=event.getNode('m-add-friend-secondary'),va=i.get(ua),wa=ta.pymk_group_id||'pymk_suggestions_box',xa=event.getNode('id:'+wa),ya=document.getElementById(ba);i.set(ua,{one_click_adding:true,one_click_cancel_event:null});ja();var za={id:ta.id,hf:ta.hf,sc:ta.sc,so:ta.so,pl:ta.pl,at:ta.at,et:ta.et,ed:ta.ed,fref:ta.fref};if(ta.floc)za.floc=ta.floc;if(ta.frefs)za.frefs=ta.frefs;if(ta.el)za.el=ta.el;var ab=l.getExtraArgs(xa,wa,za),bb=h.find(ua,'*',z),cb=h.find(ua,'div','m-add-friend-flyout'),db=new r(ca).setAsync(true);if(ta.searchlog)db.addQueryData(ta.searchlog);var eb=new r(sa.href).getQueryData()._ft_;if(eb)db.addQueryData({_ft_:eb});var fb=new p(db.toString()).setType(q.DEPENDENT);fb.setData(za);var gb=function(){h.show(bb);i.get(ua).bounce&&ia(bb);j.listen('friending_state_change',null,la.bind(event,za.id,s.SEND_OUTGOING_REQUEST_ERROR));j.invoke(m.REQUEST_SENT,null,{event:event});};fb.listen('start',function(){h.hide(cb);gb();});fb.listen('postprocess',function(hb){if(va.one_click_adding){i.set(ua,{one_click_adding:false});if(va.one_click_cancel_event)na(va.one_click_cancel_event);}if(ab)l.animateExpansion(xa,event,ya);});fb.send();event.kill();}function la(sa,ta,event){var ua=event.getData();if(ua.userid!=sa)return;if(ua.error!=ta)return;var va=this.getNode('m-add-friend-secondary');if(ua.error===s.SEND_OUTGOING_REQUEST_ERROR){var wa=h.find(va,'*',z),xa=h.find(va,'div','m-add-friend-flyout');h.show(xa);h.hide(wa);j.invoke(s.SEND_OUTGOING_REQUEST_ERROR,null,{event:this});}else if(ua.error===s.CANCEL_OUTGOING_REQUEST_ERROR){var ya=h.find(va,'a','m-cancel-request'),za=h.find(va,'div','m-add-friend-flyout');h.show(ya);h.hide(za);j.invoke(s.CANCEL_OUTGOING_REQUEST_ERROR,null,{event:this});}j.removeCurrentListener();}function ma(sa){var ta=i.get(sa.getNode(w)),event=ta.flyoutEvent,ua=event.getNode('undoable-action');if(!ua)ua=event.getNode('m-add-friend-secondary');var va=h.scry(ua,'*',aa)[0],wa=h.find(ua,'div','m-add-friend-flyout'),xa=new r(ea).setAsync(true),ya=new p(xa);ya.setData({friend_id:ta.id,noReload:true,unref:ta.unfriend_ref});ya.listen('start',function(){h.hide(va);h.show(wa);j.invoke(m.UNFRIENDED,null,{event:event});});ya.send();event.kill();}function na(event){var sa=i.get(event.getNode(v)),ta=document.getElementById(ba),ua=event.getNode('undoable-action');if(!ua)ua=event.getNode('m-add-friend-secondary');if(!ua)ua=sa.parentNode;var va=h.scry(ua,'*',z)[0],wa=h.find(ua,'*','load'),xa=h.find(ua,'div','m-add-friend-flyout'),ya=event.getNode('m-add-friend-secondary'),za=ya?i.get(ya):null;if(za&&za.one_click_adding){i.set(ya,{one_click_cancel_event:event});h.hide(va);h.show(wa);return;}var ab=function(){h.show(xa);j.invoke(m.REQUEST_CANCELED,null,{event:event});},bb=new r(da).setAsync(true),cb=new p(bb);cb.setData({subject_id:sa.id,ref_param:sa.ref_param,floc:sa.floc,frefs:sa.frefs});j.listen('friending_state_change',null,la.bind(event,sa.id,s.CANCEL_OUTGOING_REQUEST_ERROR));cb.listen('start',function(){h.hide(va);h.show(wa);});cb.listen('finally',function(){h.hide(wa);ab();var db=event.getNode('story-wrap');if(db)i.set(db,{sent:false});});cb.send();event.kill();}function oa(event){var sa=event.getNode(x),ta=i.get(sa),ua=new r(fa).setAsync(true),va=new p(ua);va.setData({subject_id:ta.id,forceredirect:false,location:ha});va.send();event=ta.flyoutEvent;var wa=event.getNode('popup-action-trigger');i.set(wa,{is_following:false});event.kill();}function pa(event){var sa=event.getNode(y),ta=i.get(sa),ua=new r(ga).setAsync(true),va=new p(ua);va.setData({subject_id:ta.id,forceredirect:false,location:ha});va.send();event=ta.flyoutEvent;var wa=event.getNode('popup-action-trigger');i.set(wa,{is_following:true});event.kill();}var qa=false,ra=function(sa){if(qa)return;qa=true;j.listen('click',u,ka);j.listen('click',v,na);j.listen('click',w,ma);if(typeof sa!=='undefined'&&sa){j.listen('click',x,oa);j.listen('click',y,pa);}};e.exports={main:ra};},null);
__d("MLink",["DOM","DataStore","ErrorUtils","MTabletLoader","MLinkHack","MLogger","MPageCache","MPageController","PlatformWidgetEndpoint","Stratcom","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r='standalone' in window.navigator&&window.navigator.standalone,s=false;function t(){if(s)return;s=true;g.listen(document.documentElement,'click',null,function(event){if(event.getPrevented())return;i.applyWithGuard(function(){var u=event.getNode('tag:a');if(!u)return;var v=event.getRawEvent();if(u.getAttribute('onclick')||(v.which||v.button)>=2)return;k.remove(u);var w=u.getAttribute('href'),x=new q(w),y=x.getProtocol();if(y&&y!='http'&&y!='https')return;var z=x.getDomain(),aa=w&&w.charAt(0),ba=!aa||/[\/#]/.test(aa),ca=x.getPort()?[z,x.getPort()].join(':'):z,da=ba||location.host===ca,ea=z&&!(/\.facebook.com$/i).test(z);if(ea&&!p.hasSigil(u,'MLinkshim'))l.mustfix('Loading an external URL without shimming: %s',w);var fa=u.getAttribute('target');if((fa=='_blank'||ea)&&r)return;if(fa=='_blank'){window.open(w,'_blank');}else if(j.isTabletFrame&&!da){j.MTabletLink.gotoURI(w);}else if(o.isDialogEndpoint(x.getPath())){return;}else if(fa||(y&&(y+':')!==location.protocol)||p.hasSigil(u,'no_mpc')||ea){window.location=w;}else if(w){if(w.indexOf('#')===0){var ga=document.getElementById(w.substr(1));ga&&ga.scrollIntoView();}else{var ha=h.get(u);if(ha.fromCache)m.setScrollHistory(w,0);n.load(w,{replace:ha.behavior==='replace-state',expiration:ha.fromCache?n.HISTORY_EXPIRE_MS:null});}}else{if(u.hasAttribute('data-sigil'))return;var ia='',ja=event.getTarget();while(ja&&ja!=document.body){ia=ia+' <'+ja.nodeName;if(ja.id)ia=ia+' id='+ja.id;if(ja.className)ia=ia+' class='+ja.className;ia=ia+' >';ja=ja.parentNode;}l.warn('handleClick: unknown link action: '+'<a id="%s" class="%s" /> Path: %s',u.id,u.className,ia);return;}event.prevent();},null,[],null,'LinkController');});}f.setupListener=t;},null);
__d("MTextInputClearable",["setTimeoutAcrossTransitions","$","DOM","Stratcom"],function(a,b,c,d,e,f,g,h,i,j){var k=function(l){var m=h(l.wrapper),n=i.find(m,'input','clearableInput'),o=i.find(m,'div','clearButton'),p=getComputedStyle(m).getPropertyValue("display").indexOf('inline-')!==-1,q=[],r;function s(){if(r)clearTimeout(r);if(p&&!m.style.width)m.style.width=m.clientWidth+'px';i.show(o);}function t(){i.hide(o);}function u(y){r=g(function(){t();},0);}function v(y){if(!n.value.length){t();}else if(o.style.display==='none')s();}function w(y){n.value='';t();n.focus();j.invoke('m:text-input:clear',null,n);}function x(){if(r)clearTimeout(r);if(!j.hasSigil(n,'permanentInput')){q.forEach(function(y){y.remove();});q=null;}}q.push(i.listen(n,'blur',null,u),i.listen(n,['focus','keyup'],null,v),i.listen(o,'click',null,w),j.listen('m:page:unload',null,x));};f.main=k;},null);