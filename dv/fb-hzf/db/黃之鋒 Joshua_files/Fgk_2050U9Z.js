/*!CK:610815749!*//*1415918839,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["gf2Q2"]); }

__d("MAdsPrefsFeedback",["cx","CSS","DOM","MRequest","XAdsPreferencesFeedbackControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k){function l(n,o){var p=o?'ad_useful':'ad_neutral',q=new k().setInt('ad_id',n).setEnum('favorite',p).getURI(),r=new j(q);r.send();}var m={toggle:function(n,o,p,q){h.conditionClass(n,"_232h",true);n.addEventListener('webkitAnimationEnd',function(r){h.conditionClass(r.target,"_232h",false);i.replace(r.target,o);},true);l(p,q);}};e.exports=m;},null);
__d("MFirefoxAppDetect",[],function(a,b,c,d,e,f){function g(h,i){if(!navigator.mozApps){i();return;}if(window.locationbar&&!window.locationbar.visible){h();return;}if(navigator.mozApps.getSelf){var j=navigator.mozApps.getSelf();j.onsuccess=function(){j.result?h():i();};j.onerror=i;}else i();}f.isFirefoxApp=g;},null);
__d("MPageHeaderLeft",["$","DOM","MFirefoxAppDetect"],function(a,b,c,d,e,f,g,h,i){var j={};function k(m){if(!j.back_button){var n=g('page');j.back_button=h.find(n,'a','back-button');j.menu_button=h.find(n,'a','menu-link');}if(m.show_back_button){h.hide(j.menu_button);h.show(j.back_button);}else{h.hide(j.back_button);h.show(j.menu_button);}}var l=function(m){var n=window.navigator;if(n.standalone||j.isMozApp){k(m);}else if(j.isMozApp===undefined){j.lastConfig=m;i.isFirefoxApp(function o(){j.isMozApp=true;if(m===j.lastConfig){l(m);delete j.lastConfig;}},function o(){j.isMozApp=false;});}};f.main=l;},null);
__d("MComposition",["MCompositionStoreID","invariant"],function(a,b,c,d,e,f,g,h){function i(j){"use strict";var k=j||{};this.$MComposition0={};for(var l in k)this.setStoreData(l,k[l]);}i.prototype.serialize=function(){"use strict";return this.$MComposition0;};i.prototype.$MComposition1=function(j){"use strict";h(g.hasOwnProperty(j));};i.prototype.setStoreData=function(j,k){"use strict";this.$MComposition1(j);h(!this.$MComposition0.hasOwnProperty(j));this.$MComposition0[j]=k;return this;};e.exports=i;},null);
__d("MCompositionConstants",["keyMirror"],function(a,b,c,d,e,f,g){e.exports={ActionTypes:g({CLOSE_DIALOG:null,COMPOSITION_FINALIZE:null,COMPOSITION_INITIALIZE:null,DISABLE_PHOTOS:null,MINUTIAE_REMOVE:null,MINUTIAE_SET:null,PHOTO_CHANGE:null,PLACE_REMOVE:null,PLACE_SET:null,PRIVACY_CHANGE:null,GROUP_SELL_UPDATE:null,SHARE_LINK_UPDATE:null,STATUS_CHANGE:null,SHARE_REMOVE_PREVIEW:null,WITH_CHANGE:null}),PayloadSources:g({USER_ACTION:null})};},null);
__d("Dispatcher",["invariant"],function(a,b,c,d,e,f,g){"use strict";var h=1,i='ID_';function j(){this.$Dispatcher0={};this.$Dispatcher1={};this.$Dispatcher2={};this.$Dispatcher3=false;this.$Dispatcher4=null;}j.prototype.register=function(k){var l=i+h++;this.$Dispatcher0[l]=k;return l;};j.prototype.unregister=function(k){g(this.$Dispatcher0[k]);delete this.$Dispatcher0[k];};j.prototype.waitFor=function(k){g(this.$Dispatcher3);for(var l=0;l<k.length;l++){var m=k[l];if(this.$Dispatcher1[m]){g(this.$Dispatcher2[m]);continue;}g(this.$Dispatcher0[m]);this.$Dispatcher5(m);}};j.prototype.dispatch=function(k){g(!this.$Dispatcher3);this.$Dispatcher6(k);try{for(var l in this.$Dispatcher0){if(this.$Dispatcher1[l])continue;this.$Dispatcher5(l);}}finally{this.$Dispatcher7();}};j.prototype.isDispatching=function(){return this.$Dispatcher3;};j.prototype.$Dispatcher5=function(k){this.$Dispatcher1[k]=true;this.$Dispatcher0[k](this.$Dispatcher4);this.$Dispatcher2[k]=true;};j.prototype.$Dispatcher6=function(k){for(var l in this.$Dispatcher0){this.$Dispatcher1[l]=false;this.$Dispatcher2[l]=false;}this.$Dispatcher4=k;this.$Dispatcher3=true;};j.prototype.$Dispatcher7=function(){this.$Dispatcher4=null;this.$Dispatcher3=false;};e.exports=j;},null);
__d("MCompositionDispatcher",["Dispatcher","copyProperties","createObjectFrom","getObjectValues","invariant","MCompositionConstants"],function(a,b,c,d,e,f,g,h,i,j,k){var l=b('MCompositionConstants').ActionTypes,m=b('MCompositionConstants').PayloadSources,n=i(j(l));function o(q){return function(r){k(!!r.data);k(!!r.actionType);k(n.hasOwnProperty(r.actionType));this.dispatch({action:r,paylodSource:q});};}var p=h(new g(),{handleUpdateFromUserAction:o(m.USER_ACTION)});e.exports=p;},null);
__d("MCompositionStore",["ImmutableObject","MCompositionDispatcher","createObjectFrom","getObjectValues","invariant","mixInEventEmitter","MCompositionConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=b('MCompositionConstants').ActionTypes,n={};function o(p,q){"use strict";k(!n.hasOwnProperty(p));this.$MCompositionStore0=null;this.$MCompositionStore1=null;this.$MCompositionStore2=q;this.$MCompositionStore3={};this.$MCompositionStore4=null;this.$MCompositionStore5=null;this.$MCompositionStore6=p;this.$MCompositionStore7=false;this.$MCompositionStore8=i(j(q));}o.prototype.setMutable=function(p){"use strict";this.$MCompositionStore9();this.$MCompositionStore7=p;return this;};o.prototype.addChangeListener=function(p){"use strict";return this.addListener('change',p);};o.prototype.$MCompositionStorea=function(p){"use strict";k(this.hasField(p));};o.prototype.$MCompositionStoreb=function(){"use strict";k(this.$MCompositionStore1&&n.hasOwnProperty(this.$MCompositionStore6));};o.prototype.$MCompositionStorec=function(p){"use strict";if(!p||!this.$MCompositionStore5)return;Object.keys(this.$MCompositionStore5).forEach(function(q){k(p.hasOwnProperty(q));});};o.prototype.$MCompositionStore9=function(){"use strict";k(!this.$MCompositionStore1&&!n.hasOwnProperty(this.$MCompositionStore6));};o.prototype.get=function(p,q){"use strict";this.$MCompositionStoreb();this.$MCompositionStorea(p);if(this.$MCompositionStore0&&this.$MCompositionStore0.hasOwnProperty(p)){return this.$MCompositionStore0[p];}else if(q!==undefined){return q;}else return null;};o.prototype.getAll=function(){"use strict";this.$MCompositionStoreb();return this.$MCompositionStore0||new g();};o.prototype.getID=function(){"use strict";return this.$MCompositionStore6;};o.getRegisteredStores=function(){"use strict";return j(n);};o.prototype.$MCompositionStored=function(p){"use strict";var q=p.action,r=q.actionType,s=q.data;if(!this.$MCompositionStoree(r))return;this.$MCompositionStoref(this.$MCompositionStore3[r].call(null,s[this.$MCompositionStore6]||null));this.emit('change');};o.prototype.hasField=function(p){"use strict";return this.$MCompositionStore8.hasOwnProperty(p);};o.prototype.$MCompositionStoree=function(p){"use strict";return this.$MCompositionStore3.hasOwnProperty(p);};o.prototype.isEmpty=function(){"use strict";this.$MCompositionStoreb();return !this.$MCompositionStore0;};o.prototype.register=function(){"use strict";k(!this.$MCompositionStore1);this.$MCompositionStore1=h.register(this.$MCompositionStored.bind(this));n[this.$MCompositionStore6]=this;return this;};o.prototype.$MCompositionStoref=function(p){"use strict";if(p){this.$MCompositionStorec(p);Object.keys(p).forEach(function(q){return this.$MCompositionStorea(q);}.bind(this));if(this.$MCompositionStore7){this.$MCompositionStore0=p;}else this.$MCompositionStore0=new g(p);}else this.$MCompositionStore0=null;return this;};o.prototype.setHandlerFor=function(p,q){"use strict";this.$MCompositionStore9();k(m.hasOwnProperty(p));k(!this.$MCompositionStoree(p));this.$MCompositionStore3[p]=q;return this;};o.prototype.setRequiredFields=function(){"use strict";for(var p=[],q=0,r=arguments.length;q<r;q++)p.push(arguments[q]);this.$MCompositionStore9();p.forEach(function(s){return this.$MCompositionStorea(s);}.bind(this));this.$MCompositionStore5=i(p);return this;};o.prototype.toUpdate=function(){"use strict";this.$MCompositionStoreb();return this.$MCompositionStore1;};l(o,{change:true});e.exports=o;},null);
__d("MCompositionConfigStore",["MCompositionStore","MCompositionConfigFields","MCompositionStoreID","emptyFunction","invariant","merge","MCompositionConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=b('MCompositionConstants').ActionTypes;function n(){return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(p){var q=Math.random()*16|0,r=p=='x'?q:(q&3|8);return r.toString(16);});}var o=new g(i.CONFIG,h).setRequiredFields(h.ACTION,h.BUTTON_TEXT_SUBMIT,h.COMPOSER_TITLE,h.OPENED_AT,h.SESSION_ID).setHandlerFor(m.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(m.COMPOSITION_INITIALIZE,function(p){p=p||{};p[h.SESSION_ID]=n();p[h.OPENED_AT]=Date.now();return p;}).setHandlerFor(m.DISABLE_PHOTOS,function(p){var q=p&&p[h.DISABLE_PHOTOS];k(q!==undefined&&q!==null);var r={};r[h.DISABLE_PHOTOS]=q;return l(o.getAll(),r);}).register();e.exports=o;},null);
/**
 * @generated SignedSource<<38c660df4077b7dc57a24ea3cec01c11>>
 *
 * !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 * !! This file is a check-in of a static_upstream project!      !!
 * !!                                                            !!
 * !! You should not modify this file directly. Instead:         !!
 * !! 1) Use `fjs use-upstream` to temporarily replace this with !!
 * !!    the latest version from upstream.                       !!
 * !! 2) Make your changes, test them, etc.                      !!
 * !! 3) Use `fjs push-upstream` to copy your changes back to    !!
 * !!    static_upstream.                                        !!
 * !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 *
 * Copyright (c) 2012 Barnesandnoble.com, llc, Donavon West, and Domenic
 * Denicola
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * @preserve-header
 * @providesModule ImmediateImplementation
 */__d("ImmediateImplementation",[],function(a,b,c,d,e,f){(function(g,h){"use strict";var i=1,j={},k={},l=k,m=false,n=g.document,o;function p(x){var y=x[0];x=Array.prototype.slice.call(x,1);j[i]=function(){y.apply(h,x);};l=(l.next={handle:i++});return l.handle;}function q(){var x,y;while(!m&&(x=k.next)){k=x;if((y=j[x.handle])){m=true;try{y();m=false;}finally{r(x.handle);if(m){m=false;if(k.next)o(q);}}}}}function r(x){delete j[x];}function s(){if(g.postMessage&&!g.importScripts){var x=true,y=function(){x=false;if(g.removeEventListener){g.removeEventListener("message",y,false);}else g.detachEvent("onmessage",y);};if(g.addEventListener){g.addEventListener("message",y,false);}else if(g.attachEvent){g.attachEvent("onmessage",y);}else return false;g.postMessage("","*");return x;}}function t(){var x="setImmediate$"+Math.random()+"$",y=function(event){if(event.source===g&&typeof event.data==="string"&&event.data.indexOf(x)===0)q();};if(g.addEventListener){g.addEventListener("message",y,false);}else g.attachEvent("onmessage",y);o=function(){var z=p(arguments);g.postMessage(x+z,"*");return z;};}function u(){var x=new MessageChannel();x.port1.onmessage=q;o=function(){var y=p(arguments);x.port2.postMessage(y);return y;};}function v(){var x=n.documentElement;o=function(){var y=p(arguments),z=n.createElement("script");z.onreadystatechange=function(){z.onreadystatechange=null;x.removeChild(z);z=null;q();};x.appendChild(z);return y;};}function w(){o=function(){setTimeout(q,0);return p(arguments);};}if(s()){t();}else if(g.MessageChannel){u();}else if(n&&n.createElement&&"onreadystatechange" in n.createElement("script")){v();}else w();f.setImmediate=o;f.clearImmediate=r;}(Function("return this")()));},null);
__d("setImmediate",["ErrorUtils","invariant","ImmediateImplementation"],function(a,b,c,d,e,f,g,h){var i=a.setImmediate;if(!i){var j=b('ImmediateImplementation');i=j.setImmediate;}function k(l){for(var m=[],n=1,o=arguments.length;n<o;n++)m.push(arguments[n]);h(typeof l==='function');l=g.guard(l,'setImmediate');return i.apply(null,[l].concat(m));}e.exports=k;},null);
__d("ES6Promise",["setImmediate"],function(a,b,c,d,e,f){e.exports=(function(g,h){'use strict';var i=b('setImmediate'),j='pending',k='fulfilled',l='rejected',m='__slots$'+Math.random().toString(36).slice(2);function n(v){var w=v[m];if(!w){v[m]=w={};if(Object.defineProperty)try{Object.defineProperty(v,m,{value:w});}catch(x){}}return w;}function o(v){return v;}function p(v){throw v;}function q(v){var w=n(this);w.state=j;w.fulfillReactions=[];w.rejectReactions=[];var x=r(this),y=x.reject;try{v(x.resolve,y);}catch(z){y(z);}}function r(v){var w=false;return {resolve:function(x){if(!w){w=true;if(x===v)return s(v,l,new TypeError('Cannot resolve promise with itself'));if(!x||typeof x!=="object"||typeof x.then!=="function")return s(v,k,x);var y=r(v),z=y.reject;try{x.then(y.resolve,z);}catch(aa){z(aa);}}},reject:function(x){if(!w){w=true;s(v,l,x);}}};}function s(v,w,x){var y=n(v);if(y.state!==j)throw new Error('Settling a '+y.state+' promise');var z;if(w===k){z=y.fulfillReactions;}else if(w===l)z=y.rejectReactions;y.result=x;y.fulfillReactions=h;y.rejectReactions=h;y.state=w;var aa=z.length;aa&&i(function(){for(var ba=0;ba<aa;++ba)z[ba](y.result);});}q.all=function(v){var w=this;return new w(function(x,y){var z=[],aa=0;v.forEach(function(ba,ca){++aa;w.resolve(ba).then(function(da){if(!z.hasOwnProperty(ca)){z[ca]=da;--aa||x(z);}},y);});aa||x(z);});};q.race=function(v){var w=this;return new w(function(x,y){v.forEach(function(z){w.resolve(z).then(x,y);});});};q.resolve=function(v){return v instanceof q&&v.constructor===this?v:new this(function(w){w(v);});};q.reject=function(v){return new this(function(w,x){x(v);});};var t=q.prototype;t.then=function(v,w){var x,y,z=new this.constructor(function(ca,da){x=ca;y=da;});if(typeof x!=="function")throw new TypeError('Uncallable Promise resolve function');if(typeof y!=="function")throw new TypeError('Uncallable Promise reject function');if(v===h||v===null)v=o;if(w===h||w===null)w=p;var aa=n(this),ba=aa.state;if(ba===j){aa.fulfillReactions.push(u(x,y,v));aa.rejectReactions.push(u(x,y,w));}else if(ba===k||ba===l)i(u(x,y,ba===k?v:w,aa.result));return z;};function u(v,w,x,y){var z=arguments.length>3;return function(aa){try{aa=x(z?y:aa);}catch(ba){w(ba);return;}v(aa);};}t["catch"]=function(v){return this.then(h,v);};t.toString=function(){return '[object Promise]';};return q;}(Function('return this')()));},null);
__d("throwImmediate",["setImmediate"],function(a,b,c,d,e,f,g){'use strict';function h(j){throw j;}function i(j){g(h,j);}e.exports=i;},null);
__d("Promise",["ES6Promise","invariant","throwImmediate"],function(a,b,c,d,e,f,g,h,i){var j=g.prototype;j["finally"]=function(k){return this.then(k,k);};j.done=function(k,l){this.then(k,l).then(null,i);};g.allObject=function(k){h(!Array.isArray(k));var l=Object.keys(k);return g.all(l.map(function(m){return k[m];})).then(function(m){var n={};m.forEach(function(o,p){n[l[p]]=o;});return n;});};e.exports=g;},null);
__d("MComposerLoggerSpecialCases",["MarauderLogger","MComposerWaterfallEvent"],function(a,b,c,d,e,f,g,h){var i={};function j(event,k){i[event]=k;}j(h.COMPOSER_CANCEL,function(k){g.toggleModule('composer',false);return k;});j(h.COMPOSER_ENTRY,function(k){g.toggleModule('composer',true);return k;});j(h.COMPOSER_POST,function(k){switch(g.getNavigationModule()){case 'newsfeed':k.nectar_module='newsfeed_composer';break;case 'timeline':k.nectar_module='timeline_composer';break;default:k.nectar_module='unspecified_source';}g.toggleModule('composer',false);return k;});e.exports=i;},null);
__d("MComposerLogger",["ErrorUtils","MComposerConfig","MComposerWaterfallEvent","MCompositionConfigFields","MCompositionConfigStore","Promise","createObjectFrom","getObjectValues","invariant","memoize"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=m(n(i)),r=p(function(){return new l(function(u){if(h.ENABLE_LOGGING){d(['MarauderLogger','MComposerLoggerSpecialCases'],function(){for(var v=[],w=0,x=arguments.length;w<x;w++)v.push(arguments[w]);return u(v);});}else u();});});function s(event,u,v,w,x){var y=x[0],z=x[1];if(z.hasOwnProperty(event))u=z[event].call(null,u);y.log(event,'composer',u,null,null,v,w);}var t={log:g.guard(function(event,u){o(q.hasOwnProperty(event));if(k.isEmpty())return;var v=k.get(j.SESSION_ID,null);o(v!==null);return t.logWithSessionID(event,v,u);},'MComposerLogger',t),logWithSessionID:g.guard(function(event,u,v){if(h.ENABLE_LOGGING){return r().then(s.bind(null,event,v||{},u,Date.now()));}else return r();})};e.exports=t;},null);
__d("MComposerNavigationPolicy",["invariant"],function(a,b,c,d,e,f,g){function h(j){j.forEach(function(k){return k.call();});}function i(j){"use strict";this.$MComposerNavigationPolicy0=false;this.$MComposerNavigationPolicy1=false;this.$MComposerNavigationPolicy2=false;this.$MComposerNavigationPolicy3=[];this.$MComposerNavigationPolicy4=[];this.$MComposerNavigationPolicy5=[];this.$MComposerNavigationPolicy6=[];this.$MComposerNavigationPolicy7=[];this.$MComposerNavigationPolicy8=j||null;}i.prototype.addOnClose=function(j){"use strict";this.$MComposerNavigationPolicy4.push(j);return this;};i.prototype.addOnCloseByBrowser=function(j){"use strict";this.$MComposerNavigationPolicy3.push(j);return this;};i.prototype.addOnOpen=function(j){"use strict";this.$MComposerNavigationPolicy6.push(j);return this;};i.prototype.addOnOpenChild=function(j){"use strict";this.$MComposerNavigationPolicy7.push(j);return this;};i.prototype.addOnReturnFromChild=function(j){"use strict";this.$MComposerNavigationPolicy5.push(j);return this;};i.prototype.close=function(){"use strict";g(this.$MComposerNavigationPolicy1);g(!this.$MComposerNavigationPolicy0);this.$MComposerNavigationPolicy0=true;h(this.$MComposerNavigationPolicy4);if(this.$MComposerNavigationPolicy8)this.$MComposerNavigationPolicy8.returnFromChild();return this;};i.prototype.closeByBrowser=function(){"use strict";h(this.$MComposerNavigationPolicy3);this.close();return this;};i.prototype.destroy=function(){"use strict";if(this.$MComposerNavigationPolicy8){this.$MComposerNavigationPolicy8.destroy();this.$MComposerNavigationPolicy8=null;}};i.prototype.setIsOnSubmit=function(){"use strict";this.$MComposerNavigationPolicy2=true;};i.prototype.isOnSubmit=function(){"use strict";return this.$MComposerNavigationPolicy2;};i.prototype.getParent=function(){"use strict";return this.$MComposerNavigationPolicy8;};i.prototype.hasClosed=function(){"use strict";return this.$MComposerNavigationPolicy0;};i.prototype.hasOpened=function(){"use strict";return this.$MComposerNavigationPolicy1;};i.prototype.open=function(){"use strict";g(!this.$MComposerNavigationPolicy1);this.$MComposerNavigationPolicy1=true;if(this.$MComposerNavigationPolicy8)this.$MComposerNavigationPolicy8.openChild();h(this.$MComposerNavigationPolicy6);return this;};i.prototype.openChild=function(){"use strict";h(this.$MComposerNavigationPolicy7);return this;};i.prototype.returnFromChild=function(){"use strict";h(this.$MComposerNavigationPolicy5);return this;};e.exports=i;},null);
__d("MComposerNavigation",["MComposerNavigationConstants","MComposerNavigationPolicy","MHistory","MURI","Stratcom","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m='mds',n='composer';function o(){l(!p||p.hasOpened());}var p=null,q={currentPolicy:function(){o();return p;},newPolicy:function(){o();if(!p&&g.USE_PUSH_STATE)i.pushSoftState(n);var s=new h(p);p=s;s.addOnClose(function(){p=s.getParent();if(!p&&!s.isOnSubmit()&&g.USE_PUSH_STATE)i.popSoftState(n);});return s;},cleanupSoftState:function(){if(g.USE_PUSH_STATE)i.popSoftState(n);}},r=false;if(g.USE_PUSH_STATE)k.listen('m:history:change',null,function(event){var s=event.getData().soft;if(!p||s===n)return;var t=new j(event.getData().path).getQueryData().hasOwnProperty(m);if(!r&&t){r=true;p.openChild();return;}if(r&&!t){r=false;i.pushSoftState(n);p.returnFromChild();return;}if(r&&t)return;if(p.getParent())i.pushSoftState(n);p.closeByBrowser();});k.listen('m:page:unload',null,function(){if(p&&p.destroy)p.destroy();p=null;});e.exports=q;},null);
__d("MComposerPresence",["DataStore","DOM","EventEmitter","$","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){var l='REGISTERED',m=null,n=new i(),o={addRegistrationListener:function(p){return n.addListener(l,p);},hasRegisteredInstance:function(){return !!m;},hasLoadedPrivacyValue:function(p){if(!this.hasRegisteredInstance())return false;return h.scry(h.find(j('static_templates'),'div','composer-main-view'),'tr','privacy-option').some(function(q){return g.get(q).value===p;});},register:function(p){k(!m);m=p;n.emit(l);},unregister:function(p){k(m===p);m=null;}};e.exports=o;},null);
__d("MComposerAsyncLoadRequest",["MComposerPresence","MRequest","Promise","XComposerAsyncLoaderControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j){function k(){"use strict";this.$MComposerAsyncLoadRequest0=null;this.$MComposerAsyncLoadRequest1=null;this.$MComposerAsyncLoadRequest2=null;}k.prototype.$MComposerAsyncLoadRequest3=function(){"use strict";if(this.$MComposerAsyncLoadRequest0){this.$MComposerAsyncLoadRequest0.remove();this.$MComposerAsyncLoadRequest0=null;}if(this.$MComposerAsyncLoadRequest2){this.$MComposerAsyncLoadRequest2.abort();this.$MComposerAsyncLoadRequest2=null;}};k.prototype.$MComposerAsyncLoadRequest4=function(){"use strict";return new i(function(l,m){this.$MComposerAsyncLoadRequest0=g.addRegistrationListener(l);this.$MComposerAsyncLoadRequest2=new h(new j().getURI());this.$MComposerAsyncLoadRequest2.listen('fail',m);this.$MComposerAsyncLoadRequest2.send();}.bind(this));};k.prototype.send=function(){"use strict";if(!this.$MComposerAsyncLoadRequest1){this.$MComposerAsyncLoadRequest1=this.$MComposerAsyncLoadRequest4();this.$MComposerAsyncLoadRequest1['finally'](function(){return this.$MComposerAsyncLoadRequest3();}.bind(this));}return this.$MComposerAsyncLoadRequest1;};e.exports=k;},null);
__d("MComposerEntry",["DataStore","ErrorUtils","LoadingIndicator","MComposerAsyncLoadRequest","MComposerDataStoreKeys","MComposerPresence","MComposerSigils","MComposition","Promise","Stratcom"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=new o(function(aa,ba){return ba();}),r=new o(function(aa){return aa();}),s=h.guard(function(aa){if(aa)throw aa;},'MComposerEntry');function t(event){if(y)return;z.invoke(new n(g.get(event.getNode(m.ENTRY_TRIGGER))[k.COMPOSITION]));}function u(aa){y=true;var ba=null;if(l.hasRegisteredInstance()){ba=x(aa);}else ba=w(aa).then(function(){return x(aa);},s);ba['finally'](function(){return y=false;});return ba;}function v(){if(l.hasRegisteredInstance())return r;return new j().send();}function w(aa){i.show();var ba=v();ba['finally'](function(){return i.hide();});return ba;}function x(aa){return new o(function(ba,ca){var da={};da[k.COMPOSITION]=aa.serialize();da[k.ON_CANCEL]=ca;da[k.ON_SUBMIT]=ba;p.invoke('MComposer:entry:js',null,da);});}var y=false;p.listen('click',m.ENTRY_TRIGGER,t);p.listen('m:page:unload',null,function(){y=false;});var z={invoke:function(aa){if(y)return q;return u(aa||new n());}};e.exports=z;},null);
__d("MEditComposerEntry",["MComposition","MComposerLogger","MComposerWaterfallEvent","MComposerEntry","MComposerNavigation","MRequest"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={invoke:function(n,o,p){var q=new g(n),r=new l(o);j.invoke(q).then(function(s){s.xc_edit_callsite=p;var t=s.csid;r.listen('done',this._onSuccess.bind(this,t));r.listen('error',this._onError.bind(this,t));r.setData(s);r.setAutoRetry(true);r.setMethod('POST');r.listen('postprocess',function(u){k.cleanupSoftState();});r.send();}.bind(this));},_onSuccess:function(n){if(!h.logWithSessionID)return;h.logWithSessionID(i.COMPOSER_POST_SUCCESS,n);},_onError:function(n){if(!h.logWithSessionID)return;h.logWithSessionID(i.COMPOSER_POST_FAILURE,n);}};e.exports=m;},null);
__d("DocumentSnapShot",["ErrorUtils"],function(a,b,c,d,e,f,g){var h;if('nextElementSibling' in document.documentElement){h=function(k){return k.nextElementSibling;};}else h=function(k){var l=k.nextSibling;while(l&&l.nodeType!==1)l=l.nextSibling;return l;};function i(k,l,m){var n=k,o=0,p=1,q=p,r=0,s,t=[];while(!(r===0&&q===o))switch(q){case p:s=false;s=m?g.applyWithGuard(m,a,[n],null,'traverse-filter'):true;t.push([r,n]);if(s)while(t.length>0)g.applyWithGuard(l,a,t.shift(),null,'traverse-walker');if(n.children.length>0){n=n.children[0];r++;}else q=o;break;case o:if(!s)t.pop();if(h(n)){n=h(n);q=p;}else{n=n.parentNode;r--;}break;}}function j(k){var l=[],m=function(o,p){l.push(new Array(o+1).join('  ')+p.tagName.toLowerCase()+(p.id?' id="'+p.id+'"':'')+(p.className?' class="'+p.className+'"':'')+(p.hasAttribute('data-sigil')?' sigil="'+p.getAttribute('data-sigil')+'"':''));},n=function(o){return !!(o.id||o.className||o.hasAttribute('data-sigil'));};i(k||document.documentElement,m,n);return l.join('\n');}e.exports.capture=j;},null);
__d("MBugNub",["DOM","ErrorUtils","LogHistory","MBugNubConfig","MURI","Stratcom","DocumentSnapShot"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n,o,p=[],q=[],r=[],s=a.location;if(j.uri)n=new k(j.uri).getPath();l.listen('history:change',null,function(fa){if(!t())s=a.location;});function t(fa){var ga=new k(n),ha=new k(fa||a.location);return (ha.normalize().getPath()===ga.normalize().getPath());}function u(fa){if(!j.graph_search||!j.search||!j.graph_search_feedback)return false;var ga=(new k(j.graph_search)).getPath(),ha=(new k(j.search)).getPath(),ia=new k(fa||a.location),ja=ia.normalize().getPath();return (ja.lastIndexOf(ga)===0||ja.lastIndexOf(ha)===0);}function v(){return x(j.graph_search_feedback);}function w(fa,ga,ha){return x(n,fa,ga,ha);}function x(fa,ga,ha,ia){var ja=new k(fa);ja.addQueryData('uri',new k(s).normalize().toString());ja.addQueryData('source',ga);ja.addQueryData('description',ha);ja.addQueryData('st',ia);return ja.toString();}function y(){if(a.FB_GKS.m_js_html_snapshot)o=m.capture();r=i.getEntries().slice();}function z(){return o;}function aa(fa){return r.slice(fa?Math.max(r.length-fa,0):0);}function ba(fa){p.push(fa);}function ca(fa){return p.slice(fa?Math.max(p.length-fa,0):0);}function da(fa,ga,ha,ia){var ja=document.getElementById(ga),ka=document.getElementById(ha),la=document.getElementById(ia),ma=document.getElementById(fa);if(ma){var na=z();if(na){var oa=g.find(ma,"input");oa.value=na;}else g.hide(ma);}var pa=ca(5);if(pa.length>0)ja.value='\n'+pa.map(function(ra){return ('  Message: '+ra.message+'\n'+(ra.guard?'  Guard: '+ra.guard+'\n':'')+(ra.stack?'  Stack: '+ra.stack+'\n':''));}).join('\n  --\n');var qa=aa(100);if(qa.length>0)ka.value='\n'+i.formatEntries(qa);if(q.length>0)la.value=JSON.stringify(q);}h.addListener(ba);function ea(fa,ga){q.push({queryId:fa,serialized:ga});}e.exports={isReportURI:t,getReportURI:w,isGraphSearchResult:u,getGraphSearchFeedbackURI:v,captureState:y,pushError:ba,fillValueInInputs:da,logFeedItem:ea};},null);
__d("BehaviorsMixin",["copyProperties"],function(a,b,c,d,e,f,g){function h(l){this._behavior=l;this._enabled=false;}g(h.prototype,{enable:function(){if(!this._enabled){this._enabled=true;this._behavior.enable();}},disable:function(){if(this._enabled){this._enabled=false;this._behavior.disable();}}});var i=1;function j(l){if(!l.__BEHAVIOR_ID)l.__BEHAVIOR_ID=i++;return l.__BEHAVIOR_ID;}var k={enableBehavior:function(l){if(!this._behaviors)this._behaviors={};var m=j(l);if(!this._behaviors[m])this._behaviors[m]=new h(new l(this));this._behaviors[m].enable();return this;},disableBehavior:function(l){if(this._behaviors){var m=j(l);if(this._behaviors[m])this._behaviors[m].disable();}return this;},enableBehaviors:function(l){l.forEach(this.enableBehavior.bind(this));return this;},destroyBehaviors:function(){if(this._behaviors){for(var l in this._behaviors)this._behaviors[l].disable();this._behaviors={};}},hasBehavior:function(l){return this._behaviors&&(j(l) in this._behaviors);}};e.exports=k;},null);
__d("UnicodeBidiDirection",["keyMirror"],function(a,b,c,d,e,f,g){"use strict";var h=g({NEUTRAL:true,LTR:true,RTL:true});h.isStrong=function(i){return i===h.LTR||i===h.RTL;};e.exports=h;},null);
__d("Locale",["Style","ExecutionEnvironment","UnicodeBidiDirection"],function(a,b,c,d,e,f,g,h,i){var j;function k(){if(!h.canUseDOM){j=false;}else if(j===undefined)j=('rtl'===g.get(document.body,'direction'));return j;}function l(){return k()?i.RTL:i.LTR;}var m={isRTL:k,getDirection:l};e.exports=m;},null);
__d("prefetchImage",[],function(a,b,c,d,e,f){function g(h,i){var j=new Image();j.onload=i;j.src=h;}e.exports=g;},null);
__d("SaveState",[],function(a,b,c,d,e,f){var g={SAVING:'saving',SAVED:'saved',UNSAVING:'unsaving',UNSAVED:'unsaved'};e.exports=g;},null);
__d("SaveStateHandler",["SaveState"],function(a,b,c,d,e,f,g){var h=null;function i(){"use strict";this.$SaveStateHandler0={};this.$SaveStateHandler1={};}i.prototype.addListener=function(j,k){"use strict";j.forEach(function(l){if(!this.$SaveStateHandler0[l])this.$SaveStateHandler0[l]=[];this.$SaveStateHandler0[l].push(k);},this);};i.prototype.setState=function(j,k){"use strict";j.forEach(function(l){this.$SaveStateHandler1[l]=k;if(!this.$SaveStateHandler0[l])return;var m=this.$SaveStateHandler0[l];m.forEach(function(n){try{n.call(window,k,l);}catch(o){}});},this);};i.prototype.getState=function(j){"use strict";var k={};j.forEach(function(l){k[l]=this.$SaveStateHandler1[l];},this);return k;};i.$SaveStateHandler2=function(){"use strict";if(!h)h=new i();return h;};i.listen=function(j,k){"use strict";this.$SaveStateHandler2().addListener(j,k);};i.getState=function(j){"use strict";return this.$SaveStateHandler2().getState(j);};i.saving=function(j){"use strict";this.$SaveStateHandler2().setState(j,g.SAVING);};i.saved=function(j){"use strict";this.$SaveStateHandler2().setState(j,g.SAVED);};i.unsaving=function(j){"use strict";this.$SaveStateHandler2().setState(j,g.UNSAVING);};i.unsaved=function(j){"use strict";this.$SaveStateHandler2().setState(j,g.UNSAVED);};i.isSaveAction=function(j){"use strict";var k=this.$SaveStateHandler2().getState(j);for(var l in k){var m=k[l];if(m==g.UNSAVED||m==g.UNSAVING)return true;}return false;};i.isInTransition=function(j){"use strict";var k=this.$SaveStateHandler2().getState(j);for(var l in k){var m=k[l];if(m==g.SAVING||m==g.UNSAVING)return true;}return false;};e.exports=i;},null);
__d("MActionBubbleHelper",["CSS","Stratcom","cx"],function(a,b,c,d,e,f,g,h,i){var j='enabled_action';e.exports.toggleActionBubbleItem=function(k,l){g.conditionClass(k,"_58a0",l);if(l){h.addSigil(k,j);}else h.removeSigil(k,j);};},null);
__d("MHideStoryActions",["$","Banzai","BanzaiLogger","copyProperties","CSS","cx","DOM","DataStore","MActionBubbleHelper","MAdsPrefsFeedback","MBugNub","MParent","MPageController","MRequest","MEditComposerEntry","SaveStateHandler","setTimeoutAcrossTransitions","Stratcom","URI","XAdsPreferencesAdInfoControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){var aa='storyFlyout',ba='appendPhotosStoryButton',ca='hideStoryButton',da='unfollowActorButton',ea='blockActorPostsButton',fa='markAsSpamStoryButton',ga='afroDirectAction',ha='removeStoryButton',ia='editHistoryButton',ja='editPostButton',ka='write-recommendation',la='editPostComposer',ma='publishNowButton',na='reschedulePostButton',oa='editPrivacyButton',pa='turnOffNotifButton',qa='zombieStoryButton',ra='reportBug',sa='aboutThisAdButton',ta='fitnessEditButton',ua='saveButton',va='getNotificationsButton',wa='stopNotificationsButton',xa='saved_for_later:caret_action',ya='click',za='imp',ab='hideStoryOnClick',bb='action-title',cb='action-subtitle',db='adsPreferences',eb='adsPreferencesFeedback',fb='moreOptions',gb='backButton',hb=[ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,ab,bb,db,eb],ib=5,jb='enabled_action',kb='unfold_action',lb='NFXResolveProblemAction',mb=false,nb=null;function ob(){clearTimeout(nb);mb=false;}x.listen('m:page:render:cache:start',null,function(){mb=true;clearTimeout(nb);nb=w(ob,50);x.listen('m:page:iui:response:complete',null,function(){ob();x.removeCurrentListener();});});x.listen('m:page:loading',null,ob);var pb={};function qb(jc){var kc=new y(jc);kc.removeQueryData('gfid');return kc.toString();}function rb(jc,kc){if(!mb)pb[qb(jc)]=kc;}function sb(jc){return pb[qb(jc)];}function tb(event,jc){var kc=jc.getCausalElement(),lc=n.get(kc),mc=ub(kc),nc=n.get(mc),oc=nc.linkdata,pc=null;if(event.getNode(ca)){pc=lc.hideURI;}else if(event.getNode(da)||event.getNode(ea)){pc=lc.hideAllURI;}else if(event.getNode(fa)){pc=lc.markAsSpamURI;}else if(event.getNode(ha)){pc=lc.removeURI;}else if(event.getNode(ia)){pc=lc.editHistoryURI;}else if(event.getNode(pa)){pc=lc.turnOffNotifURI;}else if(event.getNode(ga)){var qc=event.getNode(ga);pc=n.get(qc).uri;}else if(event.getNode(sa)){pc=lc.aboutThisAdURI;}else if(event.getNode(db)){pc=lc.adsPrefsURI;}else if(event.getNode(ma)){pc=lc.publishNowURI;}else if(event.getNode(na)){pc=lc.reschedulePostURI;}else if(event.getNode(ua)){var rc=v.isSaveAction(lc.saveInfo.objectIDs);pc=rc?lc.saveInfo.saveURI:lc.saveInfo.unsaveURI;}else if(event.getNode(va)||event.getNode(wa)){var sc=new y(lc.setNotificationsURI);sc.addQueryData('subscribe',!!event.getNode(va));pc=sc.toString();}var tc=new y(pc);tc.addQueryData('dom_id',mc.id);var uc=lc.hideParams;if(!uc){tc.addQueryData('_ft_',oc);return tc;}var vc=n.get(m.find(mc,'div','scroll-area')),wc=vc.scrollArea,xc=wc.getChildAtPageIndex(wc.getScrollPageIndex()),yc=n.get(m.find(xc,'*','hScrollingItem')),zc=uc[yc.position];tc.addQueryData(zc);var ad=n.get(xc).adId,bd=n.get(xc).linkdata;if(bd)oc=bd;if(ad){n.set(mc,{ai:ad});oc+=':ai.'+ad;}tc.addQueryData('_ft_',oc);return tc;}function ub(jc){var kc=r.bySigil(jc,'story-popup-metadata');return kc;}function vb(jc){if(jc===ua||jc===ga){return null;}else return jc;}function wb(event,jc){var kc;for(var lc=0;lc<hb.length;lc++){var mc=hb[lc];if(event.getNode(mc)){if(mc===ga){var nc=event.getNode(mc);kc=n.get(nc).option_name;}else if(mc===ua){var oc=n.get(event.getNode(aa)).layer,pc=n.get(oc.getCausalElement()).saveInfo,qc=v.isSaveAction(pc.objectIDs);kc=qc?'save':'unsave';}else kc=vb(mc);break;}}if(kc)xb(kc,'clk',jc);}function xb(jc,kc,lc){var mc,nc;if(lc){mc=lc.is_self_story;nc=lc.is_sponsored;}i.log('FeedStoryOptionMenuLoggerConfig',{option_name:jc,event_type:kc,is_sponsored:nc,is_self_story:mc});}function yb(jc,kc){if(kc){k.removeClass(jc,"_53l_");k.addClass(jc,"_53m0");}else{k.removeClass(jc,"_53m0");k.addClass(jc,"_53l_");}}function zb(jc,kc){var lc=n.get(jc);lc.uri=kc.uri;lc.option_name=kc.option_name;var mc=m.find(jc,'div',bb);mc.textContent=kc.title;var nc=m.scry(jc,'div',cb)[0];if(nc){var oc=kc.chevron_subtitle;if(oc){nc.textContent=oc;}else k.addClass(mc,"_320v");}var pc=m.scry(jc,'i')[0];if(pc)m.replace(pc,kc.icon);o.toggleActionBubbleItem(jc,true);if(kc.option_name===lb){x.addSigil(jc,kb);}else x.removeSigil(jc,kb);}function ac(jc,kc,lc,mc){for(var nc in kc)if(kc.hasOwnProperty(nc)){var oc=m.scry(jc,'*',nc)[0];if(oc){var pc=kc[nc];o.toggleActionBubbleItem(oc,pc);if(pc){var qc=vb(nc);if(qc)xb(qc,'imp',mc);switch(nc){case ba:var rc=n.get(oc);rc.dialogURI=lc.appendPhotosURI;break;case ja:var sc=n.get(oc);sc.dialogURI=lc.editPostURI;break;case ka:var tc=lc.rating_info,uc=n.get(oc);uc=j(uc,tc);n.set(oc,uc);break;case ma:var vc=n.get(oc);vc.dialogURI=lc.publishNowURI;break;case na:var wc=n.get(oc);wc.dialogURI=lc.reschedulePostURI;break;case oa:var xc=n.get(oc);xc.dialogURI=lc.editPrivacyURI;var yc=m.scry(oc,'i')[0];if(yc)m.replace(yc,lc.privacyIcon);break;case ia:var zc=n.get(oc);zc.dialogURI=lc.editHistoryURI;break;case ta:var ad=n.get(oc);ad.dialogURI=lc.fitnessEditURI;break;case ua:var bd=lc.saveInfo,cd=v.isSaveAction(bd.objectIDs),dd=v.isInTransition(bd.objectIDs),ed=m.find(oc,'div',bb);ed.textContent=cd?bd.saveTitle:bd.unsaveTitle;k.conditionClass(oc,"_kh1",dd);var fd=bd.logData;h.post(xa,{action:za,collection_id:fd.collection_id,surface:fd.surface,story_id:fd.story_id,is_save:cd,is_multi:fd.is_multi});if(cd){xb('save','imp',mc);}else xb('unsave','imp',mc);x.addSigil(oc,kb);break;case eb:var gd=m.scry(oc,'i')[0];if(gd){var hd=lc.adsPrefsFeedback?lc.adsPrefsIconActive:lc.adsPrefsIconPassive;m.replace(gd,hd);}break;case fb:x.addSigil(oc,kb);break;}}}}}function bc(){var jc=n.get(this.getCausalElement()),kc=this.getRoot();k.removeClass(kc,"_53m1");k.addClass(kc,"_53m2");var lc=jc.storyInfo;xb('root','clk',lc);var mc={};mc[fb]=!!jc.chevron_cleanup;mc[gb]=false;mc[ha]=!!jc.removeURI;mc[qa]=!!jc.zombieStoryURI&&!!jc.isEmployeeAccount;mc[ra]=!!jc.isEmployeeAccount;mc[sa]=!!jc.aboutThisAdURI;mc[ca]=!!jc.hideURI;var nc=jc.setNotificationsURI,oc=nc&&sb(nc);mc[va]=!oc;mc[wa]=!!oc;mc[ba]=!!jc.appendPhotosURI;var pc=!!jc.isEditComposer,qc=jc.rating_info,rc=!!jc.editPostURI;mc[ja]=rc&&!pc&&!qc;mc[la]=rc&&pc&&!qc;mc[ka]=rc&&!!qc;mc[ma]=!!jc.publishNowURI;mc[na]=!!jc.reschedulePostURI;mc[ia]=!!jc.editHistoryURI;mc[pa]=!!jc.turnOffNotifURI;mc[oa]=!!jc.editPrivacyURI;mc[fa]=!!jc.markAsSpamURI;mc[ta]=!!jc.fitnessEditURI;var sc=m.scry(kc,'*',ga);if(sc){var tc=jc.afroDirectActions;for(var uc=0;uc<sc.length;uc++){var vc=sc[uc];if(tc&&tc[uc]){zb(vc,tc[uc]);xb(tc[uc].option_name,'imp',lc);}else o.toggleActionBubbleItem(vc,false);}}mc[ua]=!!jc.saveInfo;mc[db]=!!jc.adID;mc[eb]=!!jc.adsPrefsIconActive;ac(kc,mc,jc,lc);if(!!jc.chevron_cleanup){var wc=0,xc=m.scry(kc,'*',kb);for(var yc=0;yc<xc.length;yc++)if(x.hasSigil(xc[yc],jb))wc++;var zc=m.scry(kc,'*',jb);for(var ad=0;ad<zc.length;ad++){var bd=zc[ad],cd=x.hasSigil(bd,kb);if(!cd)wc++;var dd=cd||(wc<=ib&&x.hasSigil(bd,ga));yb(bd,!dd);}if(zc.length<=ib){var ed=m.scry(kc,'*',fb)[0];if(ed)yb(ed,true);}}}function cc(event){var jc=n.get(event.getNode(aa)),kc=jc.layer,lc=kc.getCausalElement(),mc=ub(lc),nc=event.getNode(ab),oc=n.get(lc),pc=oc.storyInfo;wb(event,pc);if(event.getNode(qa)){window.open(n.get(lc).zombieStoryURI);kc.hide();return;}if(event.getNode(ra)){kc.hide();q.captureState();s.forceLoad(q.getReportURI('StoryChevron','',n.get(lc).serializedStory));return;}if(event.getNode(ia)){s.load(n.get(lc).editHistoryURI);kc.hide();return;}if(event.getNode(la)){u.invoke(oc.composition,oc.composer_uri,oc.edit_callsite);return;}if(event.getNode(db)){var qc=new z().setInt('ad_id',n.get(lc).adID).getURI();s.load(qc);kc.hide();return;}var rc=event.getNode(eb);if(rc){var sc=m.scry(rc,'i')[0],tc=n.get(lc).adID,uc=!n.get(lc).adsPrefsFeedback,vc=uc?n.get(lc).adsPrefsIconActive:n.get(lc).adsPrefsIconPassive;p.toggle(sc,vc,tc,uc);n.set(lc,{adsPrefsFeedback:uc});return;}var wc=event.getNode(fb);if(wc){k.removeClass(kc.getRoot(),"_53m2");k.addClass(kc.getRoot(),"_53m1");var xc=m.scry(kc.getRoot(),'*',gb)[0];if(xc)o.toggleActionBubbleItem(xc,true);return;}var yc=event.getNode(gb);if(yc){k.removeClass(kc.getRoot(),"_53m1");k.addClass(kc.getRoot(),"_53m2");o.toggleActionBubbleItem(yc,false);return;}var zc=tb(event,kc),ad=new t(zc.toString());if(event.getNode(ua)){var bd=n.get(lc).saveInfo,cd=v.isSaveAction(bd.objectIDs),dd=v.isInTransition(bd.objectIDs);if(dd)return;if(cd){v.saving(bd.objectIDs);}else v.unsaving(bd.objectIDs);ad.listen('error',function(){var gd=!v.isSaveAction(bd.objectIDs);if(gd){v.unsaved(bd.objectIDs);}else v.saved(bd.objectIDs);});var ed=bd.logData;h.post(xa,{action:ya,collection_id:ed.collection_id,surface:ed.surface,story_id:ed.story_id,is_save:cd,is_multi:ed.is_multi});}var fd=event.getNode(sa);if(fd){window.open(zc.toString());return;}ad.send();nc&&m.hide(mc);kc.hide();}function dc(jc,event){var kc=event.getNode('undo-content');if(kc){var lc=n.get(kc).storyDomID,mc=n.get(event.getTarget());if(mc&&mc.href){var nc=n.get(g(lc)),oc=nc.linkdata;if(nc.ai)oc+=':ai.'+nc.ai;var pc=(new y(mc.href)).addQueryData('_ft_',oc),qc=new t(pc.toString());qc.send();}if(jc)m.show(g(lc));m.hide(kc);}}var ec,fc;function gc(){return ec;}function hc(){ec=null;for(var jc=0,kc=fc.length;jc<kc;jc++)fc[jc].remove();fc.length=0;}function ic(jc,kc){var lc=false;if(ec){lc=ec.isShown();ec.destroy();hc();}ec=jc;var mc=ec.getRoot();x.addSigil(mc,aa);fc=[ec.addListener('beforeshow',bc,ec),m.listen(mc,'click',null,cc),x.listen('m:page:unload',null,hc),x.listen('click','undo-hide-button',dc.bind(this,true)),x.listen('click','unfab-button',dc.bind(this,false))];x.invoke('m:story:action-bubble-initialized',null,{menuNubID:kc,wasOpen:lc});}e.exports={init:ic,getActionBubble:gc,setNotificationState:rb};},null);
__d("MShareFlyout",["setTimeoutAcrossTransitions","csx","cx","DOM","DataStore","fbt","MCompositionConfigFields","MCompositionShareFields","MComposition","MComposerEntry","MComposerTypes","MCompositionStoreID","MModalDialog","MViewport","MRequest","Stratcom","Vector","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y='share-one-click-button',z="share-with-message-button",aa="share-in-a-private-message-button",ba='story-div',ca='uficontainer',da='m-ufi',ea='oneClickShareResult',fa=6000,ga='/a/sharer.php',ha='/sharer-dialog.php',ia,ja,ka,la,ma={},na={},oa=[],pa,qa;function ra(bb,cb,db){if(ia)return;pa=cb;ia=bb;qa=db;s.init();va();}function sa(){var bb=new u(ga);bb.setMethod('POST');bb.addData({m:'oneclick',privacyx:pa,sid:ja,shareID:ja,fs:ka});bb.send();ia.hide();}function ta(){if(qa){var bb={};bb[n.ID]=ja;bb[n.FEEDBACK_SOURCE]=ka;var cb={};cb[m.COMPOSER_TYPE]=q.SHARE;cb[m.COMPOSER_TITLE]=("\u5206\u4eab");cb[m.CONTEXTUAL_MESSAGE]=("\u5728\u4f60\u7684\u65f6\u95f4\u7ebf\u4e0a\u5206\u4eab");cb[m.PLACEHOLDER]=("\u5199\u4e9b\u4ec0\u4e48\u2026\u2026");cb[m.DISABLE_PHOTOS]=true;var db=t.getScrollTop();p.invoke(new o().setStoreData(r.CONFIG,cb).setStoreData(r.SHARE,bb))['finally'](function(){return t.scrollTo(0,db);});}else{s.open(new x(ha).setQueryData({fs:ka,sid:ja,_ft_:la}).toString());ia.hide();}}function ua(){s.open(new x(ha).setQueryData({fs:ka,m:'message',sid:ja}).toString());ia.hide();}function va(){oa=[ia.addListener('beforeshow',function(){var bb=ia.getCausalElement(),cb=k.get(bb);ja=cb&&cb.share_id;ka=cb&&cb.feedback_source;var db=new x(bb.href);la=db.getQueryData()._ft_;if(ja)ma[ja]=xa(bb);}),v.listen('click',y,sa),v.listen('click',z,ta),v.listen('click',aa,ua),v.listen('m:page:unload',null,wa)];}function wa(){ia=null;for(var bb in na)clearTimeout(na[bb]);na={};while(oa.length)oa.pop().remove();}function xa(bb){while(bb&&!v.hasSigil(bb,ca)&&!v.hasSigil(bb,da)&&!v.hasSigil(bb,ba))bb=bb.parentNode;var cb="_56be";if(bb.classList&&bb.classList.contains(cb)||bb.className&&' '+bb.className+' '.indexOf(' '+cb+' ')>-1)bb=bb.querySelector("._56bf");return bb;}function ya(bb,cb){var db=j.scry(bb,'div',ea);db[0]&&j.remove(db[0]);var eb=j.create('div',{className:"_4_m7"},cb);v.addSigil(eb,ea);j.appendContent(bb,eb);return eb;}function za(bb,cb){var db=ma[cb];delete ma[cb];if(!db)return;var eb=ya(db,bb),fb=w.getPos(db),gb=w.getDim(db).y,hb=t.getScrollTop(),ib=t.getScrollHeight();if(fb.y<hb||fb.y+gb>hb+ib)t.scrollTo(fb.x,fb.y-250);na[cb]=g(function(){delete na[cb];j.remove(eb);},fa);}function ab(bb,cb){var db=ma[cb];delete ma[cb];if(!db)return;if(w.getPos(db).y>=t.getScrollTop()){var eb=ya(db,bb);na[cb]=g(function(){delete na[cb];if(w.getPos(db).y>=t.getScrollTop())j.remove(eb);},fa);}}f.init=ra;f.onSuccess=ab;f.onFailure=za;},null);
__d("MContextualThing",[],function(a,b,c,d,e,f){var g=0,h={register:function(i,j){j.id=j.id||('ctxtlayer_'+g++);i.setAttribute('data-ownerid',j.id);},containsIncludingLayers:function(i,j){while(j){if(i.contains(j))return true;j=h.getContext(j);}return false;},getContext:function(i){var j;while(i){if(i.getAttribute&&(j=i.getAttribute('data-ownerid')))return document.getElementById(j);i=i.parentNode;}return null;}};e.exports=h;},null);
__d("MLayer",["setTimeoutAcrossTransitions","copyProperties","BehaviorsMixin","CSS","DataStore","DOM","MContextualThing","mixin","mixInEventEmitter","MTouchHelper","Stratcom"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=[],s={},t=n(i);for(var u in t)if(t.hasOwnProperty(u))w[u]=t[u];var v=t===null?null:t.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=t;function w(aa,ba){"use strict";this.$MLayer0=null;this.$MLayer1=false;this.$MLayer2=false;this.$MLayer3=null;this.config=aa||{};if(aa.layerid){if(s[aa.layerid])return;s[aa.layerid]=this;}this.configure(this.config,ba);var ca=this.config.addedBehaviors||[];this.enableBehaviors(this.getDefaultBehaviors().concat(ca));}w.prototype.configure=function(aa,ba){"use strict";this.$MLayer0=this.buildWrapper(aa,ba);q.addSigil(this.$MLayer0,'m-layer-root');var ca=aa.attributes;if(ca){if(ca.sigil){var da=ca.sigil.split(' ');da.forEach(function(fa){q.addSigil(this.$MLayer0,fa);},this);delete ca.sigil;}for(var ea in ca)this.$MLayer0.setAttribute(ea,ca[ea]);}if(aa.classNames)aa.classNames.forEach(function(fa){j.conditionClass(this.$MLayer0,fa,true);},this);if(aa.causalElement)this.$MLayer3=aa.causalElement;k.set(this.$MLayer0,{layer:this});};w.prototype.getDefaultBehaviors=function(){"use strict";return [];};w.prototype.getCausalElement=function(){"use strict";return this.$MLayer3;};w.prototype.setCausalElement=function(aa){"use strict";this.$MLayer3=aa;return this;};w.prototype.getInsertParent=function(){"use strict";return this.insertParent||document.body;};w.prototype.getRoot=function(){"use strict";return this.$MLayer0;};w.prototype.getContentRoot=function(){"use strict";return this.$MLayer0;};w.prototype.buildWrapper=function(aa,ba){"use strict";return ba;};w.prototype.setInsertParent=function(aa){"use strict";if(aa){if(this.$MLayer1&&aa!==this.getInsertParent()){l.appendContent(aa,this.getRoot());this.updatePosition();}this.insertParent=aa;}return this;};w.prototype.show=function(){"use strict";if(this.$MLayer1)return this;var aa=this.getRoot();this.emit('beforeshow');aa.style.visibility='hidden';aa.style.overflow='hidden';l.show(aa);l.appendContent(this.getInsertParent(),aa);if(this.updatePosition()!==false){this.$MLayer1=true;this.emit('show');q.invoke('Layer:show',null,this);g(function(){if(this.$MLayer1)r.push(this);}.bind(this));}else l.hide(aa);aa.style.visibility='';aa.style.overflow='';this.emit('aftershow');return this;};w.prototype.hide=function(){"use strict";if(this.$MLayer2||!this.$MLayer1||this.emit('beforehide')===false)return this;this.$MLayer2=true;if(this.emit('starthide')!==false)this.finishHide();return this;};w.prototype.conditionShow=function(aa){"use strict";return aa?this.show():this.hide();};w.prototype.finishHide=function(){"use strict";if(this.$MLayer1){r.splice(r.indexOf(this),1);this.$MLayer2=false;this.$MLayer1=false;l.hide(this.getRoot());this.emit('hide');q.invoke('m:layer:hide',null,this);}return this;};w.prototype.isShown=function(){"use strict";return this.$MLayer1;};w.prototype.updatePosition=function(){"use strict";return true;};w.prototype.updateIfShown=function(){"use strict";this.isShown()&&this.updatePosition();};w.prototype.isDestroyed=function(){"use strict";return this.destroyed;};w.prototype.destroy=function(){"use strict";if(this.destroyed)return;this.destroyed=true;this.finishHide();var aa=this.getRoot();l.remove(aa);this.destroyBehaviors();this.emit('destroy');q.invoke('Layer:destroy',null,this);delete k.get(aa).layer;this.$MLayer0=this.$MLayer3=null;if(this.config.layerid)delete s[this.config.layerid];this.config=null;};o(w,{destroy:true,blur:true,beforeshow:true,show:true,aftershow:true,beforehide:true,starthide:true,hide:true});h(w,{show:function(aa){aa.show();}});var x;function y(event){x=p.getTouchClientCoord(event);}function z(event){var aa=r.length;if(!aa)return;var ba=event.getTarget(),ca=event.getType();if(!document.documentElement.contains(ba))return;if(ca==='touchend'&&x){var da=p.getTouchClientCoord(event),ea=Math.sqrt(Math.pow(x.x-da.x,2)+Math.pow(x.y-da.y,2));x=null;if(ea>5)return;}while(aa--){var fa=r[aa];if(!fa.isShown())continue;var ga=fa.getContentRoot();if(m.containsIncludingLayers(ga,ba))return;var ha=fa.getCausalElement();if(ca==="touchend"&&(ha.contains(ba)||ha===ba))continue;if(fa.emit('blur')===false||fa.isShown())return;}}q.listen('touchstart',null,y);q.listen('click',null,z);q.listen('touchend',null,z);e.exports=w;},null);
__d("MLayerDestroyOnTransition",["Stratcom"],function(a,b,c,d,e,f,g){function h(i){"use strict";this.$MLayerDestroyOnTransition0=null;this.$MLayerDestroyOnTransition1=i;}h.prototype.enable=function(){"use strict";this.$MLayerDestroyOnTransition0=g.listen('m:page:unload',null,this.$MLayerDestroyOnTransition1.destroy.bind(this.$MLayerDestroyOnTransition1));};h.prototype.disable=function(){"use strict";this.$MLayerDestroyOnTransition0.remove();this.$MLayerDestroyOnTransition0=null;};e.exports=h;},null);
__d("MLayerHideOnBlur",[],function(a,b,c,d,e,f){function g(h){"use strict";this.$MLayerHideOnBlur0=null;this.$MLayerHideOnBlur1=null;this.$MLayerHideOnBlur2=h;}g.prototype.enable=function(){"use strict";this.$MLayerHideOnBlur0=[this.$MLayerHideOnBlur2.addListener('show',this.$MLayerHideOnBlur3.bind(this)),this.$MLayerHideOnBlur2.addListener('hide',this.$MLayerHideOnBlur4.bind(this))];if(this.$MLayerHideOnBlur2.isShown())this.$MLayerHideOnBlur3();};g.prototype.disable=function(){"use strict";this.$MLayerHideOnBlur4();while(this.$MLayerHideOnBlur0.length)this.$MLayerHideOnBlur0.pop().remove();this.$MLayerHideOnBlur0=null;};g.prototype.$MLayerHideOnBlur4=function(){"use strict";this.$MLayerHideOnBlur1&&this.$MLayerHideOnBlur1.remove();this.$MLayerHideOnBlur1=null;};g.prototype.$MLayerHideOnBlur3=function(){"use strict";this.$MLayerHideOnBlur1=this.$MLayerHideOnBlur2.addListener('blur',function(){this.$MLayerHideOnBlur2.hide();return false;}.bind(this));};e.exports=g;},null);
__d("MInputFocus",["setTimeoutAcrossTransitions","DOM","MJSEnvironment","MViewport"],function(a,b,c,d,e,f,g,h,i,j){var k={scrollTo:function(l,m){if(i.IS_APPLE_WEBKIT_IOS&&parseInt(i.OS_VERSION,10)>=6){h.hide(l);j.scrollTo(0,m);g(function(){h.show(l);l.setSelectionRange(l.selectionEnd,l.selectionEnd);},0);}else j.scrollTo(0,m);}};e.exports=k;},null);
__d("MCommentActionsFlyout",["DOM","DataStore","MModalDialog","MParent","MRequest","Stratcom","URI","MActionBubbleHelper"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o='editCommentSigil',p='deleteCommentSigil',q='hideCommentSigil',r='reportCommentSigil',s='commentFlyoutSigil';function t(da,ea,fa){var ga=g.find(da,'*',ea);n.toggleActionBubbleItem(ga,fa);}function u(da){var ea=j.bySigil(da,'comment-metadata');return ea;}function v(da,ea){var fa=h.get(ea);da.addQueryData('_ft_',fa.linkdata);}function w(da,ea){v(ea,da);var fa=new k(ea);fa.send();}function x(da,ea){i.open(ea);}function y(){var da=u(this.getCausalElement()),ea=this.getRoot(),fa=h.get(da);t(ea,o,!!(fa.editCommentURI));t(ea,p,!!(fa.deleteCommentURI));t(ea,q,!!(fa.hideCommentURI));t(ea,r,!!(fa.reportCommentURI));}function z(da){var ea=h.get(da.getNode(s)),fa=u(ea.layer.getCausalElement()),ga=h.get(fa);if(da.getNode(o)){w(fa,new m(ga.editCommentURI));}else if(da.getNode(p)){w(fa,new m(ga.deleteCommentURI));}else if(da.getNode(q)){w(fa,new m(ga.hideCommentURI));}else if(da.getNode(r))x(fa,new m(ga.reportCommentURI));ea.layer.hide();da.kill();}var aa,ba,ca=function(da){if(aa)return;aa=da;var ea=da.getRoot();l.addSigil(ea,s);ba=[l.listen('m:page:unload',null,function(){while(ba.length>0)ba.pop().remove();aa=null;}),da.addListener('beforeshow',y,da),g.listen(ea,'click',null,z)];};e.exports={registerFlyout:ca};},null);
__d("MFlyout",["CSS","DataStore","DOM","Locale","MContextualThing","MLayer","MParent","Stratcom","Vector","MJSEnvironment","copyProperties","cx","emptyFunction","mixInEventEmitter"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=52,v=26,w=10,x=22,y=3,z=400,aa=320,ba=['resize','m:schedulable:loaded','m:viewport:orientation-change','m:orientation-resize:complete','m:hideout:reflow','m:landscape-cover-crop:complete'],ca='flyout-causal';function da(ma,na,oa){return Math.min(oa,Math.max(na,ma));}function ea(){return document.body;}var fa=[];for(var ga in l)if(l.hasOwnProperty(ga))ia[ga]=l[ga];var ha=l===null?null:l.prototype;ia.prototype=Object.create(ha);ia.prototype.constructor=ia;ia.__superConstructor__=l;function ia(ma,na){"use strict";this._contentRoot=null;this._contentWrapper=null;this._nubNode=null;this._nubAlignment=null;this._content=null;this._contextNode=null;this._parentLayer=null;this._parentSubscription=null;this._orientation=null;this._orientationClass=null;this._width=null;l.call(this,ma,na);}ia.prototype.configure=function(ma,na){"use strict";ha.configure.call(this,ma,na);if(ma.context){this.setContext(ma.context);this.setParentSubscription();n.addSigil(this.getCausalElement(),ca);var oa=h.get(this.getCausalElement());oa.flyout=this;}this.setMargin(ma.margin);this.setPosition(ma.position);this.setNubAlign(ma.nubalign);this.setOffsetY(ma.offsetY);this._content=na;this.setWidth(ma.width);};ia.prototype.setWidth=function(ma){"use strict";this._width=ma;};ia.prototype._getLayerParentWidth=function(){"use strict";return o.getDim(this.getRoot().offsetParent).x;};ia.prototype.getMaxWidth=function(){"use strict";return Math.min(this._getLayerParentWidth(),p.IS_TABLET?aa:z);};ia.prototype._maxWidthIsApplicable=function(){"use strict";return this.getMaxWidth()!==this._getLayerParentWidth();};ia.prototype._isCustomWidth=function(){"use strict";return this._width==='auto'||this._maxWidthIsApplicable();};ia.prototype.applyWidth=function(){"use strict";var ma=this._contentRoot.style;ma.width='';ma.maxWidth='';if(this._maxWidthIsApplicable()){var na=this.getMaxWidth()+'px';if(this._width==='auto'){ma.maxWidth=na;}else ma.width=na;}g.conditionClass(this._contentRoot,"_556f",this._isCustomWidth());};ia.prototype.buildWrapper=function(ma,na){"use strict";this._nubNode=i.create('div',{className:"_5bn_"});this._backgroundNode=i.create('div',{className:"_5c0e"},this._nubNode);var oa=i.create('div',{className:"_5c0f"},na);this._contentRoot=i.create('div',{className:"_5bo0"},[this._backgroundNode,oa]);if(j.isRTL())this._contentRoot.style.direction='rtl';this._contentWrapper=i.create('div',{className:"_544k"},this._contentRoot);return i.create('div',{className:"_544l"},this._contentWrapper);};ia.prototype.setMargin=function(ma){"use strict";g.conditionClass(this._contentRoot,"_54wl",ma==='large');g.conditionClass(this._contentRoot,"_55kj",ma==='medium');};ia.prototype.getInsertParent=function(){"use strict";var ma=this.insertParent;if(!ma){var na=this.getContext();if(na)ma=m.bySigil(na,'context-layer-root')||ea();}return ma||ha.getInsertParent.call(this);};ia.prototype.setContent=function(ma){"use strict";this._content=ma;i.setContent(this._contentRoot,this._content);this.updateIfShown();return this;};ia.prototype.setContext=function(ma){"use strict";this._contextNode=ma;};ia.prototype.getCausalElement=function(){"use strict";return ha.getCausalElement.call(this)||this.getContext();};ia.prototype.setParentSubscription=function(){"use strict";var ma=this.getContext(),na=null,oa=ea().parentNode;while(ma!==oa){na=h.get(ma).layer;if(na)break;ma=ma.parentNode;}if(na===this._parentLayer)return;if(this._parentLayer&&this._parentSubscription){this._parentSubscription.remove();this._parentSubscription=null;}if(na)this._parentSubscription=na.subscribe('hide',this.hide.bind(this));this._parentLayer=na;};ia.prototype.setPosition=function(ma){"use strict";if(this.getOrientation().setDefaultPosition(ma)){this.getOrientation().setPosition(ma);this.updateIfShown();}return this;};ia.prototype.setNubAlign=function(ma){"use strict";ka(ma);this._nubAlignment=ma||'center';};ia.prototype.setOffsetY=function(ma){"use strict";ma=parseInt(ma,10);if(this.getOrientation().setDefaultOffsetY(ma))this.updateIfShown();return this;};ia.prototype.getOrientation=function(){"use strict";if(!this._orientation)this._orientation=new la();return this._orientation;};ia.prototype.getContentRoot=function(){"use strict";return this._contentRoot;};ia.prototype.getContent=function(){"use strict";return this._content;};ia.prototype.getContext=function(){"use strict";return this._contextNode;};ia.prototype.getContextBounds=function(){"use strict";return this.getContext().getBoundingClientRect();};ia.prototype.causalClickShow=function(){"use strict";this.getContent()&&this.show();};ia.prototype.show=function(){"use strict";if(this.isShown())return this;ha.show.call(this);if(this.isShown()){k.register(this.getRoot(),this.getContext());fa.push(this);if(!this.resizeListeners){var ma=this.updatePosition.bind(this);this.resizeListeners=ba.map(function(na){return n.listen(na,null,ma);});}}return this;};ia.prototype.finishHide=function(){"use strict";fa.splice(fa.indexOf(this),1);while(this.resizeListeners&&this.resizeListeners.length)this.resizeListeners.pop().remove();this.resizeListeners=null;n.invoke('m:flyout:close',null,{flyout:this});return ha.finishHide.call(this);};ia.prototype.updatePosition=function(){"use strict";var ma=this.getContext();if(!ma)return false;if(!ma.offsetParent)return false;this.applyWidth();this.emit('adjustDimensions');var na=this.getRoot(),oa=this.getOrientation();this.emit('adjust',oa.reset());this.updateWrapperClass(oa);var pa=na.offsetParent,qa=pa.getBoundingClientRect(),ra=this.getContextBounds(),sa=ra.left-qa.left,ta=ra.top-qa.top+pa.scrollTop;if(oa.getPosition()==='below')ta+=ra.height;var ua=this.getContentRoot(),va=0;if(this._isCustomWidth()){var wa=ua.clientWidth,xa=sa+Math.round(ra.width/2);va=da(Math.round(xa-wa/2),0,this._getLayerParentWidth()-wa);ua.style.left=va+'px';}else ua.style.left='';na.style.top=(ta+oa.getOffsetY())+'px';var ya=this._nubAlignment,za=sa;if(ra<v)ya='center';if(ya==='center'){za+=Math.round(ra.width/2);}else if(this._nubAlignment==='left'){za+=v/2;}else za+=ra.width-v/2;var ab=q({},ua.getBoundingClientRect());ab.left-=qa.left;var bb=y+v/2;za=da(za,ab.left+bb,ab.left+ab.width-bb);var cb=za-u/2-ab.left;this._nubNode.style.left=cb+'px';this.emit('reposition',oa);return true;};ia.prototype.updateNubPosition=function(ma){"use strict";if(this._nubNode)this._nubNode.style.left=ma+'px';};ia.prototype._toggleOrientationClass=function(ma,na){"use strict";g.conditionClass(this._contentWrapper,na||this._orientationClass,ma);};ia.prototype.updateWrapperClass=function(ma){"use strict";var na=ma.getClassName();if(na===this._orientationClass)return;if(this._orientationClass)this._toggleOrientationClass(false);this._orientationClass=na;this._toggleOrientationClass(true);};ia.prototype.simulateOrientation=function(ma,na){"use strict";var oa=ma.getClassName();if(oa===this._orientationClass){return na();}else{if(this._orientationClass)this._toggleOrientationClass(false);this._toggleOrientationClass(true,oa);var pa=na();this._toggleOrientationClass(false,oa);if(this._orientationClass)this._toggleOrientationClass(true);return pa;}};ia.prototype.destroy=function(){"use strict";ha.destroy.call(this);this._contextNode=null;this._contextSigil=null;this._contentRoot=null;this._contentWrapper=null;this._content=null;this._nubNode=null;this._width=null;return this;};t(ia,{adjustDimensions:true,adjust:true,reposition:true});var ja=s.thatReturnsArgument,ka=s.thatReturnsArgument;function la(){"use strict";this._default={_position:'above',_offsetY:0};this.reset();}la.prototype.setPosition=function(ma){"use strict";this._position=ja(ma);return this;};la.prototype.getOppositePosition=function(){"use strict";return la.OPPOSITE[this.getPosition()];};la.prototype.getPosition=function(){"use strict";return this._position||'above';};la.prototype.getOffsetY=function(){"use strict";var ma=this._offsetY||0;if(this._position==='above'){ma-=x;ma*=-1;}else if(this._position==='below')ma-=w;return ma;};la.prototype.getClassName=function(){"use strict";var ma=this.getPosition();if(ma==='below'){return "_5bo1";}else if(ma==='above')return "_5bo2";};la.prototype.reset=function(){"use strict";q(this,this._default);return this;};la.prototype.setDefaultPosition=function(ma){"use strict";var na=this._default._position;this._default._position=ja(ma);return na!==ma;};la.prototype.setDefaultOffsetY=function(ma){"use strict";var na=this._default._offsetY;this._default._offsetY=ma;return na!==ma;};la.OPPOSITE={above:'below',below:'above'};n.listen('click',ca,function(ma){h.get(ma.getNode(ca)).flyout.causalClickShow();});n.listen('click',['m-layer-root','mflyout-remove-on-click'],function(ma){var na=ma.getNode('m-layer-root');h.get(na).layer.hide();});e.exports=ia;},null);
__d("MActionBubbleLayout",["CSS","cx"],function(a,b,c,d,e,f,g,h){function i(j){"use strict";this.$MActionBubbleLayout0=null;this.$MActionBubbleLayout1=j;}i.prototype.enable=function(){"use strict";this.$MActionBubbleLayout0=this.$MActionBubbleLayout1.addListener('adjustDimensions',this.$MActionBubbleLayout2.bind(this));if(this.$MActionBubbleLayout1.isShown())this.$MActionBubbleLayout1.updatePosition();};i.prototype.disable=function(){"use strict";this.$MActionBubbleLayout0.remove();this.$MActionBubbleLayout0=null;if(this.$MActionBubbleLayout1.isShown())this.$MActionBubbleLayout1.updatePosition();};i.prototype.$MActionBubbleLayout2=function(){"use strict";var j=this.$MActionBubbleLayout1;this.$MActionBubbleLayout3(true);var k=this.$MActionBubbleLayout1.getContentRoot();if(k.clientWidth>=j.getMaxWidth())this.$MActionBubbleLayout3(false);};i.prototype.$MActionBubbleLayout3=function(j){"use strict";var k=this.$MActionBubbleLayout1;k.setWidth(j?'auto':'wide');k.applyWidth();g.conditionClass(k.getRoot(),"_55i0",j);};e.exports=i;},null);
__d("MFlyoutAutoFlip",["MViewport","MParent"],function(a,b,c,d,e,f,g,h){function i(j){"use strict";this.$MFlyoutAutoFlip0=null;this.$MFlyoutAutoFlip1=j;}i.prototype.enable=function(){"use strict";this.$MFlyoutAutoFlip0=this.$MFlyoutAutoFlip1.addListener('adjust',this.$MFlyoutAutoFlip2.bind(this));if(this.$MFlyoutAutoFlip1.isShown())this.$MFlyoutAutoFlip1.updatePosition();};i.prototype.disable=function(){"use strict";this.$MFlyoutAutoFlip0.remove();this.$MFlyoutAutoFlip0=null;if(this.$MFlyoutAutoFlip1.isShown())this.$MFlyoutAutoFlip1.updatePosition();};i.prototype.$MFlyoutAutoFlip2=function(j){"use strict";var k=this.$MFlyoutAutoFlip3(j),l={top:0,bottom:g.getUseableHeight()},m=h.bySigil(this.$MFlyoutAutoFlip1.getRoot(),'scroll-area');if(m){var n=m.getBoundingClientRect();l={top:Math.max(n.top,l.top),bottom:Math.min(n.bottom,l.bottom)};}var o,p,q=this.$MFlyoutAutoFlip1,r=q.getContext(),s=r.getBoundingClientRect();for(o=0;o<k.length;o++){j.setPosition(k[o]);p=q.simulateOrientation(j,function(){return q.getRoot().firstChild.getBoundingClientRect();});var t=s.top+j.getOffsetY();if(j.getPosition()==='above'){t-=p.height;}else if(j.getPosition()==='below')t+=s.height;var u={top:t,bottom:t+p.height};if(u.top>=l.top&&u.bottom<=l.bottom)return;}j.setPosition(k.indexOf('below')>-1?'below':k[0]);};i.prototype.$MFlyoutAutoFlip3=function(j){"use strict";return [j.getPosition(),j.getOppositePosition()];};e.exports=i;},null);
__d("MFlyoutContextSigil",["Stratcom","DataStore","DOM","ex"],function(a,b,c,d,e,f,g,h,i,j){var k={};function l(m){"use strict";this.$MFlyoutContextSigil0=null;this.$MFlyoutContextSigil1=m;}l.prototype.enable=function(){"use strict";var m=this.$MFlyoutContextSigil2();k[m];k[m]=this.$MFlyoutContextSigil1;this.$MFlyoutContextSigil0=g.listen('click',this.$MFlyoutContextSigil2(),this.$MFlyoutContextSigil3.bind(this));};l.prototype.disable=function(){"use strict";delete k[this.$MFlyoutContextSigil2()];this.$MFlyoutContextSigil0.remove();this.$MFlyoutContextSigil0=null;this.$MFlyoutContextSigil1=null;};l.prototype.$MFlyoutContextSigil2=function(){"use strict";var m=this.$MFlyoutContextSigil1.config;return m.causalSigil||m.contextSigil;};l.prototype.$MFlyoutContextSigil3=function(m){"use strict";var n=m.getNode(this.$MFlyoutContextSigil2()),o,p=this.$MFlyoutContextSigil1.config.contextSigil,q=this.$MFlyoutContextSigil1.config.causalSigil;if(q&&q!==p){var r=n;while(r&&r!==document.body&&!o)if(g.hasSigil(r,p)){o=r;}else{var s=i.scry(r,'*',p);o=s[0];r=r.parentNode;}}else o=n;if(this.$MFlyoutContextSigil1.getContext()!==o&&this.$MFlyoutContextSigil1.isShown()){this.$MFlyoutContextSigil1.hide();if(!this.$MFlyoutContextSigil1)return;}this.$MFlyoutContextSigil1.setCausalElement(n);this.$MFlyoutContextSigil1.setContext(o);h.get(n).flyout=this.$MFlyoutContextSigil1;if(!this.$MFlyoutContextSigil1.isShown())this.$MFlyoutContextSigil1.show();m.prevent();};e.exports=l;},null);