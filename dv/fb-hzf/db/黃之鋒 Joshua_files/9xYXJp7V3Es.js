/*!CK:3789771217!*//*1406651288,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["8g1Gg"]); }

__d("MCurationOneClickButton",["Banzai","CSS","DOM","DataStore","MLoadingIndicator","MRequest","SaveState","SaveStateHandler","Stratcom","cx","destroyOnUnload"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r="saved_for_later:click",s='curation-one-click-save-button',t='curation-one-click-unsave-button',u='curation-one-click-unsave-flyout',v='MCurationOneClickButton_instance',w="_5qgu",x="_5qgv",y=null;function z(aa,ba,ca,da,ea,fa,ga,ha){"use strict";this.$MCurationOneClickButton0=aa;this.$MCurationOneClickButton1=ba;this.$MCurationOneClickButton2=ca;this.$MCurationOneClickButton3=da;this.$MCurationOneClickButton4=ea;this.$MCurationOneClickButton5=fa;this.$MCurationOneClickButton6=ga;this.$MCurationOneClickButton7=ha;this.$MCurationOneClickButton8=false;this.$MCurationOneClickButton9(this.$MCurationOneClickButton0,s);this.$MCurationOneClickButton9(this.$MCurationOneClickButton0,u);var ia=fa.getContentRoot();this.$MCurationOneClickButton9(ia,t);z.$MCurationOneClickButtona();n.listen([ca],function(ja){switch(ja){case m.SAVING:h.removeClass(aa,w);h.addClass(ia,x);this.$MCurationOneClickButton8=true;break;case m.SAVED:h.removeClass(aa,w);h.removeClass(aa,x);h.removeClass(ia,x);this.$MCurationOneClickButton8=false;break;case m.UNSAVING:h.addClass(aa,w);h.addClass(aa,x);this.$MCurationOneClickButton8=true;break;case m.UNSAVED:h.addClass(aa,w);h.removeClass(aa,x);h.removeClass(ia,x);this.$MCurationOneClickButton8=false;break;}}.bind(this));}z.prototype.$MCurationOneClickButton9=function(aa,ba){"use strict";var ca={};ca[v]=this;var da=i.find(aa,'*',ba);j.set(da,ca);};z.prototype.$MCurationOneClickButtonb=function(){"use strict";this.$MCurationOneClickButtonc();if(!this.$MCurationOneClickButton8){this.$MCurationOneClickButtond(this.$MCurationOneClickButton3,function(){n.unsaved([this.$MCurationOneClickButton2]);}.bind(this));n.saving([this.$MCurationOneClickButton2]);}};z.prototype.$MCurationOneClickButtone=function(){"use strict";this.$MCurationOneClickButtonc();if(!this.$MCurationOneClickButton8){this.$MCurationOneClickButtond(this.$MCurationOneClickButton4,function(){n.saved([this.$MCurationOneClickButton2]);}.bind(this));n.unsaving([this.$MCurationOneClickButton2]);}};z.prototype.$MCurationOneClickButtond=function(aa,ba){"use strict";var ca=new l(aa);ca.listen('error',ba);ca.send();};z.prototype.$MCurationOneClickButtonc=function(){"use strict";this.$MCurationOneClickButton6&&this.$MCurationOneClickButton6.disableNux();this.$MCurationOneClickButton5&&this.$MCurationOneClickButton5.hide();};z.prototype.$MCurationOneClickButtonf=function(){"use strict";this.$MCurationOneClickButton7&&g.post(r,{og_object_id:this.$MCurationOneClickButton7.og_object_id,collection_id:this.$MCurationOneClickButton7.collection_id,surface:this.$MCurationOneClickButton7.surface,mechanism:this.$MCurationOneClickButton7.mechanism});k.init(this.$MCurationOneClickButton1);};z.handleSave=function(aa){"use strict";var ba=j.get(aa)[v];ba&&ba.$MCurationOneClickButtonb();};z.handleUnsave=function(aa){"use strict";var ba=j.get(aa)[v];ba&&ba.$MCurationOneClickButtone();};z.handleFlyout=function(aa){"use strict";var ba=j.get(aa)[v];ba&&ba.$MCurationOneClickButtonf();};z.$MCurationOneClickButtona=function(){"use strict";if(y)return null;y=[o.listen('click',s,function(aa){z.handleSave(aa.getNode(s));}),o.listen('click',t,function(aa){z.handleUnsave(aa.getNode(t));}),o.listen('click',u,function(aa){z.handleFlyout(aa.getNode(u));})];q(function(){while(y.length)y.pop().remove();y=null;});};e.exports=z;},null);