/*!CK:1011374218!*//*1415115547,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["kZM+j"]); }

__d("debounceCore",[],function(a,b,c,d,e,f){function g(h,i,j,k,l){k=k||setTimeout;l=l||clearTimeout;var m;function n(){for(var o=[],p=0,q=arguments.length;p<q;p++)o.push(arguments[p]);n.reset();m=k(function(){h.apply(j,o);},i);}n.reset=function(){l(m);};return n;}e.exports=g;},null);
__d("URLMatcher",[],function(a,b,c,d,e,f){var g='!"#%&\'()*,-./:;<>?@[\\]^_`{|}',h='\u2000-\u206F\u00ab\u00bb\uff08\uff09',i='(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])',j='(?:(?:ht|f)tps?)://',k='(?:(?:'+i+'[.]){3}'+i+')',l='\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]',m='(?:\\b)www\\d{0,3}[.]',n='[^\\s'+g+h+']',o='(?:(?:(?:[.:\\-_%@]|'+n+')*'+n+')|'+l+')',p='(?:[.][a-z]{2,4})',q='(?::\\d+){0,1}',r='(?=[/?#])',s='(?:'+'(?:'+j+o+q+')|'+'(?:'+k+q+')|'+'(?:'+l+q+')|'+'(?:'+m+o+p+q+')|'+'(?:'+o+p+q+r+')'+')',t='[/#?]',u='\\([^\\s()<>]+\\)',v='[^\\s()<>?#]+',w=new RegExp(s,'im'),x='^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]',y=new RegExp(x,'im'),z='(?:'+'(?:'+t+')'+'(?:'+'(?:'+u+'|'+v+')*'+')*'+')*',aa=new RegExp('('+'(?:'+s+')'+'(?:'+z+')'+')','im'),ba=new RegExp('('+'(?:'+j+o+q+')|'+'(?:'+m+o+p+q+')'+')'),ca=/[\s'";]/,da=new RegExp(t,'im'),ea=new RegExp('[\\s!"#%&\'()*,./:;<>?@[\\]^`{|}\u00ab\u00bb\u2000-\u206F\uff08\uff09]','im'),fa=new RegExp('[\\s()<>?#]','im'),ga=new RegExp('\\s()<>'),ha=function(oa){if(oa&&oa.indexOf('@')!=-1){return (ba.exec(oa))?oa:null;}else return oa;},ia=function(oa){return ja(oa,aa);},ja=function(oa,pa){var qa=(pa.exec(oa)||[])[1]||null;return ha(qa);},ka=function(oa){return w.exec(oa);},la=function(oa){return !ca.test(oa.charAt(oa.length-1));},ma=function(oa){do{var pa=w.exec(oa);if(!pa)return null;var qa=false;if(pa[0][0]==='['&&pa.index>0&&oa[pa.index-1]==='@'){var ra=y.exec(pa[0]);if(ra){qa=true;oa=oa.substr(pa.index+ra[0].length);}}}while(qa);var sa=oa.substr(pa.index+pa[0].length);if(sa.length===0||!(da.test(sa[0])))return ha(pa[0]);var ta=0,ua=0,va=1,wa=0,xa=ua;for(var ya=1;ya<sa.length;ya++){var za=sa[ya];if(xa===ua){if(za==='('){wa=wa+1;xa=va;}else if(da.test(za)||!(ea.test(za))){ta=ya;}else if(fa.test(za))break;}else if(za==='('){wa=wa+1;}else if(za===')'){wa=wa-1;if(wa===0){xa=ua;ta=ya;}}else if(ga.test(za))break;}return ha(pa[0]+sa.substring(0,ta+1));},na={};na.permissiveMatch=ia;na.matchToPattern=ja;na.matchHost=ka;na.trigger=la;na.match=ma;e.exports=na;},null);
__d("throttle",["copyProperties"],function(a,b,c,d,e,f,g){function h(j,k,l){return i(j,k,l,false,false);}g(h,{acrossTransitions:function(j,k,l){return i(j,k,l,true,false);},withBlocking:function(j,k,l){return i(j,k,l,false,true);},acrossTransitionsWithBlocking:function(j,k,l){return i(j,k,l,true,true);}});function i(j,k,l,m,n){if(k==null)k=100;var o,p,q=null,r=function(){p=Date.now();if(o){j.apply(l,o);o=null;q=setTimeout(r,k,!m);}else q=null;};return function s(){o=arguments;if(q===null||(Date.now()-p>k))if(n){r();}else q=setTimeout(r,0,!m);};}e.exports=h;},null);
__d("Tokenizer",["setTimeoutAcrossTransitions","CSS","DataStore","DOM","Stratcom","copyProperties","createDeprecatedProperties","destroyOnUnload","eventsMixinDeprecated"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(q){"use strict";this._containerNode=q;this._listeners=[];n(function(){while(this._listeners.length)this._listeners.pop().remove();this._listeners=null;}.bind(this));}p.prototype.start=function(){"use strict";this._orig=j.find(this._containerNode,'input','tokenizer-input');this._tokens=[];this._tokenMap={};var q=this.buildInput(this._orig.value);this._focus=q;var r=j.scry(this._containerNode,'div','tokenizer-input-container');r=r[0]||this._containerNode;this._listeners.push(j.listen(q,['click','focus','blur','keydown','keypress'],null,this.handleEvent.bind(this)),j.listen(r,'click',null,function(x){if(x.getNode('remove')){this._remove(i.get(x.getNode('token')).key);}else if(x.getTarget()==this._root)this.focus();}.bind(this)));var s=j.create('div');s.id=this._orig.id;h.conditionClass(s,'jx-tokenizer',true);s.style.cursor='text';this._root=s;s.appendChild(q);var t=this._typeahead;t.setInputNode(this._focus);t.start();var u=this._orig.parentNode;j.setContent(u,s);var v=this._initialValue||{};for(var w in v)this.addToken(w,v[w],u);j.appendContent(s,j.create('div',{style:{clear:'both'}}));this._redraw();};p.prototype.setInitialValue=function(q){"use strict";this._initialValue=q;return this;};p.prototype.setTypeahead=function(q){"use strict";q.setAllowNullSelection(false);q.removeListener();q.listen('show',function(r){if(this._tokenMap){var s=r.show,t=[];for(var u=0;u<s.length;++u){var v=s[u],w=j.scry(v,'a','typeahead-result')[0];if(w)w.removeAttribute('href');if(!(s[u].rel in this._tokenMap))t.push(s[u]);}s.length=0;s.push.apply(s,t);}}.bind(this));q.listen('choose',function(r){k.context().prevent();k.invoke('Tokenizer-addedtoken',null,r);if(this.addToken(r.rel,r.name,r)){if(this.shouldHideResultsOnChoose())this._typeahead.hide();this._typeahead.clear();this._redraw();this.focus();}}.bind(this));q.listen('query',function(r){if(r.length)k.context().prevent();}.bind(this));this._typeahead=q;n(this._typeahead.removeListener.bind(this._typeahead));return this;};p.prototype.shouldHideResultsOnChoose=function(){"use strict";return true;};p.prototype.handleEvent=function(q){"use strict";this._typeahead.handleEvent(q);if(q.getPrevented())return;if(q.getType()=='click'){if(q.getTarget()==this._root){this.focus();q.prevent();return;}}else if(q.getType()=='keydown'){this._onkeydown(q);}else if(q.getType()=='blur')this._redraw();};p.prototype.refresh=function(){"use strict";this._redraw(true);return this;};p.prototype._redraw=function(q){"use strict";var r=this._focus;if(r.value===this._lastvalue&&!q)return;this._lastvalue=r.value;var s=j.textMetrics(this._focus,'jx-tokenizer-metrics');s.y=null;s.x+=24;s.setDim(r);r.value=r.value;if(this._typeahead)this._typeahead.refresh();};p.prototype.addToken=function(q,r,s){"use strict";if(q in this._tokenMap)return false;var t=this._focus,u=this._root,v=this.buildToken(q,r,s);this._tokenMap[q]={value:r,key:q,node:v};this._tokens.push(q);u.insertBefore(v,t);return true;};p.prototype.clearTokens=function(){"use strict";for(var q in this._tokenMap){j.remove(this._tokenMap[q].node);delete this._tokenMap[q];}this.refresh();};p.prototype.removeToken=function(q){"use strict";if(q in this._tokenMap){j.remove(this._tokenMap[q].node);delete this._tokenMap[q];this._redraw(true);return true;}return false;};p.prototype.buildInput=function(q){"use strict";return j.create('input',{className:'jx-tokenizer-input',type:'text',autocomplete:'off',value:q});};p.prototype.buildToken=function(q,r,s){"use strict";var t=j.create('input',{type:'hidden',value:q,name:this._orig.name+'['+(this._seq++)+']'}),u=j.create('a',{className:'jx-tokenizer-x',sigil:'remove'},'\u00d7');return j.create('a',{className:'jx-tokenizer-token',sigil:'token',meta:{key:q}},[r,t,u]);};p.prototype.getTokens=function(){"use strict";var q={};for(var r in this._tokenMap)q[r]=this._tokenMap[r].value;return q;};p.prototype._onkeydown=function(q){"use strict";switch(q.getSpecialKey()){case 'tab':var r=this._typeahead.submit();if(this.getNextInput()){if(!r)this._focus.value='';g(function(){this.getNextInput().focus();}.bind(this),0);}break;case 'delete':if(!this._focus.value.length){var s;while(s=this._tokens.pop())if(this._remove(s))break;}break;case 'return':break;default:if(this.getLimit()&&Object.keys(this._tokenMap).length==this.getLimit())q.prevent();g(this._redraw.bind(this),0);break;}};p.prototype._remove=function(q){"use strict";var r=this.removeToken(q);if(r){this.focus();this.invoke('removed',q);}return r;};p.prototype.focus=function(){"use strict";var q=this._focus;j.show(q);g(function(){q.focus();},0);};o(p,['removed']);m(p,{limit:null,nextInput:null});l(p.prototype,{_containerNode:null,_root:null,_focus:null,_orig:null,_typeahead:null,_tokenid:0,_tokens:null,_tokenMap:null,_initialValue:null,_seq:0,_lastvalue:null});e.exports=p;},null);
__d("TypeaheadNormalizer",[],function(a,b,c,d,e,f){var g={normalize:function(h){return (''+h).toLocaleLowerCase().replace(/[\.,-\/#!$%\^&\*;:{}=\-_`~()]/g,'').replace(/ +/g,' ').replace(/^\s*|\s*$/g,'');}};e.exports=g;},null);
__d("TypeaheadInternationalNormalizer",["TypeaheadNormalizer"],function(a,b,c,d,e,f,g){var h={normalize:function(i){var j=h._charmap;return g.normalize(i).replace(/[\u00e0-\u0450]/g,function(k){return (k in j?j[k]:k);});},_charmap:{'\u00e0':'a','\u00e1':'a','\u00e2':'a','\u00e3':'a','\u00e4':'a','\u00e5':'a','\u00e6':'ae','\u00e7':'c','\u00e8':'e','\u00e9':'e','\u00ea':'e','\u00eb':'e','\u00ec':'i','\u00ed':'i','\u00ee':'i','\u00ef':'i','\u00f0':'d','\u00f1':'n','\u00f2':'o','\u00f3':'o','\u00f4':'o','\u00f5':'o','\u00f6':'o','\u00f8':'o','\u00f9':'u','\u00fa':'u','\u00fb':'u','\u00fc':'u','\u00fd':'y','\u00ff':'y','\u0153':'oe','\u0430':'a','\u0431':'b','\u0432':'v','\u0433':'g','\u0434':'d','\u0435':'e','\u0437':'z','\u0438':'i','\u0439':'j','\u043a':'k','\u043b':'l','\u043c':'m','\u043d':'n','\u043e':'o','\u043f':'p','\u0440':'r','\u0441':'s','\u0442':'t','\u0443':'u','\u0444':'f','\u0445':'h','\u0446':'c','\u0447':'ch','\u0448':'sh','\u044b':'y','\u044d':'e','\u044e':'u','\u044f':'ya'}};e.exports=h;},null);
__d("TypeaheadSource",["DOM","TypeaheadNormalizer","copyProperties","createDeprecatedProperties","eventsMixinDeprecated","ex"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(n){"use strict";n=n||{};this.disableLongerQueryCacheHit=n.disableLongerQueryCacheHit;this._raw={};this._lookup={};this._firstSeenOnValue={};this.setNormalizer(h.normalize);this._excludeIDs={};}m.prototype.bindToTypeahead=function(n){"use strict";this._changeListener=n.listen('change',this.didChange.bind(this));this._startListener=n.listen('start',this.didStart.bind(this));this._clearListener=n.listen('clear',this.didClear.bind(this));};m.prototype.unbindFromTypeahead=function(){"use strict";this._changeListener.remove();this._startListener.remove();this._clearListener.remove();this._clearListener=null;};m.prototype.didChange=function(n){"use strict";return;};m.prototype.didStart=function(){"use strict";return;};m.prototype.didClear=function(){"use strict";return;};m.prototype.clearCache=function(){"use strict";this._raw={};this._lookup={};};m.prototype.addExcludeID=function(n){"use strict";if(n)this._excludeIDs[n]=true;};m.prototype.removeExcludeID=function(n){"use strict";if(n)delete this._excludeIDs[n];};m.prototype.addResult=function(n,o){"use strict";n=(this.getTransformer()||this._defaultTransformer)(n);if(n.id in this._raw)return;this._raw[n.id]=n;this._firstSeenOnValue[n.id]=this._firstSeenOnValue[n.id]||o;var p=this.tokenize(n.tokenizable||n.name);for(var q=0;q<p.length;++q){this._lookup[p[q]]=this._lookup[p[q]]||[];if(Object.prototype.toString.call(this._lookup[p[q]])!=='[object Array]')throw new Error(l('Lookup entry was not an array. key: %s. value: %s',p[q],this._lookup[p[q]]));this._lookup[p[q]].push(n.id);}};m.prototype.waitForResults=function(){"use strict";this.invoke('waiting');return this;};m.prototype.getResult=function(n){"use strict";return this._raw[n];};m.prototype.emptyResults=function(){"use strict";return [];};m.prototype.getMatchedResults=function(n){"use strict";var o=[];if(n===''){o=this.emptyResults();}else{var p=n,q={},r={},s={},t={},u=this.getQueryExtractor();if(u)n=u(n);var v=this.tokenize(n),w=v[v.length-1];v.sort(function(fa,ga){return ga.length-fa.length;});for(var x=0;x<v.length;++x){if(v[x] in t){v.splice(x--,1);continue;}t[v[x]]=true;var y=v[x];for(var z in this._lookup){var aa=this.checkFragmentMatches(z,y,p,w);if(aa){if(!(z in s)){s[z]=true;}else continue;var ba=this._lookup[z];for(var ca=0;ca<ba.length;++ca){var da=ba[ca];if(!r[da])r[da]={};if(!(y in r[da])){r[da][y]=true;q[da]=(q[da]||0)+1;}}}}}for(var ea in q)if(q[ea]==v.length&&!this._excludeIDs[ea]&&(!this.disableLongerQueryCacheHit||!this._firstSeenOnValue[ea]||this._firstSeenOnValue[ea].length<=n.length))o.push(ea);}this.sortHits(n,o);return this.renderNodes(n,o);};m.prototype.checkFragmentMatches=function(n,o,p,q){"use strict";return n.substr(0,o.length)===o;};m.prototype.matchResults=function(n){"use strict";var o=this.getMatchedResults(n);this.invoke('resultsready',o);this.invoke('complete');};m.prototype.sortHits=function(n,o){"use strict";var p=[],q;for(q=0;q<o.length;q++)p.push(this._raw[o[q]]);var r=function(t,u){var v=t.sort||t.name,w=u.sort||u.name;return v.localeCompare(w);},s=this.getSortHandler()||function(t,u,v){u.sort(v);};s.call(this,n,p,r);o.splice(0,o.length);for(q=0;q<p.length;q++)o.push(p[q].id);};m.prototype.renderNodes=function(n,o){"use strict";var p=Math.min(this.getMaximumResultCount(),o.length),q=[];for(var r=0;r<p;r++)if(o[r] in this._raw){var s=this._raw[o[r]];if(!this.reactRendered)s=this.createNode(s);q.push(s);}return q;};m.prototype.createNode=function(n){"use strict";return g.create('a',{sigil:'typeahead-result',href:n.uri,name:n.name,rel:n.id,className:'jx-result'},n.display);};m.prototype.normalize=function(n){"use strict";return this.getNormalizer()(n);};m.prototype.tokenize=function(n){"use strict";n=this.normalize(n);if(!n.length)return [];return n.split(/\s/g);};m.prototype._defaultTransformer=function(n){"use strict";return {name:n[0],display:n[0],uri:n[1],id:n[2]};};k(m,['waiting','resultsready','complete','after_complete','initial_render','initial_results_ready','req_dispatch','req_sent','req_recv','unlock_render']);j(m,{normalizer:null,queryExtractor:null,transformer:null,maximumResultCount:5,sortHandler:null});i(m.prototype,{_raw:null,_lookup:null,_firstOnValue:null,_excludeIDs:null,_changeListener:null,_startListener:null,_clearListener:null,reactRendered:false});e.exports=m;},null);
__d("TypeaheadOnDemandSource",["setTimeoutAcrossTransitions","TypeaheadSource","copyProperties","createDeprecatedProperties"],function(a,b,c,d,e,f,g,h,i,j){for(var k in h)if(h.hasOwnProperty(k))m[k]=h[k];var l=h===null?null:h.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=h;function m(n,o){"use strict";h.call(this,o);this.uri=n;this.haveData={'':true};}m.prototype.didChange=function(n){"use strict";this.lastChange=Date.now();n=this.normalize(n);if(this.haveData[n]){this.matchResults(n);}else{this.waitForResults();g(this.sendRequest.bind(this,this.lastChange,n),this.getQueryDelay());}};m.prototype.sendRequest=function(){"use strict";throw new Error('Use MTypeaheadOnDemandSource!');};m.prototype.ondata=function(n,o,p){"use strict";if(p)for(var q=0;q<p.length;q++)this.addResult(p[q],o);this.haveData[o]=true;if(n!=this.lastChange)return;this.matchResults(o);};j(m,{queryDelay:125,auxiliaryData:{}});i(m.prototype,{uri:null,lastChange:null,haveData:null});e.exports=m;},null);
__d("TypeaheadCompositeSource",["TypeaheadSource","TypeaheadOnDemandSource","copyProperties"],function(a,b,c,d,e,f,g,h,i){for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(m){"use strict";g.call(this);this.sources=m;this.cacheSourceCount=m.length;this.delayRender=false;this.allowEmptyMergeKey=true;for(var n=0;n<this.sources.length;++n){var o=this.sources[n];o.listen('waiting',this.childWaiting.bind(this));o.listen('resultsready',this.childResultsReady.bind(this));o.listen('complete',this.childComplete.bind(this));if(o instanceof h){o.listen('req_dispatch',this.childRequestDispatch.bind(this));o.listen('req_sent',this.childRequestSent.bind(this));o.listen('req_recv',this.childRequestReceived.bind(this));o.listen('unlock_render',this.startRender.bind(this));if(o.enableImmediateReturnOfCachedResults===false)--this.cacheSourceCount;if(o.enableEagerSendRequest)this.delayRender=true;this.listen('initial_results_ready',o.setCacheResultsLength.bind(o));}}}l.prototype.didChange=function(m){"use strict";this.results=[];this.completeCount=0;this.readyCount=0;this.lockRender=true;for(var n=0;n<this.sources.length;++n)this.sources[n].didChange(m);};l.prototype.didStart=function(){"use strict";for(var m=0;m<this.sources.length;++m)this.sources[m].didStart();};l.prototype.didClear=function(){"use strict";this.results=[];};l.prototype.addExcludeID=function(m){"use strict";for(var n=0;n<this.sources.length;++n)this.sources[n].addExcludeID(m);};l.prototype.removeExcludeID=function(m){"use strict";for(var n=0;n<this.sources.length;++n)this.sources[n].removeExcludeID(m);};l.prototype.childWaiting=function(){"use strict";if(!this.results||!this.results.length)this.invoke('waiting');};l.prototype.childResultsReady=function(m){"use strict";this.results=this.mergeResults(this.results||[],m);++this.readyCount;if(this.readyCount==this.cacheSourceCount)this.invoke('initial_results_ready',this.countValidResults(this.results));if(!this.delayRender||!this.lockRender){this.invoke('resultsready',this.results);if(this.readyCount==this.cacheSourceCount)this.invoke('initial_render');}};l.prototype.childComplete=function(){"use strict";this.completeCount++;if(this.completeCount==this.sources.length){this.invoke('complete');this.invoke('after_complete');}};l.prototype.childRequestDispatch=function(m){"use strict";this.invoke('req_dispatch',m);};l.prototype.childRequestSent=function(){"use strict";this.invoke('req_sent');};l.prototype.childRequestReceived=function(m){"use strict";this.invoke('req_recv',m);};l.prototype.startRender=function(){"use strict";this.lockRender=false;this.invoke('resultsready',this.results);this.invoke('initial_render');};l.prototype.countValidResults=function(m){"use strict";var n=0;m.forEach(function(o){if(o[this.mergeKey])++n;},this);return n;};l.prototype.getResult=function(m){"use strict";var n;for(var o=0;o<this.sources.length;++o){n=this.sources[o].getResult(m);if(n!==undefined)break;}return n;};l.prototype.disableEmptyMergeKey=function(){"use strict";this.allowEmptyMergeKey=false;};l.prototype.mergeResults=function(m,n){"use strict";var o=[].concat(m);if(n.length===0)return o;var p={},q;for(q=0;q<m.length;++q)p[m[q][this.mergeKey]]=true;for(q=0;q<n.length;++q)if((this.allowEmptyMergeKey||n[q][this.mergeKey])&&!(n[q][this.mergeKey] in p))o.push(n[q]);return o;};i(l.prototype,{sources:null,results:null,completeCount:0,mergeKey:'rel'});e.exports=l;},null);
__d("TypeaheadPreloadedSource",["TypeaheadSource","copyProperties"],function(a,b,c,d,e,f,g,h){for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(l){"use strict";g.call(this);this.uri=l;}k.prototype.didChange=function(l){"use strict";if(this.ready){this.matchResults(l);}else{this.lastValue=l;this.waitForResults();}};k.prototype.didStart=function(){"use strict";throw new Error('Use MTypeaheadPreloadedSource!');};k.prototype.ondata=function(l){"use strict";for(var m=0;m<l.length;++m)this.addResult(l[m]);if(this.lastValue!==null)this.matchResults(this.lastValue);this.ready=true;};h(k.prototype,{ready:false,uri:null,lastValue:null});e.exports=k;},null);
__d("MDynaTemplate",["HTML","ex"],function(a,b,c,d,e,f,g,h){var i={_otag:'[[',_regexOtag:'\\[\\[',_regexCtag:'\\]\\]',_regexTag:0,_regexNewTag:0,_templates:{},_alias:{},_contains:function(j,k){return k.indexOf(i._otag+j)!=-1;},_escapeChar:function(j){switch(j){case "&":return "&amp;";case '"':return '&quot;';case "'":return '&#39;';case "<":return "&lt;";case ">":return "&gt;";default:return j;}},_escape:function(j){j=j===null?'':(''+j);return j.replace(/&(?!\w+;)|["'<>]/g,i._escapeChar);},registerTemplates:function(j){for(var k in j){var l=j[k];i._alias[l[0]]=l[1];i._templates[k]=l[1];}},renderToHtml:function(j,k){if(j.charAt(0)=='@')return i.renderToHtml(i._alias[j.substring(1)],k);if(i._contains('#',j)||i._contains('^',j))j=j.replace(i._regexTag,function(l,m,n,o){var p=k[n];p=(p&&p.__html!==undefined)?p.__html:p;if(m=='^'){if(!p||Array.isArray(p)&&p.length===0){return i.renderToHtml(o,k);}else return '';}else if(m=='#'){if(Array.isArray(p)){var q=[];for(var r=0;r<p.length;r++)q.push(i.renderToHtml(o,p[r]));return q.join('');}else if(p&&typeof p=='object'){return i.renderToHtml(o,p);}else if(!(typeof p=='function'))if(p)return i.renderToHtml(o,k);return '';}});if(!i._contains('',j))return j;return j.replace(i._regexNewTag,function(l,m,n){n=n.replace(/^\s*|\s*$/g,'');var o=k[n];if(!o||Array.isArray(o)&&o.length===0)return '';switch(m){case '>':if(o[0].charAt(0)=='@'){return i.renderToHtml(o[0],o[1]);}else if(!(o[0] in i._templates))return '';return i.renderToHtml(i._templates[o[0]],o[1]);case '%':break;default:if(window.HTML&&o instanceof g)return o.toString();return o.__html!==undefined?o.__html:i._escape(o);}});}};(function(){i._regexTag=new RegExp(i._regexOtag+'(\\^|\\#)\\s*(.+)\\s*'+i._regexCtag+'\n*([\\s\\S]+?)'+i._regexOtag+'\\/\\s*\\2\\s*'+i._regexCtag+'\\s*','mg');i._regexNewTag=new RegExp(i._regexOtag+'(>|\\[|%)?([^\\/#\\^]+?)\\1?'+i._regexCtag+'+','g');})();e.exports=i;},null);
__d("MTouchTransferFocus",["CSS","DOM","Stratcom","MViewport","DataStore"],function(a,b,c,d,e,f,g,h,i,j,k){var l='transfer-focus-container',m='focus-provider',n='focus-receiver',o='focused';i.listen(['click','touchend'],[l,m],function(p){var q=p.getNode(m),r=k.get(q);if(r.onclickIsSet)return;var s=p.getNode(l);q.onclick=function(){g.conditionClass(s,o,true);var t=h.scry(s,'input',n)[0];if(t){t.focus();var u=k.get(s);if(u.hideaddressbar)setTimeout(function(){if(j.getScrollTop()<1)j.scrollTo(0,1);},0);}};r.onclickIsSet=true;});i.listen('blur',[l,n],function(p){g.conditionClass(p.getNode(l),o,false);});},null);
__d("MTokenizer",["DOM","Tokenizer","copyProperties","createDeprecatedProperties","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){for(var m in h)if(h.hasOwnProperty(m))o[m]=h[m];var n=h===null?null:h.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=h;function o(p){"use strict";h.call(this,p);}o.prototype.buildInput=function(p){"use strict";var q=g.create('input',{type:'text',className:'jx-tokenizer-input',sigil:'tokenizer-input focus-receiver',placeholder:this.getPlaceholder(),value:p});q.setAttribute('autocomplete','off');q.setAttribute('autocapitalize','off');q.setAttribute('autocorrect','off');q.setAttribute('aria-label',"\u7ed3\u679c\u5217\u8868\u5c06\u5728\u4e0b\u9762\u663e\u793a");if(this.getPlaceholder()){this.placeholderWidth=o.estimatePlaceholderWidth(q)+'px';q.style.minWidth=this.placeholderWidth;}return q;};o.prototype.setLimitWidth=function(p){"use strict";this.limitWidth=p;};o.prototype.getLimitWidth=function(){"use strict";return this.limitWidth;};o.prototype.start=function(){"use strict";this._containerNode.tokenizer=this;h.prototype.start.call(this);if(this.getLabel()){var p=g.create('span',{className:'mTokenizerLabel'},this.getLabel());g.prependContent(this._root,p);}this.listen('removed',this.removedToken.bind(this));};o.prototype.removedToken=function(){"use strict";if(Object.keys(this._tokenMap).length===0){this._focus.placeholder=this.getPlaceholder();this._focus.style.minWidth=this.placeholderWidth;}if(this.hasMaxTokens&&this.getLimit()&&Object.keys(this._tokenMap).length<this.getLimit()){g.show(this._focus);this._typeahead._control.disabled=false;this._typeahead._stop=false;this._typeahead.refresh();this.hasMaxTokens=false;}};o.prototype.addToken=function(p,q,r){"use strict";if(this.hasMaxTokens)return false;var s=h.prototype.addToken.call(this,p,q,r);if(!this.hasMaxTokens&&this.getLimit()&&Object.keys(this._tokenMap).length>=this.getLimit()){this._typeahead.hide();this._typeahead.disable();g.hide(this._focus);this.hasMaxTokens=true;}return s;};o.prototype.removeToken=function(p){"use strict";var q=h.prototype.removeToken.call(this,p);q&&this.removedToken();return q;};o.prototype.buildToken=function(p,q,r){"use strict";var s=g.create('input',{type:'hidden',value:p,name:this._orig.name+'['+(this._seq++)+']'}),t=null;if(r.getAttribute('weak_reference'))t=g.create('i',{className:'mWeakReferenceIcon'});var u=this.getRemovableTokens()?g.create('span',{},'\u00a0\u00d7\u00a0'):null,v=g.create('a',{className:'touchable mCloseBtn',href:'#',sigil:'blocking-touchable remove'},u);v.setAttribute('aria-label',"\u79fb\u9664");this._focus.placeholder='';this._focus.style.minWidth=0;var w=(("mToken")+(this.getLimitWidth()?' '+"mTokenLimitWidth":'')+(r.getAttribute('weak_reference')?' '+"mTokenWeakReference":''));if(this.getLimitWidth())q=g.create('span',{className:'innerToken'},q);return g.create('span',{className:w,sigil:'token',meta:{key:p}},[t,q,s,v]);};o.prototype.getTypeahead=function(){"use strict";return this._typeahead;};o.prototype.focus=function(){"use strict";};o.estimatePlaceholderWidth=function(p){"use strict";var q=p.value;p.value=p.placeholder;var r=g.textMetrics(p,'jx-tokenizer-metrics');p.value=q;return r.x;};j(o,{label:null,placeholder:null,removableTokens:true});i(o.prototype,{placeholderWidth:null,hasMaxTokens:false});e.exports=o;},null);
__d("MTypeaheadCachableSource",["MCache","MRequest","MTypeaheadGKs","TypeaheadPreloadedSource","URI","MDeepCopy","copyProperties","createDeprecatedProperties","eventsMixinDeprecated"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=1209600000,q='1',r=i.mentions_memory_caching,s={};for(var t in j)if(j.hasOwnProperty(t))v[t]=j[t];var u=j===null?null:j.prototype;v.prototype=Object.create(u);v.prototype.constructor=v;v.__superConstructor__=j;function v(w,x){"use strict";j.call(this,w);this.sourceKey=x||null;}v.prototype.didStart=function(){"use strict";var w=this.ondata,x=v._bootstrapping;if(this.sourceKey){if(x[this.sourceKey]===true){v.listen('bootstrapped',function(z){z.source_key===this.sourceKey&&this.didStart();}.bind(this));return;}var y=v._fetchFromCache(this.sourceKey,this.uri);if(y){this.invoke('rawresultsready',y);w.call(this,y);return;}}this.sendRequest();};v.prototype.sendRequest=function(){"use strict";var w=v._bootstrapping;w[this.sourceKey]=true;var x=new h(this.uri).setMethod('GET').setIgnoreErrors(true);x.listen('done',function(y){y=y.payload||y;for(var z=0;z<y.length;++z)y[z].bootstrap=1;if(this.sourceKey){var aa=v.getKeyForSource(this.sourceKey),ba=v._getMCacheItem(aa),ca=v._getKeyAndBusterTokenFromURI(this.uri),da=ca.busterToken,ea=ca.cacheKey;ba.cachedKeys[ea]={cacheBusterToken:da,time:Date.now(),data:y};g.setItem(aa,ba);v._storeInMemoryCache(this.sourceKey,this.uri,ea+da);}this.invoke('rawresultsready',y);this.ondata.call(this,y);delete w[this.sourceKey];this.invoke('bootstrapped',{source_key:this.sourceKey});}.bind(this));x.listen('finally',function(){delete w[this.sourceKey];}.bind(this));x.listen('open',function(){var y=x.getTransport();y.withCredentials=true;if(window.FW_ENABLED&&!this.getNofwheaders()){y.setRequestHeader('FB_FW','1');if(window.FB_FW_VERSION)y.setRequestHeader('FB_FW_VERSION',window.FB_FW_VERSION);if(window.FB_FW_DEVICE)y.setRequestHeader('FB_FW_DEVICE',window.FB_FW_DEVICE);}}.bind(this));if(this.getAuxiliaryData())x.setData(this.getAuxiliaryData());x.send();};v._getMCacheItem=function(w){"use strict";var x=g.getItem(w);if(!x||x.cacheVersion!==q){x={cacheVersion:q,cachedKeys:{}};g.setItem(w,x);}var y=x.cachedKeys,z=false,aa=Date.now()-p;for(var ba in y)if(y[ba].time<aa){z=true;delete y[ba];}if(z)g.setItem(w,x);return x;};v._getKeyAndBusterTokenFromURI=function(w){"use strict";var x=new k(w),y=x.getQueryData(),z=y.cacheBust;if(!z)x.addQueryData('noBust','');x.removeQueryData('cacheBust');var aa=x.toString();return {cacheKey:aa,busterToken:z};};v._fetchFromCache=function(w,x){"use strict";var y=v._getKeyAndBusterTokenFromURI(x),z=y.busterToken,aa=y.cacheKey,ba=aa+z;if(r&&v._inMemoryCache[ba])return l(v._inMemoryCache[ba]);var ca=v.getKeyForSource(w),da=v._getMCacheItem(ca),ea=da.cachedKeys[aa];if(ea&&ea.cacheBusterToken===z){v._storeInMemoryCache(w,x,ba);return ea.data;}return null;};v._storeInMemoryCache=function(w,x,y){"use strict";if(!r||s[y])return;s[y]=setTimeout(function(){var z=v._fetchFromCache(w,x);if(z)v._inMemoryCache[y]=z;delete s[y];},50);};o(v,['bootstrapped','rawresultsready']);n(v,{nofwheaders:false,showSecondaryAction:false,auxiliaryData:{}});m(v,{_KEY:'typeahead',getKeyForSource:function(w){return v._KEY+'_'+w;},_bootstrapping:{},_inMemoryCache:{}});m(v.prototype,{sourceKey:null});e.exports=v;},null);
__d("MTypeaheadHelpers",["CSS","DOM","DataStore","HTML","MDynaTemplate","FWLoader"],function(a,b,c,d,e,f,g,h,i,j,k){var l=b('FWLoader').FW,m=43,n={getSecondaryAction:function(o){if(o.action=='phone'){return this.getPhoneAction(o);}else if(o.action=='add_friend'){return this.getAddAction(o);}else if(o.action=='add_contact'){return this.getAddContactAction(o);}else if(o.action=='message')return this.getMessageAction(o);return null;},getPhoneAction:function(o){if(!o.paths||!(o.paths.mobile||o.paths.sms))return null;var p=k.renderToHtml('@CallButtonTemplate',{call_uri:o.paths.mobile,call_style:o.paths.mobile?'':'display:none;',sms_uri:o.paths.sms,sms_style:o.paths.sms?'':'display:none;'});return new j(p);},getAddAction:function(o){if(!o.paths||!o.paths[o.action])return null;return new j(o.paths[o.action]);},getAddContactAction:function(o){if(!o.paths||!o.paths[o.action])return null;return o.paths[o.action];},getMessageAction:function(o){var p=k.renderToHtml('@MessageButtonTemplate',{message_uri:o.paths.message});return new j(p);},determineIconSize:function(o,p){var q=p.photoSize||m,r=p.photo,s=new Image(),t=function(u){var v=this;if(u.type==='load'){var w=document.getElementById(v.targetID);if(w){if(v.naturalWidth>q||v.naturalHeight>q){var x=window.devicePixelRatio,y=Math.round(v.naturalHeight/x),z=Math.round(v.naturalWidth/x);y=Math.min(y,q);z=Math.min(z,q);w.style.backgroundSize=z<y?z+'px auto':'auto '+y+'px';}w.style.backgroundImage='url('+v.src+')';}}v.onload=null;v.onerror=null;v.targetID=null;};s.targetID=o;s.onload=t;s.onerror=t;s.src=r;},createNode:function(o,p){var q=[];if(o.photo){var r=h.create('div',{className:'profile-icon'});q.push(r);this.determineIconSize(h.uniqID(r),o);}var s=[o.display];if(o.verified)s.push(o.verified);var t=h.create('i',{className:'img presence',sigil:'presence'},'');h.hide(t);s.push(t);var u=h.create('span',{className:'mfsl'},s);q.push(u);if(!o.photo)g.conditionClass(u,'noimage',true);var v=o.subtext;g.conditionClass(u,'name',true);if(o.action!='add_friend')if(o.type&&(o.type!='user'))v=v?o.type+' '+String.fromCharCode(183)+' '+v:o.type;if(v)q.push(h.create('span',{className:'subtext mfss fcg'},v));var w={href:o.uri,name:o.display||o.name,className:'primary touchable',sigil:'touchable typeahead-result',rel:o.id};if(o.meta)w.meta=o.meta;var x=h.create('a',w,q);x.setAttribute("data-testid",o.id);if(o.weak_reference)x.setAttribute('weak_reference',true);if(o.renderType)x.setAttribute('renderType',o.renderType);if(window.FW_ENABLED&&l.isIOS())i.set(x,{nativeClick:true});if(o.bootstrap)i.set(x,{bootstrap:1});if(o.gender)i.set(x,{gender:o.gender});if(o.untranslatedType)i.set(x,{type:o.untranslatedType});if(o.openinnewtab)x.setAttribute('target','_blank');var y=[x];if(p){var z=this.getSecondaryAction(o);if(z)y.push(z);}if(o.nativethirdpartyappicon)y.push(new j(k.renderToHtml('@NativeThirdPartyAppIconTemplate')));var aa='jx-result';if(o.nativethirdpartyappicon||(p&&this.getSecondaryAction(o)))aa+=' hasSecondaryAction';if(o.action=='add_friend'&&o.addfriendtemplate)k.renderToHtml('@AddFriendLoadResourcesTemplate');return h.create('div',{className:aa,sigil:'jx-result'+(o.action=='add_friend'?' undoable-action':''),rel:o.id,renderType:o.renderType,type:o.untranslatedType},y);}};e.exports=n;},null);
__d("MTypeaheadOnDemandSource",["setTimeoutAcrossTransitions","MRequest","MTypeaheadHelpers","Stratcom","TypeaheadInternationalNormalizer","TypeaheadNormalizer","TypeaheadOnDemandSource","copyProperties","createDeprecatedProperties","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){for(var q in m)if(m.hasOwnProperty(q))s[q]=m[q];var r=m===null?null:m.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=m;function s(t,u){"use strict";this.previousResults=null;m.call(this,t,u);this.setNormalizer(k.normalize);this.setSanitizer(l.normalize);this._allowFreeformEntry=false;this._cacheResultsLength=0;this._maxResults=1e+06;j.listen('m-typeahead-logger:new-session-id',null,function(v){this._sessionID=v.getData().sessionID;}.bind(this));}s.prototype.setAllowFreeformEntry=function(t){"use strict";this._allowFreeformEntry=t;};s.prototype.createNode=function(t){"use strict";return i.createNode(t,this.getShowSecondaryAction());};s.prototype.didChange=function(t){"use strict";this.lastChange=Date.now();var u=(this.getSanitizer())(t);if(this.haveData[u]){var v=this.normalize(u),w=this.getMatchedResults(v);this.invoke('resultsready',w);if(this.enableEagerSendRequest)this.invoke('unlock_render');this.invoke('complete');}else{if(this.enableImmediateReturnOfCachedResults===true){this.previousResults=this.getMatchedResults(t);this.invoke('resultsready',this.previousResults);}else this.previousResults=null;if(this._cacheResultsLength>=this._maxResults){if(this.enableEagerSendRequest)this.invoke('unlock_render');this.invoke('complete');return;}if(!this.enableEagerSendRequest)this.waitForResults();this.invoke('req_dispatch',this._sessionID);if(this.throttleSendRequest){this.throttleSendRequest(this.lastChange,t);}else g(this.sendRequest.bind(this,this.lastChange,t),this.getQueryDelay());if(this.enableEagerSendRequest){this.invoke('unlock_render');this.waitForResults();}}};s.prototype.setEnableImmediateReturnOfCachedResults=function(t){"use strict";this.enableImmediateReturnOfCachedResults=t;};s.prototype.setEnableEagerSendRequest=function(t){"use strict";this.enableEagerSendRequest=t;};s.prototype.setThrottleSendRequest=function(t){"use strict";this.throttleSendRequest=p.acrossTransitionsWithBlocking(this.sendRequest.bind(this),t);};s.prototype.setCacheResultsLength=function(t){"use strict";this._cacheResultsLength=t;};s.prototype.setMaxResults=function(t){"use strict";this._maxResults=t;};s.prototype.sendRequest=function(t,u){"use strict";if(t!=this.lastChange)return;if(!this.uri)return;var v=new h(this.uri);v.setData(n(this.getAuxiliaryData(),{q:u,session_id:this._sessionID}));v.setMethod('GET');v.listen('done',function(w,x,y){this.ondata(w,x,y);}.bind(this,this.lastChange,u));v.send();this.invoke('req_sent');};s.prototype.ondata=function(t,u,v){"use strict";v=v.payload||v;this.invoke('req_recv',v?v.length:0);var w=0,x=0,y={};if(this.previousResults!=null){x=this.previousResults.length;for(w=0;w<this.previousResults.length;w++){var z=this.previousResults[w];z.idx=w;this._raw[z.id]=z;this.addToLookup(z.id,u);y[z.id]=z.id;}}if(v){if(v.length!==0){var aa;for(aa=0;aa<v.length;++aa)v[aa].idx=aa+x;for(aa=0;aa<v.length;aa++)if(!(v[aa].uid in y))this.addResult(v[aa],u);}else if(this._allowFreeformEntry)this.addResult({text:u,uid:0,path:'#'},u);this.haveData[u]=true;if(t!=this.lastChange)return;this.matchResults(u);}};s.prototype.addResult=function(t,u){"use strict";var v=this.addToLookup.bind(this);if(t.uid in this._raw)this._raw[t.uid].idx=t.idx;t=(this.getTransformer()||this._defaultTransformer)(t);this._firstSeenOnValue[t.id]=this._firstSeenOnValue[t.id]||u;if(!(t.id in this._raw)){this._raw[t.id]=t;v(t.id,t.name);v(t.id,u);}else{this._raw[t.id]=t;v(t.id,u);}};s.prototype.addToLookup=function(t,u){"use strict";var v=this.tokenize(u);for(var w=0;w<v.length;++w){this._lookup[v[w]]=this._lookup[v[w]]||[];this._lookup[v[w]].push(t);}};s.prototype.sortHits=function(t,u){"use strict";var v=function(w,x){var y=this._raw[w],z=isNaN(y.idx)?Number.MAX_VALUE:y.idx,aa=this._raw[x],ba=isNaN(aa.idx)?Number.MAX_VALUE:aa.idx;return z-ba;}.bind(this);u.sort(v);};s.prototype.renderNodes=function(t,u){"use strict";return m.prototype.renderNodes.apply(this,arguments);};o(s,{sanitizer:null,transformer:function(t){return {name:t.text,uri:t.path,id:t.uid,photo:t.photo,display:t.display||t.text,action:t.action,paths:t.paths,permissions:t.permissions,photoSize:t.photo_size,type:t.type,openinnewtab:t.openinnewtab,subtext:t.text_only_subtext,nativethirdpartyappicon:t.nativethirdpartyappicon,idx:t.idx,renderType:t.render_type,untranslatedType:t.untranslated_type,verified:t.verified,weak_reference:t.weak_reference,city_id:t.city_id,city_text:t.city_text};},showSecondaryAction:true});e.exports=s;},null);
__d("MTypeaheadTouchSource",["MTypeaheadCachableSource","MTypeaheadHelpers","TypeaheadInternationalNormalizer","createDeprecatedProperties"],function(a,b,c,d,e,f,g,h,i,j){for(var k in g)if(g.hasOwnProperty(k))m[k]=g[k];var l=g===null?null:g.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=g;function m(n,o){"use strict";g.call(this,n,o);this.setNormalizer(i.normalize);}m.prototype.createNode=function(n){"use strict";return h.createNode(n,this.getShowSecondaryAction());};m.prototype.matchResults=function(n){"use strict";var o=this.normalize(n);g.prototype.matchResults.call(this,o);};m.prototype.ondata=function(n){"use strict";for(var o=0;o<n.length;++o)n[o].idx=o;g.prototype.ondata.apply(this,[n]);};j(m,{transformer:function(n){var o=n.openinnewtab!=null?n.openinnewtab:n.type==='App';return {name:n.text,uri:n.path,id:n.uid,photo:n.photo,photoSize:n.photo_size,gender:n.gender,display:n.display||n.text,action:n.action,paths:n.paths,permissions:n.permissions,type:n.type,openinnewtab:o,subtext:n.subtext,nativethirdpartyappicon:n.nativethirdpartyappicon,bootstrap:n.bootstrap,idx:n.idx,tokenType:n.tokenType,renderType:n.render_type,untranslatedType:n.untranslated_type,weak_reference:n.weak_reference,verified:n.verified};},sortHandler:function(n,o,p){var q=function(r,s){var t=isNaN(r.idx)?Number.MAX_VALUE:r.idx,u=isNaN(s.idx)?Number.MAX_VALUE:s.idx;return t-u;};o.sort(q);}});e.exports=m;},null);
__d("MTypeaheadTouchSourceWithSuggestions",["setTimeoutAcrossTransitions","MTypeaheadTouchSource","createDeprecatedProperties"],function(a,b,c,d,e,f,g,h,i){for(var j in h)if(h.hasOwnProperty(j))l[j]=h[j];var k=h===null?null:h.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=h;function l(m,n,o){"use strict";h.call(this,m,n);this.setSuggestions(o);var p=[];for(var q=0;q<o.length;++q){this.addResult(o[q]);p.push(o[q].uid);}this.setSuggestionsIds(p);this.setDefaultSuggestionsIds(p);}l.prototype.didStart=function(){"use strict";h.prototype.didStart.call(this);g((function(){var m=this.renderNodes(null,this.getSuggestionsIds());this.invoke('resultsready',m);this.invoke('complete');}.bind(this)),0);};l.prototype.matchResults=function(m){"use strict";if(m.length===0){var n=this.getSuggestionsIds();if(this.getSuggestionsIds().length===0)n=this.getDefaultSuggestionsIds();var o=this.renderNodes(null,n);this.invoke('resultsready',o);this.invoke('complete');}else h.prototype.matchResults.call(this,m);};i(l,{suggestions:[],suggestionsIds:[],defaultSuggestionsIds:[]});e.exports=l;},null);