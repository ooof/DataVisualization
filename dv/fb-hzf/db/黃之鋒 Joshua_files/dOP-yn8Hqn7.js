/*!CK:476658071!*//*1415982959,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["wXRKq"]); }

__d("unqualifyURI",[],function(a,b,c,d,e,f){function g(h){h.setProtocol(null).setDomain(null).setPort(null);}e.exports=g;},null);
__d("getUnqualifiedURI",["URI","unqualifyURI"],function(a,b,c,d,e,f,g,h){function i(j){var k=new g(j);h(k);return k;}e.exports=i;},null);
__d("MEntityLink.react",["React","isFacebookURI","getUnqualifiedURI","URI"],function(a,b,c,d,e,f,g,h,i,j){var k=g.createClass({displayName:"MEntityLink",propTypes:{entity:g.PropTypes.shape({url:g.PropTypes.string})},render:function(){var l=this.props.entity,m=l.url,n;if(m){var o=new j(m);if(h(o))m=i(new j(m)).toString();n=g.createElement("a",g.__spread({},this.props,{href:m}),this.props.children);}else n=g.createElement("span",g.__spread({},this.props),this.props.children);return n;}});e.exports=k;},null);
__d("MLoadingSpinner.react",["MLoadingIndicator.react","React"],function(a,b,c,d,e,f,g,h){var i=h.createClass({displayName:"MLoadingSpinner",render:function(){return (h.createElement("div",{className:this.props.className},h.createElement(g,{background:'light',size:'large'})));}});e.exports=i;},null);
__d("MTextWithEmoticons.react",["MMessagingEmoji","React"],function(a,b,c,d,e,f,g,h){var i=h.createClass({displayName:"MTextWithEmoticons",propTypes:{text:h.PropTypes.string.isRequired},render:function(){var j=g.htmlEmojiAndEmote(this.props.text);return (h.createElement("span",h.__spread({},this.props,{dangerouslySetInnerHTML:{__html:j.innerHTML}})));}});e.exports=i;},null);
__d("MXUICard.react",["MXUIDiv.react","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){var k=h.createClass({displayName:"MXUICard",propTypes:{border:h.PropTypes.bool,overflow:h.PropTypes.oneOf(['hidden','visible'])},getDefaultProps:function(){return {border:true};},render:function(){return (h.createElement("div",{className:"_56be"},h.createElement(g,h.__spread({},this.props,{background:"white",className:j(this.props.className,(("_56bf")+(this.props.border?' '+"_55x2":'')+(this.props.overflow==='visible'?' '+"_58k5":'')))}),this.props.children)));}});e.exports=k;},null);
__d("Newline.react",["React"],function(a,b,c,d,e,f,g){var h=g.createClass({displayName:"Newline",render:function(){return g.createElement("br",g.__spread({},this.props));}});e.exports=h;},null);
__d("Text.react",["React"],function(a,b,c,d,e,f,g){var h=g.createClass({displayName:"Text",render:function(){return (g.createElement("span",g.__spread({},this.props),this.props.children));}});e.exports=h;},null);
__d("MTokenCollection.react",["React"],function(a,b,c,d,e,f,g){var h=g.PropTypes,i=g.createClass({displayName:"MTokenCollection",propTypes:{className:h.string,collection:h.object.isRequired,collectionKey:h.string,onClick:h.func,onRemove:h.func,renderer:h.func.isRequired,tokenTestIDGenerator:h.func,truncateTokens:h.bool},render:function(){var j=this.props.renderer,k=this.props.collection.entries.map(function(l,m){var n=g.createElement(j,{collectionKey:this.props.collectionKey,entry:l,index:m,key:l.id,label:l.display,onRemove:this.props.onRemove,truncate:this.props.truncateTokens});return n;},this);return (g.createElement("span",{className:this.props.className,onClick:this.props.onClick},k));}});e.exports=i;},null);
__d("MTokenRenderer.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){var j=g.PropTypes,k=g.createClass({displayName:"MTokenRenderer",propTypes:{collectionKey:j.string,entry:j.object,index:j.number,label:j.string.isRequired,onRemove:j.func,testid:j.string,truncate:j.bool},render:function(){if(this.props.onRemove)var l=(("_5snx")+(this.props.truncate?' '+"_p9m":'')),m=g.createElement("a",{href:"#",className:l,"data-sigil":"touchable"},g.createElement("span",{className:"_1xe9",onClick:this._onTouchEnd},'\u00a0\u00d7\u00a0'));var n=(("_1xea")+(this.props.truncate?' '+"_p9n":'')),o=g.createElement("span",{className:n},this.props.label),p=(("_5snw")+(this.props.truncate?' '+"_p9o":'')),q=g.createElement("input",{type:"hidden",value:this.props.entry.id,name:this.props.collectionKey+'['+this.props.index+']'});return (g.createElement("span",g.__spread({},this.props,{className:i(this.props.className,p)}),o,m,q));},_onTouchEnd:function(l){l.stopPropagation();l.preventDefault();this.props.onRemove&&this.props.onRemove(this.props.entry);}});e.exports=k;},null);
__d("MTaggerResultsRow.react",["React","cx","MXUILayout.react","MXUIDiv.react","MXUILayoutColumn.react","MXUILayoutFillColumn.react"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m=g.PropTypes,n=g.createClass({displayName:"MTaggerResultsRow",getInitialState:function(){return {checked:false};},propTypes:{data:m.object,onClickItem:m.func},_renderProfileImg:function(){return (g.createElement("div",{className:"_5rmb",style:{backgroundImage:'url('+this.props.data.photo+')'}}));},_renderSubtext:function(){var o=this.props.data,p=o.subtext;if(!p)return null;return (g.createElement("span",{className:"_5rmc"},p));},render:function(){var o=this.props.data,p=((this.props.checked?"_5tbv":''));return (g.createElement(j,{"aria-checked":this.state.checked,className:"_5rmd",onClick:this._onClick,role:"checkbox"},g.createElement(i,null,g.createElement(k,null,this._renderProfileImg()),g.createElement(l,{alignself:"center",className:"_5rme"},g.createElement("div",null,g.createElement("div",{className:"_5rmf"},o.display||o.name),this._renderSubtext())),g.createElement(k,null,g.createElement("div",{className:"_5tbx"},g.createElement("div",{className:p}))))));},_onClick:function(event){this.setState({checked:!this.state.checked});this.props.onClickItem&&this.props.onClickItem(event,this.props.data,this.props.checked);}});e.exports=n;},null);
__d("MTaggerTypeaheadPresenter.react",["MTaggerResultsRow.react","React","cx"],function(a,b,c,d,e,f,g,h,i){'use strict';var j=h.PropTypes,k=30,l=h.createClass({displayName:"ResultRenderer",propTypes:{query:j.string,data:j.array,onClickItem:j.func,onTouchStart:j.func,excludedEntries:j.object},render:function(){var n=this.props.data.slice(0,k).map(function(o){var p=false;if(this.props.excludedEntries)p=!!this.props.excludedEntries[o.id];return (h.createElement(g,{key:o.id,data:o,onClickItem:this.props.onClickItem,checked:p}));},this);return (h.createElement("div",{className:"_53na",onTouchStart:this.props.onTouchStart},n));}}),m={ViewRenderer:l};e.exports=m;},null);
__d("TokenCollection",[],function(a,b,c,d,e,f){function g(){"use strict";this.entries=[];}g.prototype.addEntry=function(h){"use strict";if(!this.hasEntry(h))this.entries.push(h);return this;};g.prototype.removeEntry=function(h){"use strict";if(this.hasEntry(h)){var i=0;while(i<this.entries.length){if(this.entries[i].id===h.id)break;i++;}this.entries.splice(i,1);}};g.prototype.hasEntry=function(h){"use strict";var i=h.id;return this.entries.some(function(j){return (j.id===i);});};g.prototype.shallowClone=function(){"use strict";var h=new g();h.entries=this.entries.slice(0);return h;};e.exports=g;},null);
__d("Keys",[],function(a,b,c,d,e,f){e.exports={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90};},null);
__d("MTokenizer.react",["React","MReactTypeahead","MTaggerTypeaheadPresenter.react","MTokenCollection.react","MTokenRenderer.react","TokenCollection","MViewport","Vector","Keys","DataStore","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=g.PropTypes,u=g.createClass({displayName:"MTokenizer",propTypes:{placeholder:t.string,typeaheadConfig:t.object.isRequired,presenter:t.object.isRequired,excludedEntries:t.object,collectionKey:t.string,onInputBlur:t.func,hideSelected:t.bool,onAdd:t.func,onRemove:t.func,maxSuggestionCount:t.number,scrollToTypeahead:t.bool},getInitialState:function(){return {focus:false};},componentWillMount:function(){this._collection=new l();this._lastScrollPosition=null;},init:function(){this.initWithoutFocus();this.refs.typeahead.focusInput();},initWithoutFocus:function(){this.refs.typeahead.configureDatasource();this.forceUpdate();this.refs.typeahead.reset();},cleanup:function(){this.refs.typeahead.cleanup();},updateTypeahead:function(){this.forceUpdate();},render:function(){var v=this._collection.entries||[],w={},x=v&&v.length>0;if(x)for(var y=0;y<v.length;++y)w[v[y].id]=true;if(this.props.excludedEntries)for(var z in this.props.excludedEntries)w[z]=this.props.excludedEntries[z];var aa=x?null:this.props.placeholder;return (g.createElement("div",g.__spread({},this.props,{className:s(this.props.className,"_5snt"),onClick:this._focusTypeahead}),g.createElement(j,{ref:"collection",collection:this._collection,collectionKey:this.props.collectionKey,renderer:k,onRemove:this.onRemoveFromCollection}),g.createElement(h,{ref:"typeahead",autoWidth:false,className:"_5snu",typeaheadRootClassName:"_5snv",excludedEntries:w,placeholder:aa,presenter:this.props.presenter,typeaheadConfig:this.props.typeaheadConfig,onBlur:this._onInputBlur,onKeyDown:this._onInputKeyDown,onClickItem:this._onSelect,suggestions:this.props.suggestions,hideSelected:this.props.hideSelected,maxSuggestionCount:this.props.maxSuggestionCount})));},onRemoveFromCollection:function(v){this._collection.removeEntry(v);this.props.onRemove&&this.props.onRemove(v);this.forceUpdate();},_focusTypeahead:function(v){if(!this.state.focus){v.preventDefault();this.refs.typeahead.focusInput();this.setState({focus:true});}},_storeLastScrollPosition:function(){if(this._lastScrollPosition===null)this._lastScrollPosition=m.getScrollTop();},_returnToLastScrollPosition:function(){if(this._lastScrollPosition!==null)m.scrollTo(0,this._lastScrollPosition);this._lastScrollPosition=null;},_onInputKeyDown:function(event){if(this.props.scrollToTypeahead){this._storeLastScrollPosition();var v=this.refs.typeahead.getInputNode(),w=n.getPos(v).y;m.scrollTo(0,w);}if(event.nativeEvent.keyCode===o.BACKSPACE)this._onBackspace();},_onInputBlur:function(){if(this.props.scrollToTypeahead)this._returnToLastScrollPosition();this.props.onInputBlur&&this.props.onInputBlur();if(this.state.focus)this.setState({focus:false});},_onSelect:function(event,v,w){if(w){this.onRemoveFromCollection(v);}else{this._collection.addEntry(v);this.props.onAdd&&this.props.onAdd(v);}if(this.props.hideSelected)setTimeout(function(){this.refs.typeahead.focusInput();}.bind(this),0);event.stopPropagation();this.forceUpdate();},getEntries:function(){return this._collection.entries;},setEntries:function(v){this._collection.entries=v;},_onBackspace:function(){var v=this.getEntries();if(v&&v.length&&!this.refs.typeahead.getInputValue())this._collection.removeEntry(v[v.length-1]);this.forceUpdate();},updateSuggestionsIds:function(v){this.init();this.updateTypeaheadWithSuggestions(v);},updateTypeaheadWithSuggestions:function(v){this.refs.typeahead.updateSuggestionsIds(v);},focusAndUpdateSuggestionsIDs:function(v){this.refs.typeahead.updateSuggestionsIds(v);this.refs.typeahead.focusInput();}});u.init=function(v){var w="\u8bf7\u8f93\u5165\u540d\u5b57\u2026",x=p.get(v.container);x.tokenizer=g.render(g.createElement(u,{placeholder:w,presenter:i,typeaheadConfig:v.typeaheadConfig,suggestions:v.suggestions,hideSelected:v.hideselected,collectionKey:v.collectionKey}),v.container);x.tokenizer.init();};e.exports=u;},null);
__d("MCompositionMinutiaeStore",["MCompositionStore","MCompositionMinutiaeFields","MCompositionStoreID","emptyFunction","MCompositionConstants"],function(a,b,c,d,e,f,g,h,i,j){var k=b('MCompositionConstants').ActionTypes,l=new g(i.MINUTIAE,h).setRequiredFields(h.ACTION_TYPE_ID,h.ICON,h.ICON_LEGACY,h.OBJECT_ID,h.OBJECT_NAME).setHandlerFor(k.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(k.COMPOSITION_INITIALIZE,j.thatReturnsArgument).setHandlerFor(k.MINUTIAE_REMOVE,j.thatReturnsNull).setHandlerFor(k.MINUTIAE_SET,j.thatReturnsArgument).register();e.exports=l;},null);
__d("MCompositionPhotoStore",["MCompositionStore","MCompositionPhotoFields","MCompositionStoreID","emptyFunction","MCompositionConstants"],function(a,b,c,d,e,f,g,h,i,j){var k=b('MCompositionConstants').ActionTypes,l=new g(i.PHOTO,h).setMutable(true).setHandlerFor(k.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(k.COMPOSITION_INITIALIZE,j.thatReturnsArgument).setHandlerFor(k.PHOTO_CHANGE,j.thatReturnsArgument).register();e.exports=l;},null);
__d("MCompositionPlaceStore",["FBJSON","MCompositionStore","MCompositionConfigStore","MCompositionDispatcher","MCompositionPlaceFields","MCompositionStoreID","MPlaces","emptyFunction","MCompositionConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=b('MCompositionConstants').ActionTypes,p=new h(l.PLACE,k).setRequiredFields(k.NAME).setHandlerFor(o.COMPOSITION_INITIALIZE,function(q){j.waitFor([i.toUpdate()]);return q;}).setHandlerFor(o.PLACE_REMOVE,n.thatReturnsNull).setHandlerFor(o.PLACE_SET,function(q){var r=q[k.LATITUDE],s=q[k.LONGITUDE];if(r&&s){q[k.JSON_LOCATION]=g.stringify({latitude:r,longitude:s});}else q[k.JSON_LOCATION]=m.getCurrentJSONLocation();return q;}).register();e.exports=p;},null);
__d("MCompositionShareStore",["MCompositionStore","MCompositionShareFields","MCompositionStoreID","emptyFunction","merge","MCompositionConstants"],function(a,b,c,d,e,f,g,h,i,j,k){var l=b('MCompositionConstants').ActionTypes,m=new g(i.SHARE,h).setHandlerFor(l.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(l.COMPOSITION_INITIALIZE,j.thatReturnsArgument).setHandlerFor(l.SHARE_LINK_UPDATE,function(n){return k(m.getAll(),n);}).setHandlerFor(l.SHARE_REMOVE_PREVIEW,function(n){n=n||{};var o=h.DISABLED_LINKS,p=m.getAll(),q={};q[o]=k(p[o],n[o]);q[h.SHARE_URI]=null;return k(p,q);}).register();e.exports=m;},null);
__d("MCompositionStatusStore",["MCompositionStore","MCompositionStatusFields","MCompositionStoreID","emptyFunction","MCompositionConstants"],function(a,b,c,d,e,f,g,h,i,j){var k=b('MCompositionConstants').ActionTypes;function l(n){n=n||{};if(!n.hasOwnProperty(h.TEXT))n[h.TEXT]='';n[h.LONGEST_LENGTH]=Math.max(m.get(h.LONGEST_LENGTH,0),n[h.TEXT].length);return n;}var m=new g(i.STATUS,h).setRequiredFields(h.LONGEST_LENGTH,h.TEXT).setHandlerFor(k.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(k.COMPOSITION_INITIALIZE,l).setHandlerFor(k.STATUS_CHANGE,l).register();e.exports=m;},null);
__d("MCompositionWithStore",["MCompositionStore","MCompositionWithFields","MCompositionStoreID","emptyFunction","MCompositionConstants"],function(a,b,c,d,e,f,g,h,i,j){var k=b('MCompositionConstants').ActionTypes,l=new g(i.WITH_TAGS,h).setMutable(true).setHandlerFor(k.COMPOSITION_FINALIZE,j.thatReturnsNull).setHandlerFor(k.COMPOSITION_INITIALIZE,j.thatReturnsArgument).setHandlerFor(k.WITH_CHANGE,j.thatReturnsArgument).register();e.exports=l;},null);
__d("MComposerLoggerPublishingListeners",["MComposerLogger","MComposerWaterfallEvent"],function(a,b,c,d,e,f,g,h){function i(j,k){"use strict";if(!g.logWithSessionID)return;this.error=this.fail=function(){g.logWithSessionID(h.COMPOSER_POST_FAILURE,j,k);};this.done=function(){g.logWithSessionID(h.COMPOSER_POST_SUCCESS,j,k);};}e.exports=i;},null);
__d("MComposerNavigationMixin",["MComposerNavigation","invariant"],function(a,b,c,d,e,f,g,h){var i={__navigationPolicy:null,currentNavigationPolicy:function(){h(this.hasNavigationPolicy());return this.__navigationPolicy;},hasNavigationPolicy:function(){return !!this.__navigationPolicy;},newNavigationPolicy:function(){h(!this.hasNavigationPolicy());this.__navigationPolicy=g.newPolicy().addOnClose(function(){return this.__navigationPolicy=null;}.bind(this));return this.__navigationPolicy;},cleanupSoftState:function(){g.cleanupSoftState();}};e.exports=i;},null);
__d("MAlbumPicker",["CSS","DataStore","DOM","MComposerNavigationMixin","Stratcom","$","copyProperties","eventsMixinDeprecated","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=o(j);for(var q in p)if(p.hasOwnProperty(q))s[q]=p[q];var r=p===null?null:p.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=p;function s(t){"use strict";this._root=t;this._albumList=i.scry(this._root,'div','album-list')[0];this._createAlbumRoot=i.scry(this._root,'div','create-album')[0];this._albumListInputs=this._getAlbumListInputs();for(var u=0;u<this._albumListInputs.length;u++){var v=this._albumListInputs[u];if(v.checked){var w=h.get(v);this._currentSelectedAlbumID=w.album_id;break;}}this._listeners=[k.listen('click','cancel_album_picker',function(){this._navigateAwayAndCancel();}.bind(this)),k.listen('click','album-input',this._onAlbumSelected.bind(this))];if(this._albumList&&this._createAlbumRoot){this._listeners.push(k.listen('click','create-album-item',this._openCreateAlbum.bind(this)));this._listeners.push(k.listen('click','cancel_create_album',this._cancelCreateAlbum.bind(this)));this._listeners.push(k.listen('MPhotosCreateAlbum:created',null,this._onCreateAlbum.bind(this)));}}s.prototype._getAlbumListInputs=function(){"use strict";return i.scry(this._albumList,'input').filter(function(t){return t.type==='radio';});};s.prototype._navigateAway=function(){"use strict";if(!this.hasNavigationPolicy())return;this.currentNavigationPolicy().addOnClose(function(){return i.hide(this._root);}.bind(this)).close();};s.prototype._navigateAwayAndCancel=function(){"use strict";if(!this.hasNavigationPolicy())return;this.currentNavigationPolicy().addOnClose(function(){return this._cancel();}.bind(this)).close();};s.prototype.hide=function(){"use strict";this._navigateAway();};s.prototype.show=function(){"use strict";this.newNavigationPolicy().addOnCloseByBrowser(function(){return this._cancel();}.bind(this)).addOnOpen(function(){return i.show(this._root);}.bind(this)).open();if(this._albumListInputs.length===0)this._albumListInputs=this._getAlbumListInputs();};s.prototype.resetAlbumSelection=function(){"use strict";this._currentSelectedAlbumID=null;for(var t=0;t<this._albumListInputs.length;t++){var u=this._albumListInputs[t],v=h.get(u);if(v.is_mobile_uploads_album){u.checked=true;this._currentSelectedAlbumID=v.album_id;}else u.checked=false;}};s.prototype._openCreateAlbum=function(event){"use strict";k.invoke('MAlbumPicker:createalbum:open');i.hide(this._albumList);i.show(this._createAlbumRoot);};s.prototype._closeCreateAlbum=function(){"use strict";k.invoke('MAlbumPicker:createalbum:close');i.hide(this._createAlbumRoot);i.show(this._albumList);};s.prototype._cancelCreateAlbum=function(){"use strict";this._albumListInputs.forEach(function(t){var u=h.get(t);if(u.album_id===this._currentSelectedAlbumID)t.checked=true;}.bind(this));this._closeCreateAlbum();};s.prototype._onCreateAlbum=function(event){"use strict";var t=event.getData();this._closeCreateAlbum();this._chooseAlbum(false,t.album_id,t.privacy_id);};s.prototype._onAlbumSelected=function(event){"use strict";var t=event.getNode('album-input'),u=h.get(t),v=u.is_mobile_uploads_album,w=u.album_id,x=u.privacy_id;this._currentSelectedAlbumID=w;this._chooseAlbum(v,w,x);};s.prototype._chooseAlbum=function(t,u,v){"use strict";g.conditionClass(l('album-button'),'active',!t);this._navigateAway();this.invoke('choose-album',{is_mobile_uploads_album:t,album_id:u,privacy_id:v});};s.prototype._cancel=function(){"use strict";i.hide(this._root);this.invoke('cancel');};s.fromID=function(t){"use strict";var u=l(t),v=h.get(u);if(!v._albumPicker)v._albumPicker=new s(u);return v._albumPicker;};n(s,['cancel','choose-album']);m(s.prototype,{_root:null,_listeners:null});e.exports=s;},null);
__d("MComposerOGStrings",["OGComposerJSConstants","fbt"],function(a,b,c,d,e,f,g,h){var i={getFBTPhrase:function(j,k,l,m,n){var o='';if(n&&j==g.ActionTypeIDs.COMPOSER_LOOKS_FOR){o=h._("{icon}\u5728{place}\u627e{object}\u3002",[h.param("icon",k),h.param("object",l),h.param("place",n)]);}else switch(j){case g.ActionTypeIDs.COMPOSER_FEELS:o=h._("{icon}{object}",[h.param("icon",k),h.param("object",l)]);break;case g.ActionTypeIDs.COMPOSER_WATCHES:o=h._("{icon}\u67e5\u770b{object}",[h.param("icon",k),h.param("object",l)]);break;case g.ActionTypeIDs.COMPOSER_READS:o=h._("{icon}\u8bfb\u53d6{object}",[h.param("icon",k),h.param("object",l)]);break;case g.ActionTypeIDs.COMPOSER_LISTENS:o=h._("{icon}\u5728\u542c{object}",[h.param("icon",k),h.param("object",l)]);break;case g.ActionTypeIDs.COMPOSER_DRINKS:o=h._("{icon}\u6b63\u5728\u559d{object}",[h.param("icon",k),h.param("object",l)]);break;case g.ActionTypeIDs.COMPOSER_EATS:o=h._("{icon}\u6b63\u5728\u5403{object}",[h.param("icon",k),h.param("object",l)]);break;case g.ActionTypeIDs.COMPOSER_PLAYS:o=h._("{icon}\u6b63\u5728\u73a9{object}",[h.param("icon",k),h.param("object",l)]);break;case g.ActionTypeIDs.COMPOSER_TRAVELS:o=h._("{icon}\u51fa\u53d1\u53bb{object}",[h.param("icon",k),h.param("object",l)]);break;case g.ActionTypeIDs.COMPOSER_LOOKS_FOR:o=h._("{icon}\u5728\u627e{object}",[h.param("icon",k),h.param("object",l)]);break;case g.ActionTypeIDs.COMPOSER_SUPPORTS:o=h._("{icon}supporting {object}",[h.param("icon",k),h.param("object",l)]);break;case g.ActionTypeIDs.COMPOSER_CELEBRATES:o=h._("{icon}celebrating {object}",[h.param("icon",k),h.param("object",l)]);break;case g.ActionTypeIDs.COMPOSER_OTHER:o=h._("{icon}{object}",[h.param("icon",k),h.param("object",l)]);break;case g.ActionTypeIDs.COMPOSER_VOTES:o=h._("{icon}\u5728{object}\u4e2d\u6295\u7968",[h.param("icon",k),h.param("object",l)]);break;case g.ExercisesTypeID:switch(m){case g.ExercisingVerbObjectIDs.BIKING:o=h._("{icon}biking",[h.param("icon",k)]);break;case g.ExercisingVerbObjectIDs.BOXING:o=h._("{icon}boxing",[h.param("icon",k)]);break;case g.ExercisingVerbObjectIDs.CLIMBING:o=h._("{icon}climbing",[h.param("icon",k)]);break;case g.ExercisingVerbObjectIDs.GOLFING:o=h._("{icon}golfing",[h.param("icon",k)]);break;case g.ExercisingVerbObjectIDs.HIKING:o=h._("{icon}hiking",[h.param("icon",k)]);break;case g.ExercisingVerbObjectIDs.RACING:o=h._("{icon}racing",[h.param("icon",k)]);break;case g.ExercisingVerbObjectIDs.RAFTING:o=h._("{icon}rafting",[h.param("icon",k)]);break;case g.ExercisingVerbObjectIDs.RUNNING:o=h._("{icon}running",[h.param("icon",k)]);break;case g.ExercisingVerbObjectIDs.SKATING:o=h._("{icon}skating",[h.param("icon",k)]);break;case g.ExercisingVerbObjectIDs.SKIING:o=h._("{icon}skiing",[h.param("icon",k)]);break;case g.ExercisingVerbObjectIDs.SKYDIVING:o=h._("{icon}skydiving",[h.param("icon",k)]);break;case g.ExercisingVerbObjectIDs.SURFING:o=h._("{icon}snowboarding",[h.param("icon",k)]);break;case g.ExercisingVerbObjectIDs.SWIMMING:o=h._("{icon}swimming",[h.param("icon",k)]);break;case g.ExercisingVerbObjectIDs.WALKING:o=h._("{icon}walking",[h.param("icon",k)]);break;}break;}return o;}};e.exports=i;},null);
__d("MOpenGraphTagger",["CSS","DataStore","DOM","MarauderLogger","MComposerOGStrings","MCompositionShareStore","MRequest","Stratcom","$","copyProperties","cx","eventsMixinDeprecated","mtx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(u){"use strict";this.setRoot(u);this._prompt=i.find(u,'span','og-composer-prompt');this._defaultPrompt=this._prompt.firstChild;this._defaultIconSelector=i.find(u,'div','og-icon-selector');this._iconSelector=this._defaultIconSelector;this._cancelButton=i.find(u,'button','cancel-og-tagger');this._defaultCancelButtonText=this._cancelButton.firstChild;this._isFromActivityLink=false;i.listen(this.getRoot(),'click',null,this._handleClick.bind(this));this._listeners=[n.listen('click','object_result',function(event){event.prevent();var v=h.get(event.getNode('object_result'));this._objectID=v.id;this._objectStr=v.name;this._icon=v.icon;this._iconSrc=v.icon_src;this._showAttachment=l.isEmpty()&&v.show_attachment;this._customIconID=v.custom_icon;var w=i.scry(this.getRoot(),'div','og-location-search');if(w.length!==0&&v.needs_location&&!this._placeID){this._showLocationSearch();}else this._submit();}.bind(this)),n.listen('click','at_result',function(event){event.prevent();this._selectActionType(h.get(event.getNode('at_result')));j.log('og_composer_verb_selected',undefined,{at_id:this._actionType.id,place_id:this._placeID});}.bind(this)),n.listen('click','og_location_result',function(event){event.prevent();var v=h.get(event.getNode('og_location_result'));this._locationID=v.id;this._locationStr=v.str;this._submit();}.bind(this)),n.listen('click','quicksearch-input',function(event){if(event.getNode('og-object-search')){var v={at_id:this._actionType.id,place_id:this._placeID};j.log('og_composer_object_search_clicked',undefined,v);}}.bind(this)),n.listen('composerReset',null,function(event){this._reset();this._placeID=0;}.bind(this))];n.listen('MStructuredComposer:cleanup',null,function(event){for(var v=0;v<this._listeners.length;v++)this._listeners[v].remove();this._listeners=[];}.bind(this));}t.prototype.getRoot=function(){"use strict";return this.root;};t.prototype.setRoot=function(u){"use strict";this.root=u;};t.prototype.hide=function(){"use strict";i.hide(this.getRoot());this.toggleIncludedPlaceSelector(false);};t.prototype.show=function(){"use strict";i.show(this.getRoot());};t.prototype.updatePrompt=function(u){"use strict";i.setContent(this._prompt,u);};t.prototype.setPlaceID=function(u){"use strict";this._placeID=u;};t.prototype.setSuggestionMechanism=function(u){"use strict";this._suggestionMechanism=u;};t.prototype.toggleIncludedPlaceSelector=function(u){"use strict";var v=i.scry(this.getRoot(),'div','og_included_place');if(v.length){this._isFromActivityLink=u;if(u){i.show(v[0]);}else i.hide(v[0]);}};t.prototype._handleClick=function(event){"use strict";if(event.getNode('cancel-og-tagger'))this.cancel();};t.prototype._reset=function(){"use strict";var u=i.scry(this.getRoot(),'div','og-object-search');if(u.length!==0){i.hide(u[0]);this._showActionTypeSelector();}var v=i.scry(this.getRoot(),'div','og-location-search');if(v.length!==0)i.hide(v[0]);this._hideIconSelector();this._actionType=null;this._suggestionMechanism=null;this._locationID=null;this.updatePrompt(this._defaultPrompt);this.setCancelButtonText(this._defaultCancelButtonText);n.invoke('m:quicksearch:clear');};t.prototype.cancel=function(){"use strict";j.log('og_composer_cancel_tagger',undefined,{suggestion_mechanism:this._suggestionMechanism,place_id:this._placeID});var u=this._isFromActivityLink;if(this._isFromIconSelector)this.invoke('cancelIconSelection',{action_type_id:this._actionTypeId,query:this._iconSearchInput?this._iconSearchInput.value:''});this._reset();this.hide();this.invoke('cancel');if(u)this.invoke('cancelFromActivity');};t.prototype.setCancelButtonText=function(u){"use strict";i.setContent(this._cancelButton,u);};t.prototype._showObjectSearch=function(){"use strict";this._hideActionTypeSelector();i.show(i.find(this.getRoot(),'div','og-object-search'));var u=i.scry(this.getRoot(),'div','og-location-search');if(u.length!==0)i.hide(u[0]);};t.prototype._showLocationSearch=function(){"use strict";var u=i.scry(this.getRoot(),'div','og-location-search');if(u.length!==0){this._hideActionTypeSelector();i.hide(i.find(this.getRoot(),'div','og-object-search'));i.show(u[0]);}};t.prototype.selectActionTypeImplicitly=function(u){"use strict";var v=i.scry(this.getRoot(),'div','at_result'),w=false;for(var x=0;x<v.length;x++){var y=h.get(v[x]);if(y.id==u){w=true;break;}}if(!w)return false;this._selectActionType(y);return true;};t.prototype.showIconSelector=function(u,v,w,x){"use strict";this.show();this._hideActionTypeSelector();this.updatePrompt("\u9009\u62e9\u56fe\u6807");this._actionTypeId=u;var y='/platform/og/composer/icon_selector/',z=new m(y).setData({actionTypeID:u,objectID:v,objectStr:w,iconID:x});z.listen('postprocess',this._setUpIconSelector.bind(this));z.send();i.replace(this._iconSelector,this._defaultIconSelector);i.show(this._iconSelector);j.log('og_composer_show_icon_selector');};t.prototype._setUpIconSelector=function(){"use strict";this._iconSelector=i.find(this.getRoot(),'div','og-icon-selector');var u=i.scry(this._iconSelector,'a','remove-token');if(u.length!==0)i.listen(u[0],'click',null,this._cancelIconSelection.bind(this));this._iconSearchInput=i.scry(this._iconSelector,'input','icon-search-input')[0];i.listen(this._iconSelector,'click','og-icon-area',this._selectIcon.bind(this));this._isFromIconSelector=true;};t.prototype._cancelIconSelection=function(){"use strict";this._reset();this.invoke('clear');};t.prototype._selectIcon=function(event){"use strict";var u=event.getNode('og-icon-area'),v=u.lastChild.cloneNode();i.show(v);var w=i.find(this.getRoot(),'i','token-icon');n.addSigil(v,'token-icon');i.replace(w,v);this._icon=v;this._iconSrc=h.get(v).icon_src;this._customIconID=this._icon.getAttribute('data-icon');var x=this._iconSearchInput?this._iconSearchInput.value:'',y=this._actionTypeId;this._reset();this.invoke('iconChanged',{icon:this._icon,icon_src:this._iconSrc,custom_icon_id:this._customIconID,action_type_id:y,query:x});};t.prototype._selectActionType=function(u){"use strict";this._actionType=u;var v={at_id:this._actionType.id,place_id:this._placeID};n.invoke('m:quicksearch:actionSelected',null,v);this._showObjectSearch();this.updatePrompt(this._actionType.prompt);};t.prototype._hideActionTypeSelector=function(){"use strict";var u=i.scry(this.getRoot(),'div','og_ats');if(u.length!==0)g.conditionClass(u[0],"_51xt",true);};t.prototype._showActionTypeSelector=function(){"use strict";var u=i.scry(this.getRoot(),'div','og_ats');if(u.length!==0)g.conditionClass(u[0],"_51xt",false);};t.prototype._hideIconSelector=function(event){"use strict";this._isFromIconSelector=false;this._actionTypeId=null;i.hide(this._iconSelector);this._showActionTypeSelector();};t.prototype._submit=function(){"use strict";var u={action_type:this._actionType.id,action_type_str:this._actionType.name,object:this._objectID,object_str:this._objectStr,show_attachment:this._showAttachment,icon:this._icon,icon_src:this._iconSrc,fbt_phrase:this._getTagPhrase(this._actionType.id,this._icon,this._objectStr,this._objectID,this._locationID?this._locationStr:null),suggestion_mechanism:this._suggestionMechanism,location_id:this._locationID,custom_icon:this._customIconID};this._reset();this.invoke('submit',u);delete u.icon;delete u.fbt_phrase;j.log('og_composer_object_selected',undefined,u);};t.prototype._getTagPhrase=function(u,v,w,x,y){"use strict";return k.getFBTPhrase(u,v,w,x,y);};t.fromID=function(u){"use strict";var v=o(u),w=h.get(v);if(!w._ogTagger)w._ogTagger=new t(v);return w._ogTagger;};r(t,['submit','cancel','clear','iconChanged','cancelFromActivity','cancelIconSelection']);p(t.prototype,{root:null,_prompt:null,_defaultPrompt:null,_actionType:null,_objectID:null,_objectStr:null,_icon:null,_iconSelector:null,_defaultIconSelector:null,_showAttachment:null,_customIconID:null,_placeID:0,_listeners:null,_suggestionMechanism:null,_locationID:null,_locationStr:null});e.exports=t;},null);
__d("MSubscriptionsHandlerMixin",["SubscriptionsHandler","destroyOnUnload"],function(a,b,c,d,e,f,g,h){var i={__subscriptionsHandler:null,addSubscriptions:function(){for(var j=[],k=0,l=arguments.length;k<l;k++)j.push(arguments[k]);if(!this.__subscriptionsHandler){this.__subscriptionsHandler=new g();h(function(){this.__subscriptionsHandler.release();this.__subscriptionsHandler=null;}.bind(this));}this.__subscriptionsHandler.addSubscriptions.apply(this.__subscriptionsHandler,j);}};e.exports=i;},null);
__d("MStructuredComposerOGInput",["CSS","DOM","MAjaxify","MarauderLogger","MComposerLogger","MComposerOGStrings","MComposerNavigationMixin","MComposerWaterfallEvent","MCompositionMinutiaeStore","MCompositionMinutiaeFields","MCompositionPlaceStore","MCompositionPlaceFields","MCompositionUserActions","MRequest","MSubscriptionsHandlerMixin","MUnifiedTaggerConstants","MViewport","Stratcom","cx","mixin","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){var ba=v.SHOW_UNIFIED_TAGGER,ca=55,da=z(m,u);for(var ea in da)if(da.hasOwnProperty(ea))ga[ea]=da[ea];var fa=da===null?null:da.prototype;ga.prototype=Object.create(fa);ga.prototype.constructor=ga;ga.__superConstructor__=da;function ga(ha,ia,ja,ka,la){"use strict";this.$MStructuredComposerOGInput0=ha;this.$MStructuredComposerOGInput1=true;this.$MStructuredComposerOGInput2=true;this.$MStructuredComposerOGInput3=null;this.$MStructuredComposerOGInput4=ia;this.$MStructuredComposerOGInput5=ja;this.$MStructuredComposerOGInput6=ja.parentNode;this.$MStructuredComposerOGInput7=la;this.$MStructuredComposerOGInput8=h.find(this.$MStructuredComposerOGInput0,'input','og-action-input');this.$MStructuredComposerOGInput9=h.find(this.$MStructuredComposerOGInput0,'input','og-object-input');this.$MStructuredComposerOGInputa=h.find(this.$MStructuredComposerOGInput0,'input','og-phrase-input');this.$MStructuredComposerOGInputb=h.find(this.$MStructuredComposerOGInput0,'input','og-icon-input');this.$MStructuredComposerOGInputc=h.find(this.$MStructuredComposerOGInput0,'input','og-suggestion-mechanism');this.$MStructuredComposerOGInputd=h.find(this.$MStructuredComposerOGInput0,'input','og-hide-attachment');this.$MStructuredComposerOGInpute=h.find(this.$MStructuredComposerOGInput0,'input','og-location-id');this.$MStructuredComposerOGInputf=h.find(this.$MStructuredComposerOGInput0,'ul','og-tag');this.$MStructuredComposerOGInputg=ka;if(this.$MStructuredComposerOGInput7)this.addSubscriptions(this.$MStructuredComposerOGInputg.listen('clear',function(){this.$MStructuredComposerOGInput7.clear();this.$MStructuredComposerOGInputh();}.bind(this)),this.$MStructuredComposerOGInput7.addListener('clear',function(){return this.$MStructuredComposerOGInputh();}.bind(this)));this.addSubscriptions(this.$MStructuredComposerOGInputg.listen('submit',this.$MStructuredComposerOGInputi.bind(this)),o.addChangeListener(function(){return this.$MStructuredComposerOGInputj();}.bind(this)),this.$MStructuredComposerOGInputg.listen('iconChanged',function(event){if(ba){x.invoke('MComposer:tagger:update:og-icon',null,{icon:event.icon_src});}else{var ma=h.find(this.$MStructuredComposerOGInputf,'li','token'),na=h.find(ma,'i');h.replace(na,event.icon);}this.$MStructuredComposerOGInputb.value=event.custom_icon_id;this.$MStructuredComposerOGInputk();if(this.$MStructuredComposerOGInput7){this.$MStructuredComposerOGInput3['{icon}']=h.create('i',{className:event.icon.className,style:event.icon.style});this.$MStructuredComposerOGInput7.setValue(this.$MStructuredComposerOGInput3);}x.invoke('MStructuredComposerOGInput-done',null,{icon_changed:true});k.log(n.MINUTIAE_CHANGE_ICON,{action_type_id:event.action_type_id,query:event.query});}.bind(this)),this.$MStructuredComposerOGInputg.listen('cancel',function(){x.invoke('MStructuredComposerOGInput-done',null,{cancel:true});k.log(n.MINUTIAE_CANCEL);this.$MStructuredComposerOGInputk();}.bind(this)),this.$MStructuredComposerOGInputg.listen('cancelIconSelection',function(event){k.log(n.MINUTIAE_CHANGE_ICON_CANCEL,{action_type_id:event.action_type_id,query:event.query});}));if(ba){this.addSubscriptions(x.listen('MComposer:tagger:click',v.TOKEN_TYPES.OBJECT,this.$MStructuredComposerOGInputl.bind(this)),x.listen('MComposer:tagger:click',v.TOKEN_TYPES.ICON,function(){return this.$MStructuredComposerOGInputm();}.bind(this)));}else this.addSubscriptions(h.listen(this.$MStructuredComposerOGInput0,'click','og-tags',this.$MStructuredComposerOGInputn.bind(this)),h.listen(this.$MStructuredComposerOGInput0,'click','remove-token',this.$MStructuredComposerOGInputo.bind(this)));this.addSubscriptions(x.listen('MComposer:open:activity',null,function(){this.$MStructuredComposerOGInput2=false;this.$MStructuredComposerOGInputp();}.bind(this)),x.listen('click','og_included_place_checkin',this.$MStructuredComposerOGInputq.bind(this)),h.listen(this.$MStructuredComposerOGInput4,'click',null,this.$MStructuredComposerOGInputl.bind(this)),h.listen(this.$MStructuredComposerOGInput6,'click','close-composer-attachment',this.$MStructuredComposerOGInputr.bind(this)));}ga.prototype.$MStructuredComposerOGInputh=function(){"use strict";this.reset();this.$MStructuredComposerOGInputs();x.invoke('MStructuredComposerOGInput-done',null,{remove:true});k.log(n.MINUTIAE_REMOVE);};ga.prototype.$MStructuredComposerOGInputr=function(){"use strict";var ha={};ha[p.SHOW_ATTACHMENT]=false;s.minutiaeSet(aa(o.getAll(),ha));};ga.prototype.$MStructuredComposerOGInputi=function(event){"use strict";var ha={};for(var ia in p){var ja=p[ia];ha[ja]=event[ja];}s.minutiaeSet(ha);};ga.prototype.$MStructuredComposerOGInputj=function(){"use strict";var ha=h.find(this.$MStructuredComposerOGInputf,'li','token');this.$MStructuredComposerOGInputt();var ia=o.get(p.ACTION_TYPE_ID);if(!ia)return;var ja=o.get(p.CUSTOM_ICON_ID),ka=o.get(p.ICON_LEGACY),la=o.get(p.ICON),ma=o.get(p.OBJECT_NAME),na=o.get(p.OBJECT_ID),oa=o.get(p.SHOW_ATTACHMENT),pa=o.get(p.SUGGESTION_MECHANISM),qa=o.get(p.USE_DEFAULT_ICON,false),ra=o.get(p.FBT_PHRASE),sa=q.get(r.ID),ta=q.get(r.NAME);if(!ra)ra=l.getFBTPhrase(ia,ka,ma,na,ta);if(ma&&!na){this.$MStructuredComposerOGInputa.value=ma;}else{this.$MStructuredComposerOGInputa.value='';if(oa){this.$MStructuredComposerOGInputu(na,ma);this.$MStructuredComposerOGInputd.value=false;}else{this.$MStructuredComposerOGInputt();this.$MStructuredComposerOGInputd.value=true;}}if(ba){x.invoke('MComposer:tagger:update',null,{ogActivity:{id:ia,icon:la,object:ma}});}else{h.remove(ha.firstChild);var ua={'max-width':(w.getUseableWidth()-ca)+'px'},va=h.create('span',{className:"_52x0",style:ua},ra);h.prependContent(ha,va);}if(this.$MStructuredComposerOGInput7){this.$MStructuredComposerOGInput3=ra;this.$MStructuredComposerOGInput7.setValue(this.$MStructuredComposerOGInput3);}this.$MStructuredComposerOGInput9.value=na;this.$MStructuredComposerOGInput8.value=ia;this.$MStructuredComposerOGInputb.value=ja;this.$MStructuredComposerOGInputg.hide();this.$MStructuredComposerOGInputv();this.$MStructuredComposerOGInputc.value=pa;this.$MStructuredComposerOGInpute.value=sa;if(!na&&!qa){if(this.$MStructuredComposerOGInput7)this.$MStructuredComposerOGInput7.hide();this.$MStructuredComposerOGInputg.showIconSelector(ia,na,ma,ka);}else{this.$MStructuredComposerOGInputk();x.invoke('MStructuredComposerOGInput-done',null,{add:true});k.log(n.MINUTIAE_ADD);}};ga.prototype.$MStructuredComposerOGInputk=function(){"use strict";if(this.$MStructuredComposerOGInput2&&this.hasNavigationPolicy()){this.$MStructuredComposerOGInputs();}else{this.$MStructuredComposerOGInputq();x.invoke('MComposer:close:activity','og-tagger');}};ga.prototype.reset=function(){"use strict";this.$MStructuredComposerOGInput3=null;this.$MStructuredComposerOGInput8.value='';this.$MStructuredComposerOGInput9.value='';this.$MStructuredComposerOGInputa.value='';this.$MStructuredComposerOGInputb.value='';this.$MStructuredComposerOGInputd.value=false;if(ba)x.invoke('MComposer:tagger:update',null,{ogActivity:null});this.$MStructuredComposerOGInputt();if(this.$MStructuredComposerOGInput7)this.$MStructuredComposerOGInput7.clear();this.$MStructuredComposerOGInputv();};ga.prototype.setVisible=function(ha){"use strict";this.$MStructuredComposerOGInput1=ha;this.$MStructuredComposerOGInputv();};ga.prototype.hasValue=function(){"use strict";return !!this.$MStructuredComposerOGInput8.value;};ga.prototype.getLoggingData=function(){"use strict";if(this.$MStructuredComposerOGInput8.value)return {action_type:this.$MStructuredComposerOGInput8.value,object:this.$MStructuredComposerOGInput9.value,object_str:this.$MStructuredComposerOGInputa.value};return null;};ga.prototype.$MStructuredComposerOGInputv=function(){"use strict";var ha=!!this.$MStructuredComposerOGInput8.value;if(!ba)(ha&&this.$MStructuredComposerOGInput1?h.show:h.hide)(this.$MStructuredComposerOGInput0);(this.$MStructuredComposerOGInput1?h.show:h.hide)(this.$MStructuredComposerOGInput4);g.conditionClass(this.$MStructuredComposerOGInput4,'active',ha);};ga.prototype.$MStructuredComposerOGInputu=function(ha,ia){"use strict";this.$MStructuredComposerOGInputt();h.show(this.$MStructuredComposerOGInput5);var ja='/platform/og/composer/attachment',ka=new t(ja).setData({object_id:ha});i.ajaxify(null,null,ka,null);};ga.prototype.$MStructuredComposerOGInputt=function(){"use strict";h.replace(h.find(this.$MStructuredComposerOGInput6,'div','og-object-attachment'),this.$MStructuredComposerOGInput5);h.hide(this.$MStructuredComposerOGInput5);};ga.prototype.$MStructuredComposerOGInputn=function(){"use strict";k.log(n.MINUTIAE_CHANGE_ICON_INTENT);if(this.$MStructuredComposerOGInput7)this.$MStructuredComposerOGInput7.hide();this.$MStructuredComposerOGInputm();};ga.prototype.$MStructuredComposerOGInputl=function(){"use strict";k.log(n.MINUTIAE_INTENT);j.log('og_composer_icon_clicked');this.$MStructuredComposerOGInputw();};ga.prototype.$MStructuredComposerOGInputo=function(event){"use strict";event.kill();this.reset();s.minutiaeRemove();x.invoke('MStructuredComposerOGInput-done',null,{remove:true});k.log(n.MINUTIAE_REMOVE);};ga.prototype.$MStructuredComposerOGInputx=function(){"use strict";this.$MStructuredComposerOGInput2=false;this.$MStructuredComposerOGInputg.cancel();};ga.prototype.$MStructuredComposerOGInputq=function(){"use strict";if(!this.$MStructuredComposerOGInput2)this.$MStructuredComposerOGInput2=true;this.$MStructuredComposerOGInputg.hide();};ga.prototype.$MStructuredComposerOGInputp=function(){"use strict";if(this.$MStructuredComposerOGInput7)this.$MStructuredComposerOGInput7.showIfHasValue();this.$MStructuredComposerOGInputg.show();};ga.prototype.$MStructuredComposerOGInputy=function(){"use strict";if(this.$MStructuredComposerOGInput7)this.$MStructuredComposerOGInput7.hide();k.log(n.MINUTIAE_CHANGE_ICON_INTENT);this.$MStructuredComposerOGInputg.showIconSelector(this.$MStructuredComposerOGInput8.value,this.$MStructuredComposerOGInput9.value,this.$MStructuredComposerOGInputa.value,this.$MStructuredComposerOGInputb.value);};ga.prototype.$MStructuredComposerOGInputs=function(){"use strict";this.currentNavigationPolicy().addOnClose(function(){return this.$MStructuredComposerOGInputg.hide();}.bind(this)).close();};ga.prototype.$MStructuredComposerOGInputz=function(){"use strict";this.currentNavigationPolicy().addOnClose(function(){return this.$MStructuredComposerOGInputx();}.bind(this)).close();};ga.prototype.$MStructuredComposerOGInputw=function(){"use strict";this.newNavigationPolicy().addOnCloseByBrowser(function(){return this.$MStructuredComposerOGInputx();}.bind(this)).addOnOpen(function(){return this.$MStructuredComposerOGInputp();}.bind(this)).open();};ga.prototype.$MStructuredComposerOGInputm=function(){"use strict";this.newNavigationPolicy().addOnCloseByBrowser(function(){return this.$MStructuredComposerOGInputx();}.bind(this)).addOnOpen(function(){return this.$MStructuredComposerOGInputy();}.bind(this)).open();};e.exports=ga;},null);
__d("DOMContainer.react",["React","invariant","isNode"],function(a,b,c,d,e,f,g,h,i){var j=g.PropTypes,k=g.createClass({displayName:"DOMContainer",propTypes:{display:j.oneOf(['inline','block'])},getDefaultProps:function(){return {display:'inline'};},getDOMChild:function(){var l=this.props.children;h(i(l));return l;},shouldComponentUpdate:function(l,m){return l.children!==this.props.children;},componentDidMount:function(){this.getDOMNode().appendChild(this.getDOMChild());},componentDidUpdate:function(){var l=this.getDOMNode();while(l.lastChild)l.removeChild(l.lastChild);l.appendChild(this.getDOMChild());},render:function(){if(this.props.display==='block')return g.createElement("div",null);return g.createElement("span",null);}});e.exports=k;},null);
__d("MSnowflakeUFIAction.react",["React","Image.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){var k=g.createClass({displayName:"MSnowflakeUFIAction",propTypes:{icon:h.validateImageSrcPropType},getDefaultProps:function(){return {href:'#',rel:'ignore'};},shouldComponentUpdate:function(l){return this.props.icon!==l.icon;},render:function(){return (g.createElement("a",{onClick:this.props.onClick,rel:this.props.rel,href:this.props.href,className:j("_1w31",this.props.className)},g.createElement(h,{src:this.props.icon})));}});e.exports=k;},null);
__d("ClientTrackingMessage",["mergeInto"],function(a,b,c,d,e,f,g){function h(){"use strict";this.message={};}h.prototype.addTrackingMessage=function(i){"use strict";g(this.message,i);};h.prototype.getAppendedTrackingData=function(){"use strict";return Object.keys(this.message).map(function(i){var j=this.message[i];if(Array.isArray(j))j=JSON.stringify(j);return i+'.'+j;}.bind(this)).join(':');};h.prototype.appendToURI=function(i){"use strict";i.addQueryData(h.URI_KEY,this.getAppendedTrackingData());};h.URI_KEY='_ft_';e.exports=h;},null);
__d("MLinkTracking",["URI","collectDataAttributes","MLinkHack","ClientTrackingMessage","isFacebookURI"],function(a,b,c,d,e,f,g,h,i,j,k){function l(o){var p=n(o);if(!p)return;i.remove(o);var q=o.getAttribute('href');if(q&&q.indexOf('#')!==0){var r=new g(q);if(!k(r))return;var s=new j();s.addTrackingMessage(p);s.appendToURI(r);q=r.toString();if(q)o.setAttribute('href',q);}}function m(o,p){var q=new g(o.getURI());if(!k(q))return;var r=new j();r.addTrackingMessage(p);r.appendToURI(q);o.setURI(q.toString());}function n(o){var p=h(o,['ft']);if(!p)return;return p.ft;}e.exports={addFeedTrackingDataToHref:l,addFeedTrackingDataToRequest:m,getFeedTrackingData:n};},null);
__d("areEqual",[],function(a,b,c,d,e,f){var g=function(k,l,m,n){if(k===l)return k!==0||1/k==1/l;if(k==null||l==null)return false;if(typeof k!='object'||typeof l!='object')return false;var o=Object.prototype.toString,p=o.call(k);if(p!=o.call(l))return false;switch(p){case '[object String]':return k==String(l);case '[object Number]':return isNaN(k)||isNaN(l)?false:k==Number(l);case '[object Date]':case '[object Boolean]':return +k==+l;case '[object RegExp]':return k.source==l.source&&k.global==l.global&&k.multiline==l.multiline&&k.ignoreCase==l.ignoreCase;}var q=m.length;while(q--)if(m[q]==k)return n[q]==l;m.push(k);n.push(l);var r=0;if(p==='[object Array]'){r=k.length;if(r!==l.length)return false;while(r--)if(!g(k[r],l[r],m,n))return false;}else{if(k.constructor!==l.constructor)return false;if(k.hasOwnProperty('valueOf')&&l.hasOwnProperty('valueOf'))return k.valueOf()==l.valueOf();var s=Object.keys(k);if(s.length!=Object.keys(l).length)return false;for(var t=0;t<s.length;t++)if(!g(k[s[t]],l[s[t]],m,n))return false;}m.pop();n.pop();return true;},h=[],i=[],j=function(k,l){var m=h.length?h.pop():[],n=i.length?i.pop():[],o=g(k,l,m,n);m.length=0;n.length=0;h.push(m);i.push(n);return o;};e.exports=j;},null);
__d("MSnowflakeUFILikeAction.react",["React","MSnowflakeUFIAction.react","MRequest","URI","MLinkTracking","areEqual","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=g.createClass({displayName:"MSnowflakeUFILikeAction",propTypes:{feedbackTarget:g.PropTypes.string.isRequired,isLiked:g.PropTypes.bool},getDefaultProps:function(){return {isLiked:false};},getInitialState:function(){return {liked:this.props.isLiked};},shouldComponentUpdate:function(o,p){return !l(this.props,o)||!l(this.state,p);},componentWillReceiveProps:function(o){this.setState({liked:o.isLiked});},like:function(){this.setState({liked:true});},unlike:function(){this.setState({liked:false});},toggleLiked:function(){this.setState({liked:!this.state.liked});},buildLikeURI:function(){return (new j('/a/like/inline.php')).addQueryData({ft_ent_identifier:this.props.feedbackTarget,ul:this.state.liked,snowflake:true,feedbackinline:true});},sendLikeRequest:function(){var o=new i(this.buildLikeURI()),p=k.getFeedTrackingData(this.getDOMNode());if(p)k.addFeedTrackingDataToRequest(o,p);o.send();},getIconSrc:function(){if(this.state.liked)return m('images/mobile/photos/snowflake/snowflake_like_button_active.png');return m('images/mobile/photos/snowflake/snowflake_like_button.png');},onClicked:function(event){this.toggleLiked();this.sendLikeRequest();event.stopPropagation();},render:function(){return (g.createElement(h,g.__spread({},this.props,{onClick:this.onClicked,icon:this.getIconSrc()})));}});e.exports=n;},null);
__d("MSnowflakeUFIShareAction.react",["React","MSnowflakeUFIAction.react","URI","MModalDialog","ix"],function(a,b,c,d,e,f,g,h,i,j,k){var l=g.createClass({displayName:"MSnowflakeUFIShareAction",getShareURI:function(){return (new i('/sharer-dialog.php')).addQueryData({sid:this.props.feedbackTarget});},closeDialog:function(){j.close();},render:function(){return (g.createElement(h,{rel:null,href:this.getShareURI().toString(),icon:k('images/mobile/photos/snowflake/snowflake_share_button.png')}));}});e.exports=l;},null);
__d("LeftRight.react",["React","ReactChildren","cx","invariant","keyMirror","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=k({left:true,right:true,both:true});function n(p){j(p&&(p.length===1||p.length===2));}var o=g.createClass({displayName:"LeftRight",render:function(){var p=[];h.forEach(this.props.children,function(x){p.push(x);},this);n(p);var q=this.props.direction||m.both,r=(q===m.both),s=r||q===m.left?"_ohe lfloat":'',t=r||q===m.right?"_ohf rfloat":'',u=g.createElement("div",{key:"left",className:s},p[0]),v=(p.length<2)?null:g.createElement("div",{key:"right",className:t},p[1]),w=(q===m.right&&v)?[v,u]:[u,v];return (g.createElement("div",g.__spread({},this.props,{className:l(this.props.className,"clearfix")}),w));}});o.DIRECTION=m;e.exports=o;},null);
__d("interleaveArray",[],function(a,b,c,d,e,f){function g(h,i){var j=Object.keys(h),k=[];if(j.length>0)k.push(h[j[0]]);for(var l=1;l<j.length;++l){k.push(i);k.push(h[j[l]]);}return k;}e.exports=g;},null);
__d("MSnowflakeUFIActionBar.react",["React","DOM","MXUIDiv.react","MSnowflakeUFIAction.react","MSnowflakeUFILikeAction.react","MSnowflakeUFIShareAction.react","LeftRight.react","MFlyout","Vector","URI","areEqual","interleaveArray","fbt","cx","ix","MLayerHideOnBlur"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=g.createClass({displayName:"MSnowflakeUFIActionBar",propTypes:{hasComments:g.PropTypes.bool.isRequired,editURL:g.PropTypes.string,isTaggingMode:g.PropTypes.bool.isRequired,isShareable:g.PropTypes.bool.isRequired,canCreateTags:g.PropTypes.bool.isRequired,feedbackTarget:g.PropTypes.string.isRequired,feedbackData:g.PropTypes.object.isRequired,onToggleTagging:g.PropTypes.func.isRequired,onToggleComments:g.PropTypes.func.isRequired},shouldComponentUpdate:function(w,x){return !q(this.props,w)||!q(this.state,x);},getInitialState:function(){return {maxInteractors:2};},checkInteractorsWidth:function(){if(this.refs.interactors){var w=this.refs.interactors.getDOMNode(),x=this.refs.actions.getDOMNode(),y=o.getElementDimensions(w).x,z=o.getElementDimensions(x).x,aa=o.getElementDimensions(this.getDOMNode()).x;if(y+z>aa)this.setState({maxInteractors:this.state.maxInteractors-1});}},componentDidUpdate:function(w,x){this.checkInteractorsWidth();},getReportPhotoURI:function(){return new p('/report/id').addQueryData('id',this.props.feedbackTarget);},renderReportItem:function(){if(!this.props.canReport)return;return this.renderActionBubble(this.getReportPhotoURI().toString(),"\u4e3e\u62a5\u7167\u7247");},renderEditItem:function(){if(!this.props.editURL)return;return this.renderActionBubble(this.props.editURL,"\u7f16\u8f91\u7167\u7247");},renderActionBubble:function(w,x){return (g.createElement("a",{rel:"ignore",href:w,className:"_55i1 _58a0"},x));},renderMoreActionBubble:function(){return (g.createElement(i,{className:"_55i2"},this.renderEditItem(),this.renderReportItem()));},componentDidMount:function(){this.checkInteractorsWidth();if(this.hasMoreActions()){var w=h.create('div');g.render(this.renderMoreActionBubble(),w);this._flyout=new n({nubalign:'center',offsetY:0,position:'above',margin:'medium',width:'auto',addedBehaviors:[b('MLayerHideOnBlur')],context:this.refs.moreActionButton.getDOMNode()},w);}},componentWillUnmount:function(){if(this._flyout){this._flyout.destroy();this._flyout=null;}},renderCommentAction:function(){if(!this.props.hasComments)return null;return (g.createElement(j,{key:"commentAction",icon:u('images/mobile/photos/snowflake/snowflake_comment_button.png'),onClick:this.props.onToggleComments}));},getDoesViewerLike:function(){return this.props.feedbackData.does_viewer_like;},renderLikeAction:function(){return (g.createElement(k,{key:"likeAction",feedbackTarget:this.props.feedbackTarget,isLiked:this.getDoesViewerLike()}));},renderShareAction:function(){if(!this.isShareable())return null;return (g.createElement(l,{feedbackTarget:this.props.feedbackTarget,key:"shareAction"}));},toggleTagging:function(w){this.props.onToggleTagging();w.stopPropagation();},renderTagAction:function(){if(!this.canCreateTags())return null;var w=this.props.isTaggingMode?u('images/mobile/photos/snowflake/snowflake_tag_button_active.png'):u('images/mobile/photos/snowflake/snowflake_tag_button.png');return (g.createElement(j,{key:"tagAction",icon:w,onClick:this.toggleTagging}));},renderMoreAction:function(){if(!this.hasMoreActions())return null;return (g.createElement(j,{key:"moreAction",ref:"moreActionButton",icon:u('images/mobile/photos/snowflake/snowflake_more_button.png')}));},getLikeCount:function(){return this.props.feedbackData.likers?this.props.feedbackData.likers.count:0;},getCommentCount:function(){return this.props.feedbackData.comments?this.props.feedbackData.comments.count:0;},renderFeedbackCount:function(){var w=[this.renderLikeCount(),this.renderCommentCount()];return (g.createElement(i,{className:"_2xh_"},r(w,' ')));},renderLikeCount:function(){var w=this.getLikeCount();if(!w)return null;var x;if(w>1){x=(s._("{likes}\u8d5e",[s.param("likes",w)]));}else x=(s._("{likes}\u8d5e",[s.param("likes",1)]));return (g.createElement("span",{className:"_2xe3"},x));},renderCommentCount:function(){var w=this.getCommentCount();if(!w)return null;var x;if(w>1){x=(s._("{comments}\u8bc4\u8bba",[s.param("comments",w)]));}else x=(s._("{comments}\u5219\u8bc4\u8bba",[s.param("comments",1)]));return (g.createElement("span",{className:"_2xe4"},x));},hasInteractors:function(){return !!this.getInteractors().length;},getInteractors:function(){if(!this.props.feedbackData.interactors)return [];return this.props.feedbackData.interactors.nodes.slice(0,this.state.maxInteractors);},renderInteractors:function(){return r(this.getInteractors().map(function(w){return w.name;}),', ');},renderFeedbackSocialText:function(){if(!this.hasInteractors()){if(this.getCommentCount()||this.getLikeCount())return (g.createElement(i,null,"\u5199\u8bc4\u8bba"));}else return (g.createElement(i,{className:"_2g6d",ref:"interactors"},this.renderInteractors()));return null;},isShareable:function(){return this.props.isShareable;},canCreateTags:function(){return this.props.canCreateTags;},notImplementedMessage:function(w){w.stopPropagation();a.alert('Not yet implemented');},hasMoreActions:function(){return this.props.canReport||this.props.editURL;},render:function(){var w=[this.renderLikeAction(),this.renderCommentAction(),this.renderShareAction(),this.renderTagAction(),this.renderMoreAction()].filter(function(x){return !!x;});return (g.createElement("div",{className:"_51cd"},g.createElement(m,{className:"_2xi0"},g.createElement(i,{ref:"actions",className:"_2j65"},w),g.createElement(i,{onClick:this.props.onToggleComments},this.renderFeedbackCount(),this.renderFeedbackSocialText()))));}});e.exports=v;},null);
__d("MSnowflakeUFI.react",["DOMContainer.react","MSnowflakeUFIActionBar.react","MXUIDiv.react","React","areEqual","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=j.createClass({displayName:"ReactSnowflakeUFI",propTypes:{isShareable:j.PropTypes.bool,editURL:j.PropTypes.string,isTaggingMode:j.PropTypes.bool,initialIsCollapsed:j.PropTypes.bool,canCreateTags:j.PropTypes.bool,ufi:j.PropTypes.instanceOf(HTMLElement),feedbackTarget:j.PropTypes.string.isRequired,feedbackData:j.PropTypes.object.isRequired,onToggleTagging:j.PropTypes.func},shouldComponentUpdate:function(o,p){return !k(this.props,o)||!k(this.state,p);},componentDidUpdate:function(o,p){if(this.state.focusComments){if(this.props.ufi){this.props.ufi.scrollIntoView(false);this.props.ufi.querySelector('.composerInput').focus();}this.setState({focusComments:false});}},getDefaultProps:function(){return {isShareable:false,isTaggingMode:false,canCreateTags:false,initialIsCollapsed:true,onToggleTagging:m};},getInitialState:function(){return {collapsed:this.props.initialIsCollapsed};},toggleCollapsed:function(){this.setState({collapsed:!this.state.collapsed,focusComments:true});},focusComments:function(){this.setState({collapsed:false,focusComments:true});},renderComments:function(){if(!this.props.ufi)return null;var o=(("_2xi1")+(this.state.collapsed?' '+"_2xi2":''));return (j.createElement(i,{className:o},j.createElement(g,null,this.props.ufi)));},render:function(){return (j.createElement(i,null,j.createElement(h,{hasComments:!!this.props.ufi,isShareable:this.props.isShareable,editURL:this.props.editURL,isTaggingMode:this.props.isTaggingMode,canReport:this.props.canReport,canCreateTags:this.props.canCreateTags,feedbackTarget:this.props.feedbackTarget,feedbackData:this.props.feedbackData,onToggleTagging:this.props.onToggleTagging,onToggleComments:this.focusComments}),this.renderComments()));}});e.exports=n;},null);
__d("ES6StringUtils",[],function(a,b,c,d,e,f){var g={fromCodePoint:function(){for(var h=[],i=0,j=arguments.length;i<j;i++)h.push(arguments[i]);if(String.fromCodePoint)return String.fromCodePoint.apply(this,h);var k=[];for(var l=0;l<h.length;l++){var m=Number(h[l]);if(!isFinite(m)||m<0||1114111<m||Math.floor(m)!=m)throw RangeError('Invalid code point: '+h[l]);if(m<65536){k.push(String.fromCharCode(m));}else{m-=65536;k.push(String.fromCharCode((m>>10)+55296),String.fromCharCode((m%1024)+56320));}}return k.join('');},codePointAt:function(h){"use strict";if(String.prototype.codePointAt)return String.prototype.codePointAt.call(this,h);if(this===null||this===undefined)throw TypeError('Invalid context: '+this);var i=String(this),j=i.length;h=h?Number(h):0;if(h!=h)h=0;if(h<0||j<=h)return undefined;var k=i.charCodeAt(h);if(55296<=k&&k<=56319&&j>h+1){var l=i.charCodeAt(h+1);if(56320<=l&&l<=57343)return (k-55296)*1024+l-56320+65536;}return k;}};e.exports=g;},null);
__d("UnicodeUtils",["ES6StringUtils"],function(a,b,c,d,e,f,g){"use strict";var h=55296,i=57343,j=/[\uD800-\uDFFF]/;function k(s){return h<=s&&s<=i;}function l(s){return j.test(s);}function m(s,t){return 1+k(s.charCodeAt(t));}function n(s){if(!l(s))return s.length;var t=0;for(var u=0;u<s.length;u+=m(s,u))t++;return t;}function o(s,t,u){t=t||0;u=(u===undefined)?Infinity:(u||0);if(!l(s))return s.substr(t,u);var v=s.length;if(v<=0||t>v||u<=0)return '';var w=0;if(t>0){for(;t>0&&w<v;t--)w+=m(s,w);if(w>=v)return '';}else if(t<0){for(w=v;t<0&&0<w;t++)w-=m(s,w-1);if(w<0)w=0;}var x=v;if(u<v)for(x=w;u>0&&x<v;u--)x+=m(s,x);return s.substring(w,x);}function p(s,t,u){t=t||0;u=(u===undefined)?Infinity:(u||0);if(t<0)t=0;if(u<0)u=0;var v=Math.abs(u-t);t=(t<u)?t:u;return o(s,t,v);}function q(s){var t=[];for(var u=0;u<s.length;u+=m(s,u)){var v=g.codePointAt.call(s,u);t.push(v);}return t;}var r={isCodeUnitInSurrogateRange:k,getUTF16Length:m,strlen:n,substr:o,substring:p,getCodePoints:q};e.exports=r;},null);
__d("BaseTextWithEntities.react",["Newline.react","React","Text.react","UnicodeUtils"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(o,p){return o.offset-p.offset;}var l=/(\r\n|[\r\n])/,m=h.PropTypes.shape({length:h.PropTypes.number.isRequired,offset:h.PropTypes.number.isRequired}),n=h.createClass({displayName:"BaseTextWithEntities",propTypes:{aggregatedRanges:h.PropTypes.array,imageRanges:h.PropTypes.array,ranges:h.PropTypes.arrayOf(m),rangeRenderer:h.PropTypes.func.isRequired,text:h.PropTypes.string.isRequired,textRenderer:h.PropTypes.func.isRequired},_getSortedRanges:function(){var o=[];[this.props.ranges,this.props.aggregatedRanges,this.props.imageRanges].filter(function(p){return p!=null;}).forEach(function(p){return o=o.concat(p);});return o.sort(k);},_renderText:function(o){var p=o.split(l),q={};for(var r=0;r<p.length;r++){var s=p[r];if(s)if(r%2===1){q[r]=h.createElement(g,null);}else q[r]=this.props.textRenderer(p[r]);}return q;},render:function(){var o=0,p=this.props.text,q=this._getSortedRanges(),r={},s=q.length;for(var t=0,u=s;t<u;t++){var v=q[t];if(v.offset<o)continue;if(v.offset>o)r['text'+t]=this._renderText(j.substring(p,o,v.offset));var w=j.substr(p,v.offset,v.length);r['range'+t]=this.props.rangeRenderer(w,v);o=v.offset+v.length;}if(p.length>o)r.end=this._renderText(j.substr(p,o));return (h.createElement(i,{className:this.props.className,style:this.props.style},r));}});e.exports=n;},null);
__d("MSnowflakeTextWithEntities.react",["BaseTextWithEntities.react","Image.react","MTextWithEmoticons.react","MEntityLink.react","React","URI","areEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=k.createClass({displayName:"MSnowfakeTextWithEntities",renderText:function(o){return k.createElement(i,{text:o});},renderEntityLink:function(o,p){return (k.createElement(j,{rel:"ignore",entity:p},o));},shouldComponentUpdate:function(o){return !m(this.props,o);},getBrowseProfilesURI:function(o){return new l('/browse/users/dialog/').addQueryData({ids:o.map(function(p){return p.id;})});},renderAggregatedEntitiesLink:function(o,p){return (k.createElement("a",{href:this.getBrowseProfilesURI(p.sample_entities).toString()},o));},renderImage:function(o){return (k.createElement(h,{src:o.image.uri,height:o.image.height,width:o.image.width}));},renderRange:function(o,p){if(p.entity_with_image)return this.renderImage(p.entity_with_image);if(p.entity)return this.renderEntityLink(o,p.entity);return this.renderAggregatedEntitiesLink(o,p);},render:function(){var o=this.props.text;return (k.createElement(g,k.__spread({},this.props,{textRenderer:this.renderText,rangeRenderer:this.renderRange,text:o.text,aggregatedRanges:o.aggregated_ranges,imageRanges:o.image_ranges,ranges:o.ranges})));}});e.exports=n;},null);
__d("MSnowflakePhotoCardFacebox.react",["React","cx"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:"MSnowflakePhotoCardFacebox",propTypes:{facebox:g.PropTypes.object,onFaceboxSelected:g.PropTypes.func},_onClick:function(){this.props.onFaceboxSelected&&this.props.onFaceboxSelected(this.props.facebox);},render:function(){var j=this.props.facebox,k={top:j.top+"%",left:j.left+"%",width:j.width+"%",height:j.height+"%"};return (g.createElement("div",{className:"_5piq",style:k,onClick:this._onClick}));}});e.exports=i;},null);
__d("MSnowflakePhotoCardTag.react",["React","emptyFunction","cx"],function(a,b,c,d,e,f,g,h,i){var j=144,k=21,l=g.createClass({displayName:"MSnowflakePhotoCardTag",propTypes:{facebox:g.PropTypes.object,onTagDelete:g.PropTypes.func,parentRect:g.PropTypes.object.isRequired,canDelete:g.PropTypes.bool},getDefaultProps:function(){return {onTagDelete:h,canDelete:true};},getInitialState:function(){var m=this.props.facebox;return {left:m.x,top:m.top+m.height,realPosition:false};},getAdjustedPosition:function(){var m=this.props.parentRect,n=m.width,o=m.height,p=this.state.left*n/100,q=this.state.top*o/100,r=Math.max(p-j/2,0);r=Math.min(r,n-j);var s=Math.max(q,0);s=Math.min(s,o-k);return {left:r/n*100,top:s/o*100};},renderDeleteButton:function(m){if(!this.props.canDelete)return null;return (g.createElement("div",{className:"_e3j",onClick:function(){return this.props.onTagDelete(m);}.bind(this),"data-sigil":"touchable"}));},render:function(){var m=this.props.facebox,n=this.getAdjustedPosition(),o={left:n.left+'%',top:n.top+'%'};return (g.createElement("div",{className:"_e3g",style:o},g.createElement("div",{className:(("_e3h"))},m.tagName),this.renderDeleteButton(m)));}});e.exports=l;},null);
__d("MeasuredComponent.react",["EventListener","React","SubscriptionsHandler","emptyFunction","onlyChild","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=h.createClass({displayName:"MeasuredComponent",propTypes:{onMeasure:h.PropTypes.func.isRequired,measureOnEvents:h.PropTypes.array,shouldRemeasure:h.PropTypes.func},getDefaultProps:function(){return {onMeasure:j,measureOnEvents:['resize','orientationchange'],shouldRemeasure:j.thatReturnsFalse};},componentWillReceiveProps:function(n){if(n.measureOnEvents!==this.props.measureOnEvents){this.detachEventListeners();this.attachEventListeners(n.measureOnEvents);}},attachEventListeners:function(n){this._subscriptionsHandler.engage();i.prototype.addSubscriptions.apply(this._subscriptionsHandler,n.map(function(o){return g.listen(a,o,this.measure);}.bind(this)));},detachEventListeners:function(){this._subscriptionsHandler.release();},measure:function(){var n=this.getDOMNode().getBoundingClientRect();this.props.onMeasure(n);},componentDidUpdate:function(n,o){if(this.props.shouldRemeasure(n.children,this.props.children))this.measure();},componentDidMount:function(){this._subscriptionsHandler=new i();this.attachEventListeners(this.props.measureOnEvents);l(this.measure);},componentWillUnmount:function(){this.detachEventListeners();this._subscriptionsHandler=null;},render:function(){return k(this.props.children);}});e.exports=m;},null);
__d("MTagSuggestionsPoller",["MRequest","XPhotosGetRecognitionControllerURIBuilder","PhotosUploadWaterfallXMixin","mixin","performanceNow","PUWSteps"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=4,n=2000,o=8000,p=j(i);for(var q in p)if(p.hasOwnProperty(q))s[q]=p[q];var r=p===null?null:p.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=p;function s(){"use strict";this.$MTagSuggestionsPoller0=n;this.$MTagSuggestionsPoller1=0;this.$MTagSuggestionsPoller2={};this.$MTagSuggestionsPoller3=false;this.$MTagSuggestionsPoller4=null;}s.prototype.setRecognitionProject=function(t){"use strict";this.$MTagSuggestionsPoller5=t;return this;};s.prototype.setIncludeUnrecognized=function(t){"use strict";this.$MTagSuggestionsPoller6=t;return this;};s.prototype.setTargetIsPage=function(t){"use strict";this.$MTagSuggestionsPoller7=t;return this;};s.prototype.setTargetId=function(t){"use strict";this.$MTagSuggestionsPoller8=t;return this;};s.prototype.setHandler=function(t){"use strict";this.$MTagSuggestionsPoller9=t;return this;};s.prototype.setTimeoutHandler=function(t){"use strict";this.$MTagSuggestionsPollera=t;return this;};s.prototype.isPolling=function(){"use strict";return this.$MTagSuggestionsPoller3;};s.prototype.setWaterfall=function(t,u,v){"use strict";this.$MTagSuggestionsPollerb=t;this.$MTagSuggestionsPollerc=u;this.$MTagSuggestionsPollerd=v;return this;};s.prototype.addPhotoIDAndLog=function(t,u){"use strict";this.$MTagSuggestionsPoller2[t]=u;this.logStep(l.CLIENT_FACEREC_BEGIN,{fbid:t});this.invalidateTimeout();this.startMasterTimerIfNeeded();};s.prototype.removePhotoID=function(t){"use strict";delete this.$MTagSuggestionsPoller2[t];};s.prototype.hasPhotoID=function(t){"use strict";return this.$MTagSuggestionsPoller2.hasOwnProperty(t);};s.prototype.$MTagSuggestionsPollere=function(t){"use strict";return this.$MTagSuggestionsPoller2[t];};s.prototype.startMasterTimerIfNeeded=function(){"use strict";if(!this.$MTagSuggestionsPoller4){this.$MTagSuggestionsPollerf=k();this.$MTagSuggestionsPoller4=setTimeout(this.$MTagSuggestionsPollerg.bind(this),o);}};s.prototype.invalidateTimeout=function(){"use strict";this.$MTagSuggestionsPoller1=0;if(this.$MTagSuggestionsPoller4){clearTimeout(this.$MTagSuggestionsPoller4);this.$MTagSuggestionsPoller4=null;}};s.prototype.start=function(){"use strict";var t=this.$MTagSuggestionsPollerh();if(t.length>0){this.$MTagSuggestionsPoller3=true;this.$MTagSuggestionsPoller1++;this.startMasterTimerIfNeeded();var u=new g(this.$MTagSuggestionsPolleri(t));this.$MTagSuggestionsPollerj=u;u.listen('done',function(v){this.$MTagSuggestionsPollerk(v);}.bind(this));u.listen('error',function(v){this.$MTagSuggestionsPollerl(v);}.bind(this));u.setTimeout(o);u.send();}};s.prototype.$MTagSuggestionsPollerg=function(){"use strict";this.$MTagSuggestionsPollera&&this.$MTagSuggestionsPollera(this.$MTagSuggestionsPollerm());this.abort();};s.prototype.abort=function(){"use strict";this.$MTagSuggestionsPoller3=false;for(var t in this.$MTagSuggestionsPoller2)this.logStep(l.CLIENT_FACEREC_FAIL,{attempt_number:this.$MTagSuggestionsPoller1,elapsed_time:k()-this.$MTagSuggestionsPollerf,fbid:t});this.$MTagSuggestionsPoller2={};this.invalidateTimeout();if(this.$MTagSuggestionsPollerj){this.$MTagSuggestionsPollerj&&this.$MTagSuggestionsPollerj.abort();this.$MTagSuggestionsPollerj=null;}};s.prototype.$MTagSuggestionsPollerk=function(t){"use strict";if(t.payload){var u=t.payload.filter(function(v){var w=v.fbid,x=this.hasPhotoID(w);if(x){v.attachmentID=this.$MTagSuggestionsPollere(w);this.removePhotoID(w);this.logStep(l.CLIENT_FACEREC_SUCCESS,{attempt_number:this.$MTagSuggestionsPoller1,elapsed_time:k()-this.$MTagSuggestionsPollerf,xy_tag_count:v.faceboxes.length,fbid:w});}return x;}.bind(this));if(u.length>0)this.$MTagSuggestionsPoller9(u);}this.restart();};s.prototype.$MTagSuggestionsPollerl=function(t){"use strict";this.restart();};s.prototype.restart=function(){"use strict";if(this.$MTagSuggestionsPoller1<m){setTimeout(this.start.bind(this),this.$MTagSuggestionsPoller0);}else this.$MTagSuggestionsPollerg();};s.prototype.$MTagSuggestionsPollerh=function(){"use strict";var t=[];for(var u in this.$MTagSuggestionsPoller2)t.push(u);return t;};s.prototype.$MTagSuggestionsPollerm=function(){"use strict";var t=[];for(var u in this.$MTagSuggestionsPoller2)t.push(this.$MTagSuggestionsPoller2[u]);return t;};s.prototype.$MTagSuggestionsPolleri=function(t){"use strict";var u=new h().setIntVector('photos',t).setString('recognition_project',this.$MTagSuggestionsPoller5).setBool('include_unrecognized_faceboxes',this.$MTagSuggestionsPoller6).setBool('is_page',this.$MTagSuggestionsPoller7).setInt('target',this.$MTagSuggestionsPoller8).getURI();return u;};s.prototype.getWaterfallID=function(){"use strict";return this.$MTagSuggestionsPollerb;};s.prototype.getWaterfallAppName=function(){"use strict";return this.$MTagSuggestionsPollerc;};s.prototype.getWaterfallSource=function(){"use strict";return this.$MTagSuggestionsPollerd;};e.exports=s;},null);
__d("MStructuredComposerTaggingInputReact",["React"],function(a,b,c,d,e,f,g){var h="xy_tags",i='failed_suggestions',j=g.createClass({displayName:"MStructuredComposerTaggingInputReact",_renderTagInput:function(k,l,m,n){var o=h+"["+n+"]";return (g.createElement("div",{key:"tag"+k.fbid},g.createElement("input",{type:"hidden",name:o+"[x]",value:k.x}),g.createElement("input",{type:"hidden",name:o+"[y]",value:k.y}),g.createElement("input",{type:"hidden",name:o+"[fbid]",value:k.photoID}),g.createElement("input",{type:"hidden",name:o+"[name]",value:m}),g.createElement("input",{type:"hidden",name:o+"[subject]",value:l}),g.createElement("input",{type:"hidden",name:o+"[facebox]",value:k.fbid}),g.createElement("input",{type:"hidden",name:o+"[source]",value:"photos_touch_composer"})));},_renderTags:function(){var k=this.props.tokenCollection,l=this.props.tagSuggestions,m=[],n=0;k.map(function(o){var p=l[+(o.id)];if(p)m=m.concat(Object.keys(p).map(function(q){var r=this._renderTagInput(p[q],o.id,o.name,n);n++;return r;}.bind(this)));}.bind(this));return m;},_renderFailedSuggestionInput:function(k,l){var m=i+"["+l+"]";return (g.createElement("div",{key:"failed"+k.fbid},g.createElement("input",{type:"hidden",name:m+"[fbid]",value:k.fbid}),g.createElement("input",{type:"hidden",name:m+"[tagee]",value:k.recognitions[0].user.fbid})));},render:function(){return (g.createElement("div",null,this._renderTags(),this.props.failedSuggestions.map(this._renderFailedSuggestionInput)));}});e.exports=j;},null);
__d("MTagSuggestionsController",["MTagSuggestionsPoller","React","MStructuredComposerTaggingInputReact","DOM","BanzaiODS","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m='mtouch_composer_facerec_suggestions';function n(o,p,q,r,s,t){"use strict";this.$MTagSuggestionsController0=o;this.$MTagSuggestionsController0.setOnShow(this.onTokenizerInit.bind(this));this.$MTagSuggestionsController0.setOnClear(this.reset.bind(this));this.$MTagSuggestionsController1=p.getUploader();this.$MTagSuggestionsController2=s;this.$MTagSuggestionsController2.setOnEntriesChangedHandler(this.$MTagSuggestionsController3.bind(this));this.$MTagSuggestionsController4=0;this.$MTagSuggestionsController1.setProps({onUploadSuccess:this.onPhotoUploadSuccess.bind(this),onRemove:this.removeFaceboxesByPhotoID.bind(this)});this.$MTagSuggestionsController5=new g().setRecognitionProject('composer_facerec').setIncludeUnrecognized(true).setTargetIsPage(q==='page').setTargetId(r).setHandler(function(u){this.handleFaceboxResponse(u);}.bind(this)).setTimeoutHandler(function(u){this.onPollerTimeout(u);}.bind(this)).setWaterfall(this.$MTagSuggestionsController1.getWaterfallID(),this.$MTagSuggestionsController1.getWaterfallAppName(),this.$MTagSuggestionsController1.getWaterfallSource());this.$MTagSuggestionsController6={};this.$MTagSuggestionsController7={};this.$MTagSuggestionsController8={};this.$MTagSuggestionsController9=false;this.$MTagSuggestionsControllera={};this.$MTagSuggestionsControllerb=!!t;}n.prototype.onTokenizerInit=function(){"use strict";if(Object.keys(this.$MTagSuggestionsController8).length>0)this.updateTypeaheadWithFaceboxSuggestions();if(!this.$MTagSuggestionsController9){this.$MTagSuggestionsController9=true;this.$MTagSuggestionsController0.getTokenizer().setProps({onAdd:this.$MTagSuggestionsControllerc.bind(this),onRemove:this.$MTagSuggestionsControllerd.bind(this)});}};n.prototype.$MTagSuggestionsControllerc=function(o){"use strict";this.$MTagSuggestionsControllera[o.id]=true;};n.prototype.$MTagSuggestionsControllerd=function(o){"use strict";delete(this.$MTagSuggestionsControllera[o.id]);if(o.autoTag)k.bumpEntityKey(m,'remove_auto_tag');};n.prototype.$MTagSuggestionsControllere=function(o){"use strict";var p={};o.forEach(function(v){p[v.id]=true;});for(var q in this.$MTagSuggestionsController6)for(var r in this.$MTagSuggestionsController6[q]){var s=this.$MTagSuggestionsController6[q][r];if(!s.tagUserID){if(!s.ignoreRecognition){var t=s.recognitions[0].user.fbid,u=s.recognitions[0].user.name;if(p[t]){s.tagUserID=t;s.tagName=u;}}}else if(!p[s.tagUserID]){if(this.$MTagSuggestionsController7[s.tagUserID]&&s.ignoreRecognition)delete this.$MTagSuggestionsController7[s.tagUserID][r];delete s.tagUserID;delete s.tagName;}}};n.prototype.$MTagSuggestionsController3=function(o){"use strict";this.$MTagSuggestionsControllere(o);this.$MTagSuggestionsControllerf(o);};n.prototype.$MTagSuggestionsControllerf=function(o){"use strict";var p={};o.forEach(function(q){var r=this.$MTagSuggestionsController7[q.id];for(var s in r){var t=r[s].attachmentID;if(!p[t])p[t]=0;p[t]++;}}.bind(this));this.$MTagSuggestionsController1.setAttachmentTagCounts(p);};n.prototype.onPhotoUploadSuccess=function(o,p){"use strict";this.$MTagSuggestionsController5.addPhotoIDAndLog(o,p);this.$MTagSuggestionsController1.setAttachmentProps(p,{isPollingTagSuggestions:true});if(!this.$MTagSuggestionsController5.isPolling())this.$MTagSuggestionsController5.start();};n.prototype.$MTagSuggestionsControllerg=function(o){"use strict";return ({name:o.tagName,display:o.tagName,id:+o.tagUserID,autoTag:true});};n.prototype.handleFaceboxResponse=function(o){"use strict";o.forEach(function(q){var r=q.fbid,s=q.faceboxes;this.$MTagSuggestionsController1.setAttachmentProps(q.attachmentID,{isPollingTagSuggestions:false});s.forEach(function(t){t.photoID=r;t.attachmentID=q.attachmentID;if(!this.$MTagSuggestionsController6[r])this.$MTagSuggestionsController6[r]={};this.$MTagSuggestionsController6[r][t.fbid]=t;if(t.recognitions.length>0){t.ignoreRecognition=false;var u=t.recognitions[0].user.fbid;if(!this.$MTagSuggestionsController7[u])this.$MTagSuggestionsController7[u]={};this.$MTagSuggestionsController7[u][t.fbid]=t;if(!this.$MTagSuggestionsController8[u])this.$MTagSuggestionsController8[u]=0;this.$MTagSuggestionsController8[u]++;if(!this.$MTagSuggestionsController9&&this.$MTagSuggestionsControllerb){t.tagName=t.recognitions[0].user.name;t.tagUserID=u;var v=this.$MTagSuggestionsControllerg(t);this.$MTagSuggestionsController2.addAutoToken(v);}}else t.ignoreRecognition=true;}.bind(this));}.bind(this));var p=this.$MTagSuggestionsController2.getEntries();this.$MTagSuggestionsControllere(p);this.$MTagSuggestionsControllerf(p);};n.prototype.removeFaceboxesByPhotoID=function(o){"use strict";if(this.$MTagSuggestionsController5.hasPhotoID(o)){this.$MTagSuggestionsController5.removePhotoID(o);}else if(this.$MTagSuggestionsController6[o]){var p=this.$MTagSuggestionsController6[o];for(var q in p){var r=p[q];if(r.recognitions.length>0)this.$MTagSuggestionsControllerh(r);}this.$MTagSuggestionsController6[o]=null;}};n.prototype.$MTagSuggestionsControllerh=function(o){"use strict";var p=o.tagUserID||o.recognitions[0].user.fbid;if(o.recognitions.length>0){this.$MTagSuggestionsController8[p]--;if(this.$MTagSuggestionsController8[p]===0)delete this.$MTagSuggestionsController8[p];}if(this.$MTagSuggestionsController7[p]){delete this.$MTagSuggestionsController7[p][o.fbid];if(Object.keys(this.$MTagSuggestionsController7[p]).length<=0&&!this.$MTagSuggestionsControllera[p]&&this.$MTagSuggestionsControllerb){var q=this.$MTagSuggestionsControllerg(o);this.$MTagSuggestionsController2.onRemove(q);}else this.$MTagSuggestionsControllerf(this.$MTagSuggestionsController2.getEntries());}};n.prototype.updateTypeaheadWithFaceboxSuggestions=function(){"use strict";var o=Object.keys(this.$MTagSuggestionsController8);o=o.map(function(r){return +r;});var p=this.$MTagSuggestionsController0.getTokenizer(),q=p.props.suggestions.map(function(r){return r.uid;});q.forEach(function(r){if(o.indexOf(r)<0)o.push(r);});p.updateTypeaheadWithSuggestions(o);};n.prototype.$MTagSuggestionsControlleri=function(){"use strict";var o=this.$MTagSuggestionsController0.getTokenizer();o.updateTypeaheadWithSuggestions([]);};n.prototype.generateHiddenInput=function(o){"use strict";var p=[];for(var q in this.$MTagSuggestionsController6)for(var r in this.$MTagSuggestionsController6[q]){var s=this.$MTagSuggestionsController6[q][r];if(s.recognitions.length>0&&s.ignoreRecognition&&s.tagUserID!==s.recognitions[0].user.fbid)p.push(s);}var t=j.create('div',{});j.appendContent(o,t);h.render(h.createElement(i,{tokenCollection:this.$MTagSuggestionsController2.getEntries(),tagSuggestions:this.$MTagSuggestionsController7,failedSuggestions:p}),t);};n.prototype.onPollerTimeout=function(o){"use strict";o.forEach(function(p){this.$MTagSuggestionsController1.setAttachmentProps(p,{isPollingTagSuggestions:false});}.bind(this));};n.prototype.addXYTag=function(o){"use strict";var p=this.$MTagSuggestionsController6[o.photoID][o.fbid];if(p.recognitions.length>0)this.$MTagSuggestionsControllerh(p);n.addFaceboxData(p,o.tagName,o.tagUserID);if(!this.$MTagSuggestionsController7[p.tagUserID])this.$MTagSuggestionsController7[p.tagUserID]={};this.$MTagSuggestionsController7[p.tagUserID][p.fbid]=p;var q=this.$MTagSuggestionsControllerg(p);this.$MTagSuggestionsController2.addManualXYTag(q);this.$MTagSuggestionsController4+=1;};n.prototype.deleteXYTag=function(o){"use strict";var p=this.$MTagSuggestionsController6[o.photoID][o.fbid];p.ignoreRecognition=true;delete p.tagUserID;delete p.tagName;this.$MTagSuggestionsControllerh(o);this.$MTagSuggestionsController4-=1;};n.prototype.getNumXYTags=function(){"use strict";return this.$MTagSuggestionsController4;};n.prototype.getFaceboxesCopyForPhoto=function(o){"use strict";var p={};for(var q in this.$MTagSuggestionsController6[o])p[q]=l({},this.$MTagSuggestionsController6[o][q]);return p;};n.prototype.reset=function(){"use strict";this.$MTagSuggestionsController5.abort();this.$MTagSuggestionsController8={};this.$MTagSuggestionsController6={};this.$MTagSuggestionsController7={};this.$MTagSuggestionsControlleri();this.$MTagSuggestionsController9=false;this.$MTagSuggestionsControllera={};this.$MTagSuggestionsController4=0;};n.addFaceboxData=function(o,p,q){"use strict";o.tagName=p;o.tagUserID=q;o.ignoreRecognition=true;};n.deleteFaceboxData=function(o){"use strict";delete(o.tagUserID);delete(o.tagName);o.ignoreRecognition=true;};e.exports=n;},null);
__d("VersionRange",["invariant"],function(a,b,c,d,e,f,g){'use strict';var h=/\./,i=/\|\|/,j=/\s+\-\s+/,k=/^(<=|<|=|>=|~>|~|>|)?\s*(.+)/,l=/^(\d*)(.*)/;function m(ea,fa){var ga=ea.split(i);if(ga.length>1){return ga.some(function(ha){return da.contains(ha,fa);});}else{ea=ga[0].trim();return n(ea,fa);}}function n(ea,fa){var ga=ea.split(j);g(ga.length>0&&ga.length<=2);if(ga.length===1){return o(ga[0],fa);}else{var ha=ga,ia=ha[0],ja=ha[1];g(x(ia)&&x(ja));return (o('>='+ia,fa)&&o('<='+ja,fa));}}function o(ea,fa){ea=ea.trim();if(ea==='')return true;var ga=fa.split(h),ha=v(ea),ia=ha.modifier,ja=ha.rangeComponents;switch(ia){case '<':return p(ga,ja);case '<=':return q(ga,ja);case '>=':return s(ga,ja);case '>':return t(ga,ja);case '~':case '~>':return u(ga,ja);default:return r(ga,ja);}}function p(ea,fa){return ca(ea,fa)===-1;}function q(ea,fa){var ga=ca(ea,fa);return ga===-1||ga===0;}function r(ea,fa){return ca(ea,fa)===0;}function s(ea,fa){var ga=ca(ea,fa);return ga===1||ga===0;}function t(ea,fa){return ca(ea,fa)===1;}function u(ea,fa){var ga=fa.slice(),ha=fa.slice();if(ha.length>1)ha.pop();var ia=ha.length-1,ja=parseInt(ha[ia],10);if(w(ja))ha[ia]=ja+1+'';return (s(ea,ga)&&p(ea,ha));}function v(ea){var fa=ea.split(h),ga=fa[0].match(k);g(ga);return {modifier:ga[1],rangeComponents:[ga[2]].concat(fa.slice(1))};}function w(ea){return !isNaN(ea)&&isFinite(ea);}function x(ea){return !v(ea).modifier;}function y(ea,fa){for(var ga=ea.length;ga<fa;ga++)ea[ga]='0';}function z(ea,fa){ea=ea.slice();fa=fa.slice();y(ea,fa.length);for(var ga=0;ga<fa.length;ga++){var ha=fa[ga].match(/^[x*]$/i);if(ha){fa[ga]=ea[ga]='0';if(ha[0]==='*'&&ga===fa.length-1)for(var ia=ga;ia<ea.length;ia++)ea[ia]='0';}}y(fa,ea.length);return [ea,fa];}function aa(ea,fa){var ga=ea.match(l)[1],ha=fa.match(l)[1],ia=parseInt(ga,10),ja=parseInt(ha,10);if(w(ia)&&w(ja)&&ia!==ja){return ba(ia,ja);}else return ba(ea,fa);}function ba(ea,fa){g(typeof ea===typeof fa);if(ea>fa){return 1;}else if(ea<fa){return -1;}else return 0;}function ca(ea,fa){var ga=z(ea,fa),ha=ga[0],ia=ga[1];for(var ja=0;ja<ia.length;ja++){var ka=aa(ha[ja],ia[ja]);if(ka)return ka;}return 0;}var da={contains:function(ea,fa){return m(ea.trim(),fa.trim());}};e.exports=da;},null);
__d("UserAgent",["UserAgentData","VersionRange","mapObject","memoizeStringOnly"],function(a,b,c,d,e,f,g,h,i,j){'use strict';function k(n,o,p,q){if(n===p)return true;if(!p.startsWith(n))return false;var r=p.slice(n.length);if(o){r=q?q(r):r;return h.contains(r,o);}return false;}function l(n){if(g.platformName==='Windows')return n.replace(/^\s*NT/,'');return n;}var m={isBrowser:function(n){return k(g.browserName,g.browserFullVersion,n);},isBrowserArchitecture:function(n){return k(g.browserArchitecture,null,n);},isDevice:function(n){return k(g.deviceName,null,n);},isEngine:function(n){return k(g.engineName,g.engineVersion,n);},isPlatform:function(n){return k(g.platformName,g.platformFullVersion,n,l);},isPlatformArchitecture:function(n){return k(g.platformArchitecture,null,n);}};e.exports=i(m,j);},null);
__d("getScrollPosition",["getDocumentScrollElement","getUnboundedScrollPosition"],function(a,b,c,d,e,f,g,h){"use strict";function i(j){var k=g();if(j===window)j=k;var l=h(j),m=j===k?document.documentElement:j,n=j.scrollWidth-m.clientWidth,o=j.scrollHeight-m.clientHeight;l.x=Math.max(0,Math.min(l.x,n));l.y=Math.max(0,Math.min(l.y,o));return l;}e.exports=i;},null);
__d("MSnowflakePhotoCardTagger.react",["React","MSnowflakePhotoCardFacebox.react","MSnowflakePhotoCardTag.react","MTaggerTypeaheadPresenter.react","MTokenizer.react","MeasuredComponent.react","MTagSuggestionsController","Vector","UserAgent","cx","fbt","getElementPosition","getScrollPosition","onlyChild","mergeInto","areEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=200,x=10,y=g.createClass({displayName:"SnowflakePhotoCardTagger",propTypes:{initialFaceboxes:g.PropTypes.object,initialTags:g.PropTypes.object,onTagAdd:g.PropTypes.func,onTagDelete:g.PropTypes.func,typeaheadConfig:g.PropTypes.object.isRequired,typeaheadSuggestions:g.PropTypes.array,freeformTagging:g.PropTypes.bool.isRequired,imageIsLoading:g.PropTypes.bool},getInitialState:function(){var z={};if(this.props.initialFaceboxes)u(z,this.props.initialFaceboxes);return {faceboxes:z,tagsWithoutFaceboxes:this.props.initialTags||{},activeFacebox:null,clientRect:null};},hasTags:function(){return this.hasTagsWithoutFaceboxes()||this.hasTaggedFaceboxes();},hasTagsWithoutFaceboxes:function(){return Object.keys(this.state.tags).length;},hasTaggedFaceboxes:function(){return Object.keys(this.state.faceboxes).any(function(z){return !!this.state.faceboxes[z].tagUserID;}.bind(this));},componentWillReceiveProps:function(z){if(!v(this.state.faceboxes,z.initialFaceboxes))this.setState({faceboxes:z.initialFaceboxes,activeFacebox:null});},componentDidMount:function(){this.refs.tokenizer.initWithoutFocus();},componentWillUnmount:function(){this.refs.tokenizer.cleanup();},componentDidUpdate:function(){if(this.needFocus){this.needFocus=false;var z=this.state.activeFacebox,aa=[];if(!z.ignoreRecognition)aa=z.recognitions.map(function(ba){return ba.user.fbid;});this.refs.tokenizer.focusAndUpdateSuggestionsIDs(aa);}},resetTokenizer:function(){this.setState({activeFacebox:null});},_onFaceboxSelected:function(z){this.needFocus=true;this.setState({activeFacebox:z});},_closeTokenizer:function(){this.setState({activeFacebox:null});},_onTokenSelected:function(z){this.refs.tokenizer.setEntries([]);var aa=this.state.activeFacebox;m.addFaceboxData(aa,z.name,z.id);if(aa.fbid){var ba=this.state.faceboxes;ba[aa.fbid]=aa;this.setState({activeFacebox:null,faceboxes:ba});}else{var ca=this.state.tagsWithoutFaceboxes;ca[aa.tagUserID]=aa;this.setState({activeFacebox:null,tagsWithoutFaceboxes:ca});}this.props.onTagAdd&&this.props.onTagAdd(aa);},_renderTokenizer:function(){var z={display:'none'},aa={},ba=this.state.activeFacebox;if(this.state.activeFacebox){var ca=this.state.clientRect.width,da=ca*ba.width/100,ea=ba.left*ca/100;z={top:ba.top+ba.height+"%",width:w};var fa=ea+(da-w)/2;fa=Math.max(0,fa);fa=Math.min(fa,ca-w);z.left=fa;var ga=this.state.faceboxes;for(var ha in ga){ba=ga[ha];if(ba.tagUserID)aa[ba.tagUserID]=true;}Object.keys(this.state.tagsWithoutFaceboxes).forEach(function(ja){return aa[ja]=true;});}var ia="\u8bf7\u8f93\u5165\u540d\u5b57\u2026";return (g.createElement("div",{style:z,className:"_4uod"},g.createElement(k,{ref:"tokenizer",presenter:j,typeaheadConfig:this.props.typeaheadConfig,hideSelected:true,suggestions:this.props.typeaheadSuggestions,onAdd:this._onTokenSelected,excludedEntries:aa,placeholder:ia,maxSuggestionCount:x})));},_renderTag:function(z){if(!this.state.clientRect)return null;return (g.createElement(i,{canDelete:z.canRemove,key:z.tagUserID,parentRect:this.state.clientRect,facebox:z,onTagDelete:this.onTagDelete}));},_renderFacebox:function(z){return (g.createElement(h,{key:z.fbid,facebox:z,onFaceboxSelected:this._onFaceboxSelected}));},handleImageClick:function(z){z.stopPropagation();if(this.state.activeFacebox){this._closeTokenizer();}else if(this.props.freeformTagging){var aa=r(this.getDOMNode()),ba=s(window),ca=new n(z.clientX,z.clientY).sub(n.from(aa.x,aa.y));if(o.isBrowser('Chrome > 18'))ca=ca.sub(n.from(ba.x,ba.y));this.createFreeFormTag(ca.x,ca.y);}},createFreeFormTag:function(z,aa){var ba=this.state.clientRect,ca={x:z/ba.width*100,y:aa/ba.height*100,width:10,height:10,left:(z-5)/ba.width*100,top:(aa-5)/ba.height*100,recognitions:[]};this._onFaceboxSelected(ca);},updateClientRect:function(z){this.setState({clientRect:z});},render:function(){var z=t(this.props.children),aa=[],ba=[];if(!this.props.imageIsLoading){var ca=this.state.faceboxes;for(var da in ca){var ea=ca[da];if(ea.tagUserID){ba.push(this._renderTag(ea));}else aa.push(this._renderFacebox(ea));}Array.prototype.push.apply(ba,Object.keys(this.state.tagsWithoutFaceboxes).map(function(fa){return this._renderTag(this.state.tagsWithoutFaceboxes[fa]);}.bind(this)));}return (g.createElement(l,{onMeasure:this.updateClientRect},g.createElement("div",{className:"_1k3"},g.createElement("div",{onClick:this.handleImageClick},z),aa,ba,this._renderTokenizer())));},onTagDelete:function(z){this.props.onTagDelete&&this.props.onTagDelete(z);var aa=this.state.faceboxes;if(z.fbid){m.deleteFaceboxData(z);aa[z.fbid]=z;this.setState({faceboxes:aa});}else{delete this.state.tagsWithoutFaceboxes[z.tagUserID];this.setState({tagsWithoutFaceboxes:this.state.tagsWithoutFaceboxes});}}});e.exports=y;},null);
__d("MSnowflakePhotoCard.react",["React","Image.react","MSnowflakeUFI.react","MSnowflakeTextWithEntities.react","MXUICard.react","MXUIDiv.react","MSnowflakePhotoCardTagger.react","cx","emptyFunction","joinClasses","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=g.createClass({displayName:"ReactSnowflakePhotoCard",propTypes:{message:g.PropTypes.object,imageSrc:g.PropTypes.string,permalinkURL:g.PropTypes.string,canEdit:g.PropTypes.bool,imageHeight:g.PropTypes.number,imageWidth:g.PropTypes.number,canCreateTags:g.PropTypes.bool,ufi:g.PropTypes.instanceOf(HTMLElement),feedbackTarget:g.PropTypes.string,isPreviewMode:g.PropTypes.bool,initialFaceboxes:g.PropTypes.object,initialTags:g.PropTypes.object,initialTaggingMode:g.PropTypes.bool,onTagAdd:g.PropTypes.func,onTagDelete:g.PropTypes.func,onActivateTagging:g.PropTypes.func,typeaheadConfig:g.PropTypes.object,initialIsUFICollapsed:g.PropTypes.bool,typeaheadSuggestions:g.PropTypes.array},getInitialState:function(){return {taggingMode:this.props.initialTaggingMode};},getDefaultProps:function(){return {canEdit:false,canCreateTags:false,canDeleteTags:false,initialTaggingMode:false,onActivateTagging:o,freeformTagging:true};},componentWillUpdate:function(s,t){q(!t.taggingMode||s.canCreateTags);if(!this.state.taggingMode&&t.taggingMode)this.props.onActivateTagging(this);},renderMessage:function(){if(!this.props.message)return null;return (g.createElement(l,{className:"_26p9",key:"message"},g.createElement(j,{text:this.props.message})));},getEditURL:function(){if(this.props.permalinkURL&&this.props.canEdit)return this.props.permalinkURL;return null;},renderUFI:function(){if(!this.props.ufi)return null;return (g.createElement(i,{ufi:this.props.ufi,editURL:this.getEditURL(),isTaggingMode:this.state.taggingMode,initialIsCollapsed:this.props.initialIsUFICollapsed,canReport:this.props.canReport,canCreateTags:this.canCreateTags(),onToggleTagging:this.toggleTaggingMode,feedbackData:this.props.feedbackData,feedbackTarget:this.props.feedbackTarget,key:"ufi"}));},toggleTaggingMode:function(){this.setState({taggingMode:!this.state.taggingMode});},deactivateTaggingMode:function(){this.setState({taggingMode:false});},renderBody:function(){var s=[this.renderMessage(),this.renderUFI()].filter(function(u){return !!u;});if(!s.length)return null;var t="_2hao _55x2";return (g.createElement(l,{className:t},s));},canCreateTags:function(){return this.props.canCreateTags;},canDeleteTags:function(){return this.props.canDeleteTags&&this.hasTags();},hasTags:function(){return this.refs.photoCardTagger.hasTags();},canActivateTaggingMode:function(){return (this.canCreateTags()||this.canDeleteTags())&&!this.state.taggingMode;},renderBasicImage:function(){if(!this.props.imageSrc)return g.createElement("div",null);var s={};if(this.props.imageWidth)s.width=this.props.imageWidth;if(this.props.imageHeight)s.height=this.props.imageHeight;return (g.createElement("div",{className:"_i81"},g.createElement(h,{className:"_1_uo",style:s,src:this.props.imageSrc})));},renderImage:function(){if(!this.state.taggingMode)return this.renderBasicImage();return (g.createElement(m,{ref:"photoCardTagger",initialFaceboxes:this.props.initialFaceboxes,initialTags:this.props.initialTags,freeformTagging:this.props.freeformTagging,onTagAdd:this.props.onTagAdd,onTagDelete:this.props.onTagDelete,typeaheadConfig:this.props.typeaheadConfig,typeaheadSuggestions:this.props.typeaheadSuggestions},this.renderBasicImage()));},render:function(){var s=p(this.props.className,(("_26pa")+(this.state.taggingMode?' '+"_i82":'')));return (g.createElement(k,{className:s,"data-index":this.props.index},this.renderImage(),this.renderBody()));}});e.exports=r;},null);
__d("MStructuredComposerPhotoPreview.react",["React","MSnowflakePhotoCard.react","MLoadingSpinner.react","emptyFunction","prefetchImage","fbt","cx","joinClasses","BanzaiODS"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p='mtouch_composer_photo_previewer',q=g.createClass({displayName:"MStructuredComposerPhotoPreviewReact",propTypes:{onTagAdd:g.PropTypes.func,onTagDelete:g.PropTypes.func},getDefaultProps:function(){return {onTagAdd:j,onTagDelete:j};},getInitialState:function(){return {isLoading:true};},componentWillReceiveProps:function(r){if(this.props.imageSrc!==r.imageSrc){k(r.imageSrc,this._imageLoaded);this.setState({isLoading:true});}},renderLoading:function(){var r="\u52a0\u8f7d\u4e2d...";return (g.createElement("div",{className:"_4ldw"},g.createElement(i,null),r));},_imageLoaded:function(){this.setState({isLoading:false});},onTagAdded:function(r){o.bumpEntityKey(p,'add_manual_tag');this.props.onTagAdd(r);},onTagDeleted:function(r){o.bumpEntityKey(p,'remove_tag');this.props.onTagDelete(r);},render:function(){if(this.state.isLoading)return this.renderLoading();return (g.createElement(h,g.__spread({},this.props,{canCreateTags:true,canDeleteTags:true,freeformTagging:false,onTagAdd:this.onTagAdded,onTagDelete:this.onTagDeleted,initialTaggingMode:true,className:n(this.props.className,"_4m6u")})));}});e.exports=q;},null);
__d("MStructuredComposerPhotoPreview",["DOM","React","MComposerNavigationMixin","MStructuredComposerPhotoPreview.react","PhotosUploadWaterfallXMixin","PUWSteps","mixin","performanceNow"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=m(k,i);for(var p in o)if(o.hasOwnProperty(p))r[p]=o[p];var q=o===null?null:o.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=o;function r(s){"use strict";this.$MStructuredComposerPhotoPreview0=s.root;this.$MStructuredComposerPhotoPreview1=s.typeaheadConfig;this.$MStructuredComposerPhotoPreview2=s.suggestions;this.$MStructuredComposerPhotoPreview3=null;this.$MStructuredComposerPhotoPreview4=null;this.$MStructuredComposerPhotoPreview5=g.find(this.$MStructuredComposerPhotoPreview0,'div','structured-composer-photo-preview-card');this.$MStructuredComposerPhotoPreview6=h.render(h.createElement(j,{typeaheadConfig:this.$MStructuredComposerPhotoPreview1,typeaheadSuggestions:this.$MStructuredComposerPhotoPreview2}),this.$MStructuredComposerPhotoPreview5);}r.prototype.$MStructuredComposerPhotoPreview7=function(s,t){"use strict";h.render(h.createElement(j,{imageSrc:s,initialFaceboxes:t,onTagAdd:this.$MStructuredComposerPhotoPreview3,onTagDelete:this.$MStructuredComposerPhotoPreview4,typeaheadConfig:this.$MStructuredComposerPhotoPreview1,typeaheadSuggestions:this.$MStructuredComposerPhotoPreview2}),this.$MStructuredComposerPhotoPreview5);g.show(this.$MStructuredComposerPhotoPreview0);};r.prototype.$MStructuredComposerPhotoPreview8=function(){"use strict";g.hide(this.$MStructuredComposerPhotoPreview0);h.unmountComponentAtNode(this.$MStructuredComposerPhotoPreview5);};r.prototype.show=function(s,t){"use strict";if(this.hasNavigationPolicy())return;this.newNavigationPolicy().addOnOpen(function(){this.$MStructuredComposerPhotoPreview7(s.previewURI,t);this.$MStructuredComposerPhotoPreview9=n();this.logStep(l.CLIENT_PHOTO_PREVIEW_OPEN,{});}.bind(this)).addOnClose(function(){g.hide(this.$MStructuredComposerPhotoPreview0);this.logStep(l.CLIENT_PHOTO_PREVIEW_CLOSE,{elapsed_time:n()-this.$MStructuredComposerPhotoPreview9});}.bind(this)).open();};r.prototype.setOnDeleteXYTag=function(s){"use strict";this.$MStructuredComposerPhotoPreview4=s;};r.prototype.setOnAddXYTag=function(s){"use strict";this.$MStructuredComposerPhotoPreview3=s;};r.prototype.hide=function(){"use strict";if(!this.hasNavigationPolicy())return;this.currentNavigationPolicy().close();};r.prototype.setWaterfall=function(s,t,u){"use strict";this.$MStructuredComposerPhotoPreviewa=s;this.$MStructuredComposerPhotoPreviewb=t;this.$MStructuredComposerPhotoPreviewc=u;return this;};r.prototype.getWaterfallID=function(){"use strict";return this.$MStructuredComposerPhotoPreviewa;};r.prototype.getWaterfallAppName=function(){"use strict";return this.$MStructuredComposerPhotoPreviewb;};r.prototype.getWaterfallSource=function(){"use strict";return this.$MStructuredComposerPhotoPreviewc;};e.exports=r;},null);
__d("whitelistObjectKeys",[],function(a,b,c,d,e,f){function g(h,i){var j={},k=Array.isArray(i)?i:Object.keys(i);for(var l=0;l<k.length;l++)if(typeof h[k[l]]!=='undefined')j[k[l]]=h[k[l]];return j;}e.exports=g;},null);
__d("MStructuredComposer",["CSS","CurrentUser","DataStore","DOM","MAjaxify","MAjaxifyFormTypes","MarauderLogger","MMultiPhotoUploaderAttachmentState","MComposerConfig","MComposerDataStoreKeys","MComposerEntry","MComposerLogger","MComposerLoggerPublishingListeners","MComposerNavigationMixin","MComposerPresence","MComposerSigils","MComposerTypes","MComposition","MCompositionConfigFields","MCompositionConfigStore","MCompositionMinutiaeFields","MCompositionMinutiaeStore","MCompositionPhotoFields","MCompositionPhotoStore","MCompositionPlaceFields","MCompositionPlaceStore","MCompositionPrivacyStore","MCompositionShareFields","MCompositionShareStore","MCompositionStatusStore","MCompositionStatusFields","MCompositionWithStore","MCompositionWithFields","MCompositionStoreID","MCompositionUserActions","MComposerWaterfallEvent","MInputFocus","MJSEnvironment","MPrivacyComposerSelector","MRequest","MRequestTypes","MStructuredComposerOGInput","MStructuredComposerPhotoPreview","MTagSuggestionsController","MTouchClick","MViewport","PrivacyConst","PrivacyRemindersLoggingTypes","Stratcom","XPhotosIncrementThumbnailPreviewNUXImpressionsControllerURIBuilder","XPrivacyAudienceAlignmentLoggingControllerURIBuilder","XPrivacyRemindersImpressionLoggingControllerURIBuilder","UnpublishedContentTypeJSConstants","URLMatcher","Vector","areEqual","$","fbt","ge","getObjectValues","mixin","setTimeoutAcrossTransitions","whitelistObjectKeys","copyProperties","createDeprecatedProperties","cx","mtx","WildeLoader"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub){var vb=b('WildeLoader').MWildeTimelinePublisherBar,wb,xb='mttux',yb='holdout',zb='device_short',ac='exposed',bc='learn_more',cc='blur',dc='selector',ec='public_sticky',fc='friends_sticky',gc='dismissal',hc=5,ic=ob(t);for(var jc in ic)if(ic.hasOwnProperty(jc))lc[jc]=ic[jc];var kc=ic===null?null:ic.prototype;lc.prototype=Object.create(kc);lc.prototype.constructor=lc;lc.__superConstructor__=ic;function lc(nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc,ad,bd,cd,dd,ed,fd){"use strict";wb=yc;this._ogClearablePreview=ad;this._albumPicker=qc;this._ogTagger=rc;this._multiPhotoUploader=sc;this._pageInfo=tc;this._createLabel=uc;this._updateLabel=vc;this._photosPreviewConfig=ed;this._photoPreview=null;this._photosPreviewNux=fd;this._numMentions=0;this._hasMentions=!!this._numMentions;this._defaultHideConfig={};this._targetType=wc;this._entryPointRef=xc;this._survey_photos_composercancel_uri=dd;this._stayHiddenUntilOGTaggerCloses=false;this._logWrittenListener=null;this._onComposerCancel=null;this._onComposerSubmit=null;this._root=nc;this._isCreateAlbumDialogOpen=false;this._mentionsEnabled=true;var gd=kb('attach_photo'),hd=z.get(y.DISABLE_ALBUM,this._defaultHideConfig[y.DISABLE_ALBUM]);if(!hd&&(this._albumPicker||this._multiPhotoUploader)){g.conditionClass(gd,"_6-k",true);}else j.hide(gd);this._mainPage=kb('viewport');this._composer=j.find(this._root,'div','composer-main-view');this._composerTitle=j.find(this._composer,'div','composer-title');this._submitButtonNode=j.find(this._composer,'button','submit_composer');this._staticTemplates=kb('static_templates');this._form=j.find(this._composer,'form');this._starsRatableInput=j.find(this._form,'div','composer-stars-ratable-input');this._ratingTextContainer=j.scry(this._form,'div','composer-stars-rating-text')[0];this._friendsInputController=new wb(oc,j.find(this._form,'div','with-tags'),j.find(this._form,'button','with-button'));if(this._multiPhotoUploader&&bd){this._tagSuggestionsController=new xa(oc,this._multiPhotoUploader,this._targetType,this._form.target.value,this._friendsInputController,cd);if(this._photosPreviewConfig)this._multiPhotoUploader.getUploader().setProps({onUploadStarted:this._initPhotoPreview.bind(this)});}this._contextualMessage=j.scry(this._form,'div','contextual_message')[0];var id=j.scry(this._form,'div','js_placeholder');this._placeholder=id.length>0?id[0]:null;this._textarea=j.find(this._form,'textarea','composer-textarea');this._postTypeInput=j.scry(this._form,'input','unpublished_content_type_input')[0];this._defaultAction=this._form.action;if(rc)this._ogInputController=new va(j.find(this._form,'div','og-tags'),j.find(this._form,'button','og-button'),j.find(this._form,'div','og-object-attachment'),rc,this._ogClearablePreview);this._buttonbar=j.find(this._root,'div','composer-buttons');this._listeners=[];this._editChangesProducers=[ba,fa,ga,ja,la];this._saveConfig();}lc.prototype._getNavigationPolicy=function(nc,oc){"use strict";var pc=this.newNavigationPolicy().addOnOpen(function(){return this._showComposer(nc,oc||{});}.bind(this)).addOnOpenChild(function(){return this._hideForInterstitial();}.bind(this)).addOnReturnFromChild(function(){g.conditionShow(this._composer,!this._stayHiddenUntilOGTaggerCloses);}.bind(this)).addOnCloseByBrowser(function(){return this._cancelComposer();}.bind(this));if(this._onComposerCancel)pc.addOnCloseByBrowser(this._onComposerCancel);return pc;};lc.prototype._getDefaultCancelConfirmMessage=function(){"use strict";if(this._composerType===w.EDIT){return "\u786e\u5b9a\u653e\u5f03\u4fee\u6539\uff1f";}else return "\u786e\u5b9a\u653e\u5f03\u53d1\u5e16\uff1f";};lc.prototype._navigateAwayFromComposerAndCancel=function(){"use strict";if(!this.hasNavigationPolicy())return;r.log(pa.COMPOSER_CANCEL_INTENT);var nc;if(o.CONFIRM_CANCEL)if(this._composerType===w.EDIT){nc=this._shouldEditStatus();}else nc=this._shouldPostStatus();if(nc){var oc=z.get(y.CANCEL_CONFIRMATION_MESSAGE)||this._getDefaultCancelConfirmMessage();if(!a.confirm(oc))return;}var pc=this.currentNavigationPolicy().addOnClose(function(){return this._cancelComposer();}.bind(this));if(this._onComposerCancel)pc.addOnClose(this._onComposerCancel);pc.close();};lc.prototype._navigateAwayFromComposer=function(nc){"use strict";if(!this.hasNavigationPolicy())return;var oc=this.currentNavigationPolicy().addOnClose(function(){return this._resetComposer();}.bind(this));oc.setIsOnSubmit();if(this._onComposerSubmit)oc.addOnClose(this._onComposerSubmit.bind(null,nc));oc.close();};lc.prototype._navigateToComposer=function(nc,oc){"use strict";this._getNavigationPolicy(nc,oc).open();};lc.prototype._navigateToComposerAndCheckin=function(){"use strict";this._getNavigationPolicy(w.CHECKIN).addOnOpen(function(){j.hide(this._composer);this._startCheckin();}.bind(this)).open();};lc.prototype._focusOnTextarea=function(){"use strict";if(!this._skipFocus())this._textarea.focus();};lc.prototype._initializeComposition=function(nc){"use strict";nc[na.CONFIG]=rb({},this._defaultConfig,nc[na.CONFIG]);oa.initialize(nc);};lc.prototype._setPlaceholder=function(nc){"use strict";if(this._placeholder){this._textarea.placeholder="";j.setContent(this._placeholder,nc);}else this._textarea.placeholder=nc;};lc.prototype._showComposer=function(nc,oc){"use strict";cb.invoke('MPrivacyDeferredSelector::init');var pc=oc[p.COMPOSITION]||{};if(!pc.hasOwnProperty(na.CONFIG))pc[na.CONFIG]=qb(oc,nb(y));this._initializeComposition(pc);cb.invoke('MMentions:reset');this._composerType=z.get(y.COMPOSER_TYPE,nc);if(oc&&oc.og_activity){var qc={};for(var rc in aa){var sc=aa[rc];qc[sc]=oc.og_activity[sc];}oa.minutiaeSet(qc);}this._logWrittenListener=j.listen(this._textarea,'keyup',null,function(){return this._logWritten();}.bind(this));var tc=z.get(y.PLACEHOLDER);if(tc)this._setPlaceholder(tc);var uc=z.get(y.CONTEXTUAL_MESSAGE);this._syncSubmit=z.get(y.SYNC_SUBMIT);if(this._contextualMessage){this._contextualMessage.textContent=uc||'';g.conditionShow(this._contextualMessage,!!uc);}if(this._ogTagger){m.log('og_composer_show_composer');if(!this._ogTaggerLoaded){var vc='/platform/og/composer/tagger',wc=new ta(vc).setType(ua.DEPENDENT);wc.listen('postprocess',function(){if(this._composerType===w.ACTIVITY)this._ogTagger.toggleIncludedPlaceSelector(true);m.log('og_composer_async_loaded');}.bind(this));k.ajaxify(null,null,wc,null);this._ogTaggerLoaded=true;}}if(this._multiPhotoUploader&&nc===w.PHOTO){this._showMultiPhotoUploader();}else if(this._ogTagger&&nc===w.ACTIVITY)this._ogTagger.toggleIncludedPlaceSelector(true);if(this._composerType===w.EDIT)this._observeEditChanges();j.hide(this._mainPage);j.show(this._composer);za.scrollTo(0,0);if(this._specificAudienceTooltip&&!this._specificAudienceTooltipShown){this._specificAudienceTooltip.show();this._specificAudienceTooltipShown=true;var xc=new ta('/a/composer/nux/write/').setMethod('POST').setData({cns:1});k.ajaxify(null,null,xc);}else if(this._inAudienceAlignmentExp&&!this._triedToShowInterstitial&&this._composerEligibleForInterstitial()){this._triedToShowInterstitial=true;if(this._shouldShowInterstitial()){this._logAAA(ac);setTimeout(this._showInterstitial.bind(this),300);this._friendsPrivacyRow=null;cb.listen('MPrivacyDeferredSelector-loaded',null,this.captureFriendsPrivacyRow.bind(this));}else this._logAAA(yb);}cb.invoke('MStructuredComposer-opened',null,{session_id:this._getSessionID(),composer_type:nc,target_type:this._targetType,entry_point_ref:this._entryPointRef,opened_time:z.get(y.OPENED_AT)});r.log(pa.COMPOSER_ENTRY,{composer_type:nc,ref:this._entryPointRef,target_type:this._targetType});return true;};lc.prototype._observeEditChanges=function(){"use strict";this._hasEditChanges=false;this._editChangesProducers.forEach(function(nc){this._listeners.push(nc.once('change',this._handleEditChange,this));}.bind(this));};lc.prototype._navigateToComposerAndShowActivitySelector=function(nc){"use strict";this._getNavigationPolicy(w.ACTIVITY,nc).addOnOpen(function(){j.hide(this._composer);cb.invoke('MComposer:open:activity');}.bind(this)).open();};lc.prototype._navigateToComposerAndShowFileDialog=function(nc,event){"use strict";this._getNavigationPolicy(w.PHOTO,nc).addOnOpen(function(){if(ra.IS_ANDROID)this._form.offsetHeight;ya.click(kb('photo_input'),event);}.bind(this)).open();};lc.prototype._navigateToComposerAndFocus=function(nc,oc){"use strict";this._getNavigationPolicy(nc,oc).addOnOpen(function(){var pc=!this._postInterstitialTooltip||(ra.IS_APPLE_WEBKIT_IOS&&ra.OS_VERSION>=7);if(!this._skipFocus()&&!this._specificAudienceTooltip&&pc&&!this._newcomerAudienceNux&&!this._showStickyGuardrailFlyout){this._textarea.focus();var qc=this._getStatusText().length;this._textarea.setSelectionRange(qc,qc);}}.bind(this)).open();};lc.prototype._showNewcomerAudienceNux=function(){"use strict";this._textarea.blur();this._newcomerAudienceNux.registerComposer(this._composer);this._newcomerAudienceNux.handleVerticalPadding();this._newcomerAudienceNux.registerPrivacySelector(this._privacySelector);this._newcomerAudienceNux.show();this._addNewcomerAudienceNuxListeners();};lc.prototype._addNewcomerAudienceNuxListeners=function(){"use strict";this._listeners.push(cb.listen('MNewcomerAudienceNux:public',null,function(){this.capturePublicPrivacyRow();}.bind(this)));};lc.prototype.setDefaultHideConfig=function(nc){"use strict";this._defaultHideConfig=nc;};lc.prototype._closePrivacy=function(){"use strict";var nc=this._getPrivacySelector();nc&&nc.hideMenu();};lc.prototype._openPrivacy=function(){"use strict";var nc=this._getPrivacySelector();nc&&nc.showMenu();};lc.prototype._removeAlbumAndPhoto=function(){"use strict";var nc=mb('default-album');if(nc)ya.click(nc);if(!this._multiPhotoUploader)j.hide(kb('photo_display'));if(!this._getIsAlbumDisabled())j.hide(kb('album-button'));};lc.prototype._updateSubmitButtonState=function(){"use strict";var nc=true;if(this._composerType===w.RECOMMENDATION){if(this._shortReviewsDisableDone){var oc=i.get(this._longReviewTips).threshold,pc=this._textarea.value.length,qc=i.get(this._longReviewTips).force_length;if(qc&&pc!==0&&pc<oc)nc=false;}if(this._starsRatableInput){var rc=j.find(this._starsRatableInput,'input','stars-ratable-input');if(!rc.value||rc.value==="0")nc=false;}}if(this._photosUploading)nc=false;this._toggleSubmitButtonState(nc);};lc.prototype._writeRecommendation=function(nc){"use strict";var oc=i.get(nc);this.captureFriendsPrivacyRow.bind(this);this._changeConfig(oc);this._composerType=w.RECOMMENDATION;this._recommendationData=rb({},oc);q.invoke(new x(oc[p.COMPOSITION]));};lc.prototype._changeSettingsAfterOpen=function(){"use strict";if(this._composerType===w.RECOMMENDATION)this._setupRecommendationAfterOpen();};lc.prototype._setupRecommendationAfterOpen=function(){"use strict";var nc=this._recommendationData;this._friendsInputController.setVisible(false);j.show(this._starsRatableInput);if(this._pageInfo)if(nc.pageinfo){j.show(this._pageInfo);j.setContent(this._pageInfo,nc.pageinfo);}else j.hide(this._pageInfo);if(this._ratingTextContainer&&nc.zeroratingtext)this._ratingTextContainer.textContent=nc.zeroratingtext;this._reviewLength=-1;if(this._longReviewTips&&this._longReviewTips.children.length){j.show(this._longReviewTips);this._updateLongReviewTipText();}nc.viewerrating=nc.viewerrating||0;cb.invoke('MPagesStarsRatableBase-setStars',null,{rating:nc.viewerrating});if(this._starPicker&&!nc.viewerrating){j.hide(this._starsRatableInput);this._starPicker.setTitle(nc.starpickertitle);}this._updateSubmitButtonState();};lc.prototype._updateLongReviewTipText=function(){"use strict";if(this._longReviewTips&&this._longReviewTips.children.length){var nc=this._textarea.value.length;if(this._reviewLength===nc)return;this._reviewLength=nc;var oc=i.get(this._longReviewTips).threshold,pc=i.get(this._longReviewTips).force_length;if(pc){var qc=j.find(this._longReviewTips,'span','composer-review-length-count'),rc=lb._("{character_count}\/{minimum_length} \u00b7",[lb.param("character_count",nc),lb.param("minimum_length",oc)]);j.setContent(qc,rc+' ');this._updateSubmitButtonState();}var sc=j.find(this._longReviewTips,'span','composer-short-review');g.conditionShow(sc,nc>0&&nc<oc);var tc=j.find(this._longReviewTips,'span','composer-long-review');g.conditionShow(tc,nc>=oc);}};lc.prototype._resetAlbumSelection=function(){"use strict";if(!this._getIsAlbumDisabled())g.conditionClass(kb('album-button'),'active',false);this._privacySelector&&j.show(this._privacySelector);kb('album_fbid').value='0';kb('album_privacy').value='';this._albumChosen=false;this._albumPicker.resetAlbumSelection();};lc.prototype._resetComposer=function(){"use strict";this._onComposerCancel=null;this._onComposerSubmit=null;if(this._isPageCheckin){this._isPageCheckin=false;this._changeConfig(this._defaultConfig);}this._toggleSubmitButtonState(true);j.hide(j.find(document,'div','m-status-empty-error'));this._hasMentions=false;this._numMentions=0;this._friendsInputController.reset();if(this._ogTagger){this._ogInputController.reset();cb.invoke('composerReset');this._ogTagger.hide();}if(this._photoAction){j.find(this._attachPhoto,'input','photo-input').value='';this._hasPhoto=false;if(!this._getIsAlbumDisabled()){this._removeAlbumAndPhoto();this._albumPicker.hide();}else{j.hide(this._attachPhoto);this._photoOpen=false;}g.conditionClass(this._photoButton,'active',false);j.show(this._photoButton);}if(this._pageInfo)j.hide(this._pageInfo);if(this._longReviewTips)j.hide(this._longReviewTips);if(this._starsRatableInput)j.hide(this._starsRatableInput);this._newcomerAudienceNux=null;this._showStickyGuardrailFlyout=false;this._photoButton&&j.show(this._photoButton);var nc=this._getPrivacySelector();if(nc&&nc.isOpen())nc.hideMenu();this._privacySelector&&j.show(this._privacySelector);this._updateTagExpansion();this._onlyMeFlyoutShown=false;this._mentionsEnabled=true;cb.invoke('MComposer:tagger:clear');this._resetPosition();this._determineFormAction();this._closeComposer();this._cleanupLogWritten();cb.invoke('MMentions:enable');cb.invoke('MStructuredComposer:reset');if(this._multiPhotoUploader){this._multiPhotoUploader.resetState();this._multiPhotoUploader.alterPreviewGrid(false);}oa.finalize();};lc.prototype._resetPosition=function(){"use strict";if(this.getScrollToElem()&&this.getShouldScroll()){var nc=ib.getPos(this.getScrollToElem()).y-5;pb(za.scrollTo.bind(null,0,nc),0);}};lc.prototype._shouldSubmit=function(){"use strict";if(!y.DISABLE_SUBMIT_REQUEST)return true;return !z.get(y.DISABLE_SUBMIT_REQUEST,false);};lc.prototype._shouldSyncSubmit=function(){"use strict";if(this._forceAsync)return false;if(this._syncSubmit)return true;return this._isPageCheckin||this._hasPhotos()||this._isUnpublishedPost;};lc.prototype._shouldShowLinkPreview=function(){"use strict";return this._composerType!==w.SHARE&&(this._composerType===w.ACTIVITY||this._composerType===w.PHOTO||this._composerType===w.CHECKIN||this._composerType===w.STATUS)&&!this._hasPhoto;};lc.prototype._shouldPostStatus=function(){"use strict";if(!ia.isEmpty())return true;var nc=j.convertFormToDictionary(this._form),oc=mc(nc.status)!=='',pc=mc(nc.message)!=='',qc=mc(nc.recommendation)!=='',rc=oc||pc||qc;if(this._composerType===w.GROUP_SELL){var sc=mc(nc.group_sell_price)!==''&&mc(nc.group_sell_currency)!==''&&mc(nc.group_sell_title)!==''&&mc(nc.group_sell_price_type)!=='';if(!sc)return false;}var tc=nc.rating!=="0",uc=this._friendsInputController.hasTokens(),vc=this._ogInputController&&this._ogInputController.hasValue(),wc=this._hasPhotos()||vc,xc=!fa.isEmpty()||this._isPageCheckin||this._pinPlace;if(rc||wc||xc||uc||tc)return true;return false;};lc.prototype._shouldEditStatus=function(){"use strict";return this._hasEditChanges;};lc.prototype._confirmClicked=function(){"use strict";if(!this._shouldPostStatus()){var nc=j.find(document,'div','m-status-empty-error');if(mc(this._getStatusText())==='')this._setStatusText('');j.show(nc);j.setContent(nc,"\u8bf7\u5728\u53d1\u5e16\u5b50\u4e4b\u524d\u5411\u4f60\u7684\u72b6\u6001\u6dfb\u52a0\u5185\u5bb9");return;}if(this._tagSuggestionsController)this._tagSuggestionsController.generateHiddenInput(this._form);if(!this._mentionsEnabled)cb.invoke('MComposerStatusTextarea:flush',null,{value:this._textarea.value});if(!this._albumChosen){var oc=this._getPrivacySelector(),pc;if(oc&&(oc.getSelectedValue()==ab.PostParam.SELF)){pc=(new fb()).setString('type',bb.ONLY_ME_IMPRESSION).getURI();k.ajaxify(null,null,new ta(pc));var qc=this._friendsInputController.hasTokens()||this._hasMentions;if(!qc&&!window.confirm("\u53ea\u6709\u4f60\u80fd\u67e5\u770b\u6b64\u5e16\u5b50\u3002\u70b9\u51fb\u201c\u53d6\u6d88\u201d\u53ef\u66f4\u6539\u53d7\u4f17\u3002")){this._onlyMeFlyoutShown=true;return;}}else if(this._onlyMeFlyoutShown){pc=(new fb()).setString('type',bb.ONLY_ME_CONVERSION).getURI();k.ajaxify(null,null,new ta(pc));}}this._onlyMeFlyoutShown=false;var rc=this._ogInputController&&this._ogInputController.getLoggingData();if(rc)m.log('og_composer_action_created',undefined,rc);this._toggleSubmitButtonState(false);if(this._composerType===w.RECOMMENDATION)if(this._longReviewTips&&this._longReviewTips.children.length){var sc=i.get(this._longReviewTips).threshold,tc=this._textarea.value.length,uc=i.get(this._longReviewTips).force_length;if(uc&&tc!==0&&tc<sc){if(this._shortReviewsDisableDone)return;var vc=lb._("\u8bc4\u8bba\u4e0d\u80fd\u5c11\u4e8e{min_length}\u5b57\u3002\u4f60\u5e0c\u671b\u4e0d\u70b9\u8bc4\u800c\u53ea\u63d0\u4ea4\u8bc4\u5206\u5417\uff1f",[lb.param("min_length",sc)]);if(!a.confirm(vc)){this._toggleSubmitButtonState(true);return;}cb.invoke('MComposerStatusTextarea:flush',null,{value:''});}}r.log(pa.COMPOSER_POST,{loaded_time:z.get(y.OPENED_AT),targetId:this._form.target.value||h.getID()});if(this._multiPhotoUploader&&this._multiPhotoUploader.hasPhotos()){this._multiPhotoUploader.logClientPost(this._submit.bind(this));}else this._submit();};lc.prototype._getAsyncContainer=function(){"use strict";return (document.getElementById('structured_composer_async_container')||(this._clickedButton?this._clickedButton.parentNode:null));};lc.prototype._getSessionID=function(){"use strict";return z.get(y.SESSION_ID,null);};lc.prototype._getStatusText=function(){"use strict";return ja.get(ka.TEXT,'');};lc.prototype._setStatusText=function(nc){"use strict";var oc={};oc[ka.TEXT]=nc;oa.statusUpdate(oc);};lc.prototype._submit=function(){"use strict";if(!this._shouldSubmit()){this._submitNoRequest();return;}if(this._shouldSyncSubmit()){this._submitSyncRequest();return;}this._submitAsyncRequest();};lc.prototype._getWithTagCount=function(){"use strict";var nc=la.get(ma.TOKENS);return nc?nc.length:0;};lc.prototype._getXYTagCount=function(){"use strict";if(!this._tagSuggestionsController)return 0;return this._tagSuggestionsController.getNumXYTags();};lc.prototype._getTagsUser=function(){"use strict";return this._numMentions;};lc.prototype._submitAsyncRequest=function(){"use strict";var nc=j.convertFormToDictionary(this._form),oc={};oc.hasPhoto=this._hasPhotos();oc.hasVideo=this._hasVideos();oc.xy_tag_count=this._getXYTagCount();oc.with_tag_count=this._getWithTagCount();oc.tags_user=this._getTagsUser();var pc=rb(new s(this._getSessionID(),oc),{postprocess:this.cleanupSoftState.bind(this)});k.form(null,this._form,'async_composer',l.CACHE,this._getAsyncContainer(),false,[pc]);this._staticTemplates.style.height='';this._navigateAwayFromComposer(nc);this._resetPosition();};lc.prototype._submitNoRequest=function(){"use strict";this._staticTemplates.style.height='';this._navigateAwayFromComposer(j.convertFormToDictionary(this._form));};lc.prototype._submitSyncRequest=function(){"use strict";this._form.submit();this._resetPosition();};lc.prototype._getIsAlbumDisabled=function(){"use strict";return !this._albumPicker||z.get(y.DISABLE_ALBUM,this._defaultHideConfig[y.DISABLE_ALBUM]);};lc.prototype._updateButtonVisibility=function(nc,oc){"use strict";var pc=j.scry(this._form,'button',nc)[0];if(pc)g.conditionShow(pc,!z.get(oc,this._defaultHideConfig[oc]));};lc.prototype._handlePhotoUpdate=function(){"use strict";var nc=da.get(ca.PHOTO_INFO_LIST,null);if(this._multiPhotoUploader&&nc&&nc.length>0){this._multiPhotoUploader.getUploader().setAttachmentsSilent(nc);this._showMultiPhotoUploader();}};lc.prototype._handleConfigUpdate=function(){"use strict";this._form.action=z.get(y.ACTION);this._composerTitle.textContent=z.get(y.COMPOSER_TITLE);this._submitButtonNode.textContent=z.get(y.BUTTON_TEXT_SUBMIT);this._updateButtonVisibility('photo-button',y.DISABLE_PHOTOS);this._updateButtonVisibility('with-button',y.DISABLE_PEOPLE_TAGS);this._updateButtonVisibility('og-button',y.DISABLE_OG_TAG);this._updateButtonVisibility('privacy-button',y.DISABLE_PRIVACY);if(z.get(y.DISABLE_MENTIONS,false)){cb.invoke('MMentions:disable');this._mentionsEnabled=false;}else{cb.invoke('MMentions:enable');this._mentionsEnabled=true;}};lc.prototype._handleStatusUpdate=function(){"use strict";this._updateLongReviewTipText();this._updateShareScraper();};lc.prototype._handleEditChange=function(){"use strict";this._hasEditChanges=true;};lc.prototype._logWritten=function(){"use strict";if(this._getStatusText().trim()<hc)return;r.log(pa.COMPOSER_WRITTEN,{publish_target:this._form.target.value||h.getID(),loaded_time:z.get(y.OPENED_AT),written_time:Date.now()});this._cleanupLogWritten();};lc.prototype._cleanupLogWritten=function(){"use strict";if(!this._logWrittenListener)return;this._logWrittenListener.remove();this._logWrittenListener=null;};lc.prototype._saveConfig=function(){"use strict";var nc=j.scry(this._form,"input","mentionsHiddenInput")[0]||this._textarea;this._defaultConfig={action:this._form.action,targetid:this._form.target.value,inputname:nc.name,placeholder:this._placeholder?this._placeholder.textContent:this._textarea.placeholder,composertitle:this._composerTitle.textContent,pinplace:this._pinPlace,forceasync:this._forceAsync};this._defaultConfig[y.BUTTON_TEXT_SUBMIT]=this._submitButtonNode.textContent;};lc.prototype._changeConfig=function(nc){"use strict";var oc=j.scry(this._form,"input","mentionsHiddenInput")[0]||this._textarea;this._form.action=nc.action;if(this._form.target)this._form.target.value=nc.targetid;this._setPlaceholder(nc.placeholder);this._composerTitle.textContent=nc.composertitle;this._pinPlace=nc.pinplace;this._forceAsync=nc.forceasync;oc.name=nc.inputname;this._showPostTypeSelectionFlow=nc.showposttypeselector;};lc.prototype._extendComposerHeight=function(){"use strict";if(this._composer.style.display!=='none')this._staticTemplates.style.height=a.innerHeight+'px';};lc.prototype.setPrivacySelector=function(nc){"use strict";this._privacySelector=nc;};lc.prototype._getPrivacySelector=function(){"use strict";return this._privacySelector&&sa.getInstance(this._privacySelector);};lc.prototype._updateShareScraper=function(){"use strict";if(!o.SHOW_LINK_PREVIEW||!this._shouldShowLinkPreview())return;var nc=hb.permissiveMatch(this._getStatusText()),oc=ia.get(ha.DISABLED_LINKS);if(nc!==ia.get(ha.SHARE_URI)&&(!oc||!oc[nc]))setTimeout(function(){oa.shareLinkUpdate(nc);oa.configDisablePhotosUpdate(!!nc);},0);};lc.prototype._updatePostType=function(nc){"use strict";this._postTypeInput.value=nc;if(nc===gb.DRAFT){this._isUnpublishedPost=true;j.setContent(j.find(this._composer,'button','submit_composer'),"\u4fdd\u5b58");}else if(nc===gb.PUBLISHED){this._isUnpublishedPost=false;j.setContent(j.find(this._composer,'button','submit_composer'),"\u53d1\u5e03");}else if(nc===gb.SCHEDULED){this._isUnpublishedPost=true;j.setContent(j.find(this._composer,'button','submit_composer'),"\u6392\u7a0b");}};lc.prototype._updateSchedulePostTime=function(nc){"use strict";this._schedulePostYear=j.find(this._form,'input','scheduled_post_year');this._schedulePostMonth=j.find(this._form,'input','scheduled_post_month');this._schedulePostDay=j.find(this._form,'input','scheduled_post_day');this._schedulePostHour=j.find(this._form,'input','scheduled_post_hour');this._schedulePostMinute=j.find(this._form,'input','scheduled_post_minute');this._schedulePostAMPM=j.find(this._form,'input','scheduled_post_ampm');this._schedulePostYear.value=nc.year;this._schedulePostMonth.value=nc.month;this._schedulePostDay.value=nc.day;this._schedulePostHour.value=nc.hour;this._schedulePostMinute.value=nc.minute;this._schedulePostAMPM.value=nc.ampm;};lc.prototype.setPhotoAction=function(nc){"use strict";if(nc){this._attachPhoto=kb('attach_photo');this._photoButton=j.find(this._form,'button','photo-button');}this._photoAction=nc;return this;};lc.prototype.setKeyboardStateDown=function(){"use strict";};lc.prototype.setLongReviewTips=function(nc){"use strict";this._longReviewTips=nc;};lc.prototype.setShortReviewsDisableDone=function(nc){"use strict";this._shortReviewsDisableDone=nc;};lc.prototype._determineFormAction=function(){"use strict";if(this._hasPhotos()&&this._photoAction!==''){this._form.action=this._photoAction;}else this._form.action=z.get(y.ACTION)||this._defaultAction;};lc.prototype._determineMultiPhotoComposerState=function(){"use strict";if(!this._multiPhotoUploader)return;if(this._photoButton)g.conditionClass(this._photoButton,'active',this._hasPhotos());if(!this._getIsAlbumDisabled()){g.conditionShow(kb('album-button'),this._hasPhotos());if(!this._hasPhotos()&&this._albumChosen)this._resetAlbumSelection();}};lc.prototype._showMultiPhotoUploader=function(){"use strict";if(this._multiPhotoUploader){this._determineMultiPhotoComposerState();this._multiPhotoUploader.alterPreviewGrid(true);}};lc.prototype._hasVideos=function(){"use strict";return false;};lc.prototype._hasPhotos=function(){"use strict";if(this._multiPhotoUploader){return this._multiPhotoUploader.hasPhotos();}else if(!this._getIsAlbumDisabled()){return this._hasPhoto;}else return this._photoOpen&&this._hasPhoto;};lc.prototype._pagePostClicked=function(nc){"use strict";if(!nc)return;var oc=i.get(nc);this._changeConfig(oc);this._privacySelector&&j.hide(this._privacySelector);};lc.prototype.start=function(){"use strict";this._form.addEventListener('reset',this._resetComposer.bind(this));this._listeners.push(cb.listen('MComposer:entry:js',null,function(event){var nc=event.getData();this._onComposerCancel=nc[p.ON_CANCEL];this._onComposerSubmit=nc[p.ON_SUBMIT];this._navigateToComposerAndFocus(w.STATUS,nc);this._changeSettingsAfterOpen();}.bind(this)));if(this._starsRatableInput)this._listeners.push(cb.listen('MPagesStarsRatableBase-starsSet',null,this._updateSubmitButtonState.bind(this)));this._listen('click',v.ENTRY_TRIGGER_LEGACY,function(event){if(vb&&vb.listenersRegistered())return;var nc=event.getNode(v.ENTRY_TRIGGER_LEGACY),oc=i.get(nc);if(oc&&oc.og_activity&&!oc.og_activity.fbt_phrase)oc.og_activity.fbt_phrase=this._ogTagger._getTagPhrase(oc.og_activity.action_type,oc.og_activity.icon,oc.og_activity.object_str,oc.og_activity.object_id,oc.og_activity.location_str);this._navigateToComposerAndFocus(w.STATUS,oc);if(this._showStickyGuardrailFlyout)cb.invoke('show_sticky_guardrail_flyout',null,{textarea:this._textarea});if(this._newcomerAudienceNux&&!this._showStickyGuardrailFlyout)this._showNewcomerAudienceNux();this._clickedButton=nc;}.bind(this));this._listen('click','cancel_composer',this._navigateAwayFromComposerAndCancel.bind(this));this._listen('click','submit_composer',this._confirmClicked.bind(this));this._listen('m:viewport:scroll-to-header',null,this._extendComposerHeight.bind(this));this._listen('click','checkin_link',function(event){if(vb&&vb.listenersRegistered())return;this._clickedButton=event.getNode('checkin_link');this._navigateToComposerAndCheckin();event.prevent();}.bind(this));this._listeners.push(cb.listen('MComposer:close:activity',null,function(){this._stayHiddenUntilOGTaggerCloses=false;j.show(this._composer);}.bind(this)),cb.listen('cancel','MComposer:dialog:place',function(){return this._navigateAwayFromComposerAndCancel();}.bind(this)),cb.listen('close','MComposer:dialog:place',function(){return j.show(this._composer);}.bind(this)));this._listeners.push(cb.listen('MComposer:post:draft',null,function(event){var nc=event.getData();this._updatePostType(nc.type);}.bind(this)));this._listeners.push(cb.listen('MComposer:post:scheduled:time',null,function(event){var nc=event.getData();this._updateSchedulePostTime(nc);}.bind(this)));if(this._ogTagger){this._listen('click','activity_link',this._navigateToComposerAndShowActivitySelector.bind(this));this._listen('click','og_included_place_checkin',function(event){this._ogTagger.hide();this._startCheckin();}.bind(this));this._listeners.push(this._ogTagger.listen('cancelFromActivity',this._navigateAwayFromComposerAndCancel.bind(this)));}this._listeners.push(z.addListener('change',function(){return this._handleConfigUpdate();}.bind(this)));this._listeners.push(da.addListener('change',function(){return this._handlePhotoUpdate();}.bind(this)));this._listeners.push(ja.addChangeListener(function(){return this._handleStatusUpdate();}.bind(this)));this._listen('click','write_post_posts_by_others',function(event){this._pagePostClicked(event.getNode('write_post_posts_by_others'));event.prevent();}.bind(this));this._listen('composerPhotoLinkPostsByOthers',null,function(event){this._pagePostClicked(event.getData());event.prevent();}.bind(this));this._listen('click','write_post_admin',function(event){this._pagePostClicked(event.getNode('write_post_admin'));event.prevent();}.bind(this));this._listen('click','page_checkin',function(event){var nc=i.get(event.getNode('page_checkin'));this._isPageCheckin=true;if(!nc[p.COMPOSITION])nc[p.COMPOSITION]=new x().setStoreData(na.CONFIG,qb(nc,nb(y))).setStoreData(na.PLACE,{id:nc.pageid,name:nc.pagename,new_place:false}).serialize();this._navigateToComposer(w.CHECKIN,nc);if(this._ogTagger)this._ogTagger.setPlaceID(nc.pageid);event.prevent();}.bind(this));this._listeners.push(cb.listen('MComposer-write-recommendation',null,function(event){this._writeRecommendation(event.getData().element);}.bind(this)));this._listen('click','write-recommendation',function(event){this._writeRecommendation(event.getNode('write-recommendation'));event.prevent();}.bind(this));this._listen('MStructuredComposerFriendsInput-done',null,function(){return this._updateTagExpansion();}.bind(this));this._listen('MStructuredComposerFriendsInput-done',null,function(){return this._updateTagExpansion();}.bind(this));this._listen('MStructuredComposerFriendsInput-addedAutoTags',null,function(){return this._updateTagExpansion();}.bind(this));this._listen('MStructuredComposerFriendsInput-addedManualXYTags',null,function(){return this._updateTagExpansion();}.bind(this));this._listen('MStructuredComposerFriendsInput-removedManualTags',null,function(){return this._updateTagExpansion();}.bind(this));this._listen('MMentions:change',null,function(event){var nc=event.getData();if(nc.input!==this._textarea)return;this._hasMentions=nc.hasTags;this._numMentions=nc.numTags?nc.numTags:0;this._updateTagExpansion();}.bind(this));this._listeners.push(fa.addChangeListener(function(){if(fa.isEmpty())return;if(this._ogTagger){var nc=fa.get(ea.SUGGESTED_OG_ACTION_TYPE_ID,null),oc=fa.get(ea.ID),pc=fa.get(ea.SUGGESTION_MECHANISM);this._ogTagger.setPlaceID(oc);if(nc&&!this._ogInputController.hasValue()){this._ogTagger.setCancelButtonText("\u8df3\u8fc7");if(this._ogTagger.selectActionTypeImplicitly(nc)){j.hide(this._composer);this._stayHiddenUntilOGTaggerCloses=true;this._ogTagger.setSuggestionMechanism(pc);m.log('og_composer_implicit_verb_selected',undefined,{place_id:oc,suggestion_mechanism:pc});cb.invoke('MComposer:open:activity');}}}}.bind(this)));this._listen('MAlbumPicker:createalbum:open',null,function(event){this._isCreateAlbumDialogOpen=true;}.bind(this));this._listen('MAlbumPicker:createalbum:close',null,function(event){this._isCreateAlbumDialogOpen=false;}.bind(this));this._listen('keydown','tokenizer-input',function(event){if(event.getNode('structured-composer')&&this.getShouldScroll()){var nc=event.getNode('tokenizer-input'),oc=ib.getPos(nc).y;za.scrollTo(0,oc);}}.bind(this));this._listen('blur','tokenizer-input',function(event){if(event.getNode('structured-composer')&&this.getShouldScroll())za.scrollToHeader();}.bind(this));this._listen('keyup','composer-textarea',this._updateLongReviewTipText.bind(this));this._listeners.push(ja.addChangeListener(function(){return this._handleStatusUpdate();}.bind(this)));this._listen('click','photo_link',function(event){if(vb&&vb.listenersRegistered())return;var nc=event.getNode('photo_link'),oc=i.get(nc);if(this.getShouldScroll())za.scrollToHeader();if(this._multiPhotoUploader){if(!this._getIsAlbumDisabled())j.show(kb('album-button'));this._navigateToComposerAndShowFileDialog(oc,event);}else{if(!this._getIsAlbumDisabled()){this._navigateToComposerAndShowFileDialog(oc,event);event.prevent();}else{this._navigateToComposer(w.PHOTO,oc);this._photoOpen=true;j.show(this._attachPhoto);g.conditionClass(this._photoButton,'active',true);}this._clickedButton=nc;event.kill();cb.invoke('composerPhotoLink');cb.invoke('composerPhotoLinkPostsByOthers',null,event.getNode('write_post_posts_by_others'));}}.bind(this));this._listen('click','add-photo-thumbnail',function(event){r.log(pa.MEDIA_INTENT);ya.click(kb('photo_input'),event);event.prevent();}.bind(this));this._listen('click','photo-button',function(event){r.log(pa.MEDIA_INTENT);if(this._multiPhotoUploader){this._closePrivacy();if(!this._getIsAlbumDisabled())g.conditionShow(kb('album-button'),this._hasPhotos());ya.click(kb('photo_input'),event);this._determineFormAction();this._showMultiPhotoUploader();}else if(!this._getIsAlbumDisabled()){ya.click(kb('photo_input'),event);event.prevent();return;}else{this._closePrivacy();if(this._photoOpen){j.hide(this._attachPhoto);}else j.show(this._attachPhoto);this._photoOpen=!this._photoOpen;g.conditionClass(this._photoButton,'active',this._photoOpen);}}.bind(this));if(!this._getIsAlbumDisabled()){this._listeners.push(this._albumPicker.listen('cancel',function(event){r.log(pa.ALBUM_CANCEL);this._restoreComposer();}.bind(this)));this._listeners.push(this._albumPicker.listen('choose-album',function(event){if(event.is_mobile_uploads_album){this._resetAlbumSelection();}else{cb.invoke('MStructuredComposer-selectAlbum');r.log(pa.ALBUM_ADD);kb('album_fbid').value=event.album_id;kb('album_privacy').value=event.privacy_id;this._albumChosen=true;this._closePrivacy();this._privacySelector&&j.hide(this._privacySelector);}j.show(this._composer);}.bind(this)));this._listen('click','album-button',function(event){r.log(pa.ALBUM_INTENT);this._albumPicker.show();j.hide(this._composer);}.bind(this));}this._listen('MMultiPhotoUploader:attachments:add',null,function(nc){if(!z.isEmpty())r.log(pa.PHOTO_ADD,nc.getData());});this._listen('MMultiPhotoUploader:attachments:remove',null,function(nc){if(!z.isEmpty())r.log(pa.PHOTO_REMOVE,nc.getData());});this._listen('change','photo-input',function(event){var nc,oc=kb('photo_input');if(oc.value!==''&&this._photoAction!==''){if(!this._multiPhotoUploader){nc={photo_count:1};cb.invoke('MStructuredComposer-addedPhoto',null,nc);}oc.name="file1";this._hasPhoto=true;this._determineFormAction();this._photoButton&&g.conditionClass(this._photoButton,'active',true);if(!this._getIsAlbumDisabled()){if(!this._multiPhotoUploader)j.show(kb('photo_display'));j.show(kb('album-button'));}}else{this._hasPhoto=false;this._determineFormAction();g.conditionClass(this._photoButton,'active',false);if(!this._multiPhotoUploader){nc={photo_count:0};cb.invoke('MStructuredComposer-addedPhoto',null,nc);}if(!this._getIsAlbumDisabled()&&!this._multiPhotoUplaoder)this._removeAlbumAndPhoto();}}.bind(this));this._listen('multi-photos-attachment-change',null,function(event){var nc=event.getData();if(this._multiPhotoUploader.getUploader()!==nc.multiPhotoUploader)return;var oc=nc.attachments,pc=da.get(ca.PHOTO_INFO_LIST,[]);if(!jb(oc,pc)){var nc={};nc[ca.PHOTO_INFO_LIST]=oc;oa.photoUpdate(nc);}}.bind(this));this._listen('multi-photos-change',null,function(event){if(event.getData().input_id!='photo_input')return;var nc=this._multiPhotoUploader.getPhotosCount(),oc={photo_count:nc,is_multi_photo_upload:true};cb.invoke('MStructuredComposer-addedPhoto',null,oc);if(this._photosPreviewNux)if(nc>0){this._multiPhotoUploader.getUploader().setProps({showDropShadow:false});j.show(this._photosPreviewNux);}else{this._multiPhotoUploader.getUploader().setProps({showDropShadow:true});j.hide(this._photosPreviewNux);}this._determineFormAction();this._determineMultiPhotoComposerState();}.bind(this));this._listen('click','composer-buttons',function(event){this._textarea.blur();}.bind(this));this._listen('focus','composer-textarea',function(event){if(this.getShouldScroll())if(this._getStatusText()==='')qa.scrollTo(this._textarea,za.getHeaderTop());}.bind(this));this._listen('click','composer-textarea',function(event){this._closePrivacy();if(this.getShouldScroll())if(this._getStatusText()==='')qa.scrollTo(this._textarea,za.getHeaderTop());}.bind(this));this._listen(['m:page:loading','MPagesFinchVoiceSwitcher:reload'],null,this.cleanup.bind(this));this._listen('audience-x-opened',null,function(event){j.hide(this._composer);this._specificAudienceTooltip&&this._specificAudienceTooltip.hide();}.bind(this));this._listen('MMultiPhotoUploader:attachments:change',null,function(event){var nc=event.getData();this._photosUploading=nc.sending+nc.polling!==0;this._updateSubmitButtonState();}.bind(this));this._listen('MWebActivityUploader:received:share',null,this._navigateToComposer.bind(this,w.PHOTO));if(this._photoPreview||this._photosPreviewConfig)this._listen('click','structured-composer-photo-preview-done',this._hidePhotoPreviews.bind(this));cb.invoke('MStructuredComposer:start');u.register(this);return this;};lc.prototype._cancelComposer=function(){"use strict";this._staticTemplates.style.height='';cb.invoke('MStructuredComposer-canceled',null);r.log(pa.COMPOSER_CANCEL,{maximum_character_count:ja.get(ka.LONGEST_LENGTH),loaded_time:z.get(y.OPENED_AT),publish_target:this._form.target.value||h.getID()||-1,remaining_character_count:this._getStatusText().length});var nc=this._hasPhotos();this._resetComposer();if(nc&&this._survey_photos_composercancel_uri)k.ajaxify(null,null,new ta(this._survey_photos_composercancel_uri));};lc.prototype.cleanup=function(){"use strict";cb.invoke('MStructuredComposer:cleanup');this._closeComposer();this._form.removeEventListener('reset',this._resetComposer,false);for(var nc=0;nc<this._listeners.length;nc++)this._listeners[nc].remove();this._listeners=[];u.unregister(this);};lc.prototype._listen=function(event,nc,oc){"use strict";this._listeners.push(cb.listen(event,nc,oc));};lc.prototype.setSpecificAudienceTooltip=function(nc){"use strict";this._specificAudienceTooltip=nc;};lc.prototype._isPublicAudience=function(){"use strict";var nc=j.scry(this._buttonbar,'table','privacy-table')[0];if(!nc)return false;var oc=j.scry(nc,'tr','privacy-option checked')[0];if(!oc)return false;var pc=i.get(oc);return pc.value==ab.PostParam.EVERYONE;};lc.prototype.setInAudienceAlignmentExp=function(nc){"use strict";this._inAudienceAlignmentExp=nc;};lc.prototype.setAudienceAlignmentFlyout=function(nc){"use strict";this._audienceAlignmentFlyout=nc;};lc.prototype.setAudienceAlignmentTitle=function(nc){"use strict";this._audienceAlignmentTitle=nc;};lc.prototype.setPostInterstitialTooltip=function(nc){"use strict";this._postInterstitialTooltip=nc;};lc.prototype.setPostInterstitialTooltipText=function(nc){"use strict";this._postInterstitialTooltipText=nc;};lc.prototype.setInterstitialDismissable=function(nc){"use strict";this._interstitialDismissable=nc;};lc.prototype._resetTooltip=function(){"use strict";var nc=j.find(this._buttonbar,'div','privacy-button-icon');this._postInterstitialTooltip.setContext(nc);};lc.prototype._composerEligibleForInterstitial=function(){"use strict";var nc=this._form.target.value;if(nc&&nc!=h.getID())return false;if(this._composerType!==w.STATUS)return false;if(!this._isPublicAudience())return false;if(za.getScreenHeight()<340&&ra.IS_ANDROID){this._logAAA(zb);return false;}return true;};lc.prototype.setNewcomerAudienceNux=function(nc){"use strict";this._newcomerAudienceNux=nc;};lc.prototype.setStickyGuardrailFlyout=function(nc){"use strict";this._showStickyGuardrailFlyout=nc;};lc.prototype._shouldShowInterstitial=function(){"use strict";if(!this._audienceAlignmentFlyout||!this._audienceAlignmentTitle||!this._postInterstitialTooltip||!this._postInterstitialTooltipText||this._postInterstitialTooltipText.length!=4)return false;return true;};lc.prototype._showInterstitial=function(){"use strict";if(!this._shouldShowInterstitial()||!this._composerEligibleForInterstitial())return;cb.invoke('MMentions:decorations:hide',null,{});this._textarea.blur();this._composerTitle.textContent=this._audienceAlignmentTitle;za.scrollTo(0,0);this._audienceAlignmentFlyout.setContext(this._composerTitle);this._audienceAlignmentFlyout.addListener('blur',function(){this._logAAA(cc);}.bind(this));this._audienceAlignmentFlyout.show();this._adjustAudienceFlyoutToHeight();if(!this._interstitialDismissable){this._toggleCancelButtonHidden(true);this._toggleSubmitButtonHidden(true);}if(!this._alignmentLearnmoreBody)this._alignmentLearnmoreBody=j.scry(document.body,'div','aaa_learn_more')[0];if(!this._alignmentInterstitialBody)this._alignmentInterstitialBody=j.scry(document.body,'div','composer_aaa_tux')[0];this._listen('click','aaa_dismiss',function(nc){var oc=this._postInterstitialTooltipText[0];this.closeInterstitial(oc);this._logAAA(gc);}.bind(this));this._listen('click','aaa_learn_back',function(nc){za.scrollTo(0,0);j.hide(this._alignmentLearnmoreBody);j.show(this._alignmentInterstitialBody);}.bind(this));this._listen('click','aaa_learn',function(nc){za.scrollTo(0,0);j.hide(this._alignmentInterstitialBody);j.show(this._alignmentLearnmoreBody);j.show(this._alignmentLearnmoreBody.firstChild);this._logAAA(bc);}.bind(this));this._listen('click','aaa_more',function(nc){this._openPrivacy();var oc=this._postInterstitialTooltipText[1];this.closeInterstitial(oc);this._logAAA(dc);}.bind(this));this._listen('click','aaa_friends',function(nc){if(this._friendsPrivacyRow){this._handleInterstitialFriends();}else this._waitingForFriendsRow=true;this._logAAA(fc);}.bind(this));this._listen('click','aaa_public',function(nc){var oc=this._postInterstitialTooltipText[3];this.closeInterstitial(oc);this._logAAA(ec);}.bind(this));};lc.prototype._adjustAudienceFlyoutToHeight=function(){"use strict";if(ra.IS_APPLE_WEBKIT_IOS)return;var nc=j.scry(document.body,'div','m-layer-root')[0],oc=j.scry(document.body,'a','aaa_more')[0];if(!oc||!nc)return;var pc=za.getScreenHeight(),qc=ib.getElementPosition(oc).y+oc.offsetHeight;if(qc>pc)j.hide(j.scry(nc,'div','tux-body')[0]);};lc.prototype.captureFriendsPrivacyRow=function(){"use strict";this._friendsPrivacyRow=this._getPrivacyRow(ab.PostParam.FRIENDS);if(!this._friendsPrivacyRow)this.closeInterstitial(this._postInterstitialTooltipText[0]);if(this._waitingForFriendsRow)this._handleInterstitialFriends();};lc.prototype.capturePublicPrivacyRow=function(){"use strict";this._publicPrivacyRow=this._getPrivacyRow(ab.PostParam.EVERYONE);cb.invoke('MPrivacyComposerMenu:updatePrivacy',null,{row:this._publicPrivacyRow});};lc.prototype._getPrivacyRow=function(nc){"use strict";var oc=j.find(this._buttonbar,'table','privacy-table');for(var pc=0;pc<oc.rows.length;pc++){var qc=oc.rows[pc],rc=i.get(qc);if(rc.value===ab.PostParam.EVERYONE&&nc===ab.PostParam.EVERYONE){return qc;}else if(rc.value===ab.PostParam.FRIENDS&&nc===ab.PostParam.FRIENDS)return qc;}};lc.prototype._handleInterstitialFriends=function(){"use strict";cb.invoke('MPrivacyComposerMenu:updatePrivacy',null,{row:this._friendsPrivacyRow});var nc=this._postInterstitialTooltipText[2];this.closeInterstitial(nc);};lc.prototype.closeInterstitial=function(nc){"use strict";if(!this._interstitialDismissable){this._toggleCancelButtonHidden(false);this._toggleSubmitButtonHidden(false);}za.scrollTo(0,0);this._resetTooltip();this._audienceAlignmentFlyout.hide();this._restoreComposerWithoutFocus();this._composerTitle.textContent=this._defaultConfig.composertitle;var oc=j.find(this._postInterstitialTooltip.getRoot(),'div','aaa_tooltip_text');j.setContent(oc,nc);this._postInterstitialTooltip.show();};lc.prototype._hideForInterstitial=function(){"use strict";j.hide(this._composer);this._textarea.blur();};lc.prototype._closeComposer=function(){"use strict";this._textarea.blur();j.hide(this._composer);j.show(this._mainPage);};lc.prototype._toggleSubmitButtonState=function(nc){"use strict";this._submitButtonNode.disabled=!nc;};lc.prototype._toggleCancelButtonHidden=function(nc){"use strict";var oc=j.find(this._composer,'button','cancel_composer');oc=oc.parentElement;nc?j.hide(oc):j.show(oc);};lc.prototype._toggleSubmitButtonHidden=function(nc){"use strict";g.conditionShow(this._submitButtonNode.parentElement,!nc);};lc.prototype._restoreComposerWithoutFocus=function(){"use strict";cb.invoke('MMentions:decorations:show',null,{});j.hide(this._mainPage);j.show(this._composer);j.show(this._textarea);j.show(this._buttonbar);};lc.prototype._skipFocus=function(){"use strict";return z.get(y.SKIP_FOCUS);};lc.prototype._restoreComposer=function(){"use strict";this._restoreComposerWithoutFocus();this._focusOnTextarea();};lc.prototype._logAAA=function(nc){"use strict";var oc=new eb().setEnum('product',xb).setEnum('event',nc).setInt('client_time',Date.now()).getURI();k.ajaxify(null,null,new ta(oc));};lc.prototype._incrementPhotosPreviewNuxCounter=function(){"use strict";new ta(new db().getURI()).send();};lc.prototype._showPhotosPreview=function(nc){"use strict";if(!this._photoPreview)return;if(nc.state===n.UPLOADED&&!nc.isPollingTagSuggestions){if(this._photosPreviewNux)this._incrementPhotosPreviewNuxCounter();j.hide(this._composer);this._photoPreview.show(nc,this._tagSuggestionsController.getFaceboxesCopyForPhoto(nc.fbid));}};lc.prototype._hidePhotoPreviews=function(){"use strict";if(!this._photoPreview)return;j.show(this._composer);this._photoPreview.hide();};lc.prototype._updateTagExpansion=function(){"use strict";var nc=this._friendsInputController.hasTokens()||this._hasMentions,oc=this._getPrivacySelector();oc&&oc.setShowTagExpansion(nc);};lc.prototype._startCheckin=function(){"use strict";cb.invoke('open','MComposer:dialog:place');};lc.prototype._registerPhotoPreviewEvents=function(){"use strict";var nc=this._multiPhotoUploader.getUploader();nc.setProps({onThumbnailClicked:this._showPhotosPreview.bind(this)});this._photoPreview.setOnAddXYTag(this._tagSuggestionsController.addXYTag.bind(this._tagSuggestionsController));this._photoPreview.setOnDeleteXYTag(this._tagSuggestionsController.deleteXYTag.bind(this._tagSuggestionsController));this._photoPreview.setWaterfall(nc.getWaterfallID(),nc.getWaterfallAppName(),nc.getWaterfallSource());};lc.prototype._initPhotoPreview=function(){"use strict";if(this._multiPhotoUploader&&this._tagSuggestionsController&&this._photosPreviewConfig&&!this._photoPreview){this._photoPreview=new wa(this._photosPreviewConfig);this._registerPhotoPreviewEvents();}};sb(lc,{scrollToElem:null,showPlace:true,shouldScroll:true,syncSubmit:false,eventTaggingNuxHref:null});rb(lc.prototype,{_defaultAction:null,_defaultConfig:null,_photoAction:null,_photoOpen:false,_hasPhoto:false,_albumChosen:false,_onlyMeFlyoutShown:false,_prefill:null,_forceAsync:false,_isCheckin:false,_isUnpublishedPost:false,_isPageCheckin:false,_pinPlace:false,_albumPicker:null,_EventTaggingNuxDisplayed:false,_ogTagger:null,_textarea:null,_attachPhoto:null,_clickedButton:null,_composer:null,_composerTitle:null,_contextualMessage:null,_form:null,_mainPage:null,_photoButton:null,_staticTemplates:null,_ogTaggerLoaded:false,_specificAudienceTooltip:null,_specificAudienceTooltipShown:false,_listeners:null});function mc(nc){if(!nc)return '';nc=nc.trim();nc=nc.replace(/\n{3,}/,'\n\n');nc=nc.replace(/\t+/,' ');return nc;}e.exports=lc;},null);
__d("InitMStructuredComposer",["$","DOM","DataStore","MAlbumPicker","MOpenGraphTagger","MStructuredComposer","Stratcom"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n;function o(p){n=p.friends_tagger;var q=g(p.open_id),r=i.get(q),s=r._friendsTagger||n.fromID(p.friends_tagger_id),t=null;if(p.album_picker_id)t=r._albumPicker||new j(g(p.album_picker_id));var u;if(p.og_tagger_id)u=new k(g(p.og_tagger_id));var v=new l(q,s,null,t,u,p.multi_photo_uploader,p.page_info,p.create_label,p.update_label,p.composer_target_type,p.composer_entry_point,p.friends_input,null,p.og_clearable_preview,p.should_show_tag_suggestions,p.should_auto_tag,p.survey_photos_uri,p.photos_preview_config,p.photos_preview_nux);if(v.setDefaultHideConfig)v.setDefaultHideConfig(p.hide_config||{});if(p.privacy_selector_rewrite_id)v.setPrivacySelector(g(p.privacy_selector_rewrite_id));i.set(q,{composer:v});if(p.scroll_to_elem_id)v.setScrollToElem(g(p.scroll_to_elem_id));v.setSyncSubmit(p.syncsubmit);v.setShowPlace(p.showplace);v.setShouldScroll(p.shouldscroll);v.setLongReviewTips(p.long_review_tips);v.setShortReviewsDisableDone(p.short_reviews_disable_done);v.start();if(p.photouploaduri)v.setPhotoAction(p.photouploaduri);if(p.specific_audience_tooltip)v.setSpecificAudienceTooltip(p.specific_audience_tooltip);v.setInAudienceAlignmentExp(p.in_aaa_exp);v.setAudienceAlignmentFlyout(p.aaa_flyout);v.setAudienceAlignmentTitle(p.aaa_title);if(p.post_interstitial_tooltip){v.setPostInterstitialTooltip(p.post_interstitial_tooltip);v.setPostInterstitialTooltipText(p.post_interstitial_tooltip_text);v.setInterstitialDismissable(p.interstitial_dismissable);}if(p.newcomer_audience_nux)v.setNewcomerAudienceNux(p.newcomer_audience_nux);if(p.show_sticky_guardrail_flyout)v.setStickyGuardrailFlyout(p.show_sticky_guardrail_flyout);m.listen('MPrivacyComposerMenu::custom',null,function(w){if(w.getData().selector.parentNode.id==p.privacy_selector_rewrite_id)if(w.getData().visible){h.hide(g('structured_composer'));}else{h.hide(g('viewport'));h.show(g('structured_composer'));}});}f.main=o;},null);
__d("MFriendsTaggerReact",["DataStore","DOM","getActiveElement","createDeprecatedProperties","eventsMixinDeprecated","invariant","$"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(o){"use strict";this.setRoot(o);h.listen(this.getRoot(),'click',null,this.$MFriendsTaggerReact0.bind(this));}n.prototype.hide=function(){"use strict";i().blur();h.hide(this.getRoot());};n.prototype.show=function(){"use strict";h.show(this.getRoot());this.getTokenizer().init();this.onShow&&this.onShow();};n.prototype.clear=function(){"use strict";var o=h.find(this.getRoot(),'div','tokenizer'),p=g.get(o);if(p.tokenizer){this.setEntries([]);this.onClear&&this.onClear();}};n.prototype.hasTokens=function(){"use strict";return this.getEntries().length>0;};n.prototype.getTokens=function(){"use strict";return this.getEntries().reduce(function(o,p){o[p.id]=p;return o;},{});};n.prototype.removeToken=function(o){"use strict";this.getTokenizer().onRemoveFromCollection(o);};n.prototype.getEntries=function(){"use strict";return this.getTokenizer().getEntries();};n.prototype.setEntries=function(o){"use strict";this.getTokenizer().setEntries(o);};n.prototype.$MFriendsTaggerReact0=function(event){"use strict";if(event.getNode('cancel_with_tagger')){this.$MFriendsTaggerReact1();}else if(event.getNode('submit_with_tagger'))this.$MFriendsTaggerReact2();};n.prototype.$MFriendsTaggerReact1=function(){"use strict";this.hide();this.invoke('cancel',{});};n.prototype.$MFriendsTaggerReact2=function(){"use strict";var o=this.getEntries();this.hide();this.invoke('submit',{tokens:o});};n.prototype.getTokenizer=function(){"use strict";var o=h.find(this.getRoot(),'div','tokenizer'),p=g.get(o);l(p);l(p.tokenizer);return p.tokenizer;};n.prototype.setOnShow=function(o){"use strict";this.onShow=o;};n.prototype.setOnClear=function(o){"use strict";this.onClear=o;};n.fromID=function(o){"use strict";var p=m(o),q=g.get(p);if(!q.$MFriendsTaggerReact3)q.$MFriendsTaggerReact3=new n(p);return q.$MFriendsTaggerReact3;};n.getFriendIds=function(event){"use strict";if(event.friend_ids)return event.friend_ids;return event.tokens.map(function(o){return o.id;});};j(n,{root:null});k(n,['submit','cancel']);e.exports=n;},null);
__d("MPlacesCategorySelector",["DataStore","DOM","MRequest","Stratcom","copyProperties","createDeprecatedProperties","eventsMixinDeprecated"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(o){"use strict";this._root=o;this._listeners=[j.listen('click',[o.getAttribute('data-sigil'),'cancel_places_category_selector'],this._cancel.bind(this)),j.listen('click',[o.getAttribute('data-sigil'),'category_option'],this._submit.bind(this))];this._currentlyMakingServerRequest=false;this._viewcount=1;}n.prototype.hide=function(){"use strict";h.hide(this._root);};n.prototype.show=function(){"use strict";h.show(this._root);};n.prototype.cleanup=function(){"use strict";while(this._listeners.length)this._listeners.pop().remove();};n.prototype._hideCurrentChild=function(){"use strict";for(var o=0;o<this._viewcount-1;o++){if(!this._root.childNodes[o])return;h.hide(this._root.childNodes[o]);}};n.prototype._showCurrentChild=function(){"use strict";if(this._viewcount>=1){var o=this._getCurrentVisibleView();h.show(o);}};n.prototype._deleteLastChild=function(){"use strict";var o=this._root.childElementCount;if(o>=1)h.remove(this._root.childNodes[o-1]);};n.prototype._deleteAllChildren=function(){"use strict";var o=this._root.childElementCount;for(var p=o-1;p>=1;p--)h.remove(this._root.childNodes[p]);if(o>=1)h.show(this._root.childNodes[0]);this._viewcount=1;};n.prototype._getCurrentVisibleView=function(){"use strict";return this._root.childNodes[this._viewcount-1];};n.prototype._submit=function(event){"use strict";if(this._currentlyMakingServerRequest)return;var o=this._getCurrentVisibleView(),p=h.find(o,'*','loading'),q=h.find(o,'div','category-list-view'),r=g.get(event.getNode('category_option'));if(r.haschildren){this._currentlyMakingServerRequest=true;this._hideCurrentChild();h.show(p);h.hide(q);var s=new i('/places/addform/category.php');s.listen('done',function(){this._viewcount=this._viewcount+1;this._hideCurrentChild();this._currentlyMakingServerRequest=false;h.hide(p);h.show(q);}.bind(this));s.addData({parent_category_id:r.id,target_id:this._root.id});s.setMethod('GET');s.send();}else{this._deleteAllChildren();this._currentid=null;var t={category_name:r.name,category_value:r.id};this.hide();this.invoke('submit',t);}event.kill();};n.prototype._cancel=function(event){"use strict";if(this._currentlyMakingServerRequest)return;if(this._viewcount>1){this._deleteLastChild();this._viewcount--;this._showCurrentChild();}else{this.hide();this.invoke('cancel');}};m(n,['submit','cancel']);l(n,{disableFacewebHooks:false});k(n.prototype,{_root:null,_currentlyMakingServerRequest:null,_viewcount:null});e.exports=n;},null);
__d("MPlacesAddView",["DOM","FBJSON","MPlacesCategorySelector","MRequest","Stratcom","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=null,n=null,o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=null,y=null,z=null,aa=null,ba=null,ca=null,da=null,ea=null,fa=null,ga=true,ha={init:function(ia){m=l(ia);if(!m)return;s=g.scry(m,'div','places-category-selector-container')[0];if(s){p=new i(s);o=g.find(m,'div','add-place-form');t=g.find(m,'div','new-place-name');u=g.find(t,'input','');v=g.find(m,'div','new-place-address');w=g.find(v,'input','');x=g.find(m,'div','new-place-phone');y=g.find(x,'input','');z=g.find(m,'div','new-place-website');aa=g.find(z,'input','');da=g.scry(m,'input','is_current')[0];q=g.find(m,'span','category_input_display_text');r=g.scry(m,'input','category_input_value')[0];ba=g.scry(m.parentNode.parentNode,'div','place-header')[0];ca=g.find(m,'div','address-error-box');}else u=g.find(m,'input','new-place-name');n=g.find(m,'button','add_place_submit');this._listeners=[k.listen('click','add_place_submit',ha._verifyAndSubmitAddPlace.bind(this)),k.listen('MStructuredComposer:cleanup',null,ha._cleanup.bind(this)),k.listen('m:places:map:move',null,function(event){ea=event.getData().lat;fa=event.getData().lng;}),k.listen('m:places:map:render',null,function(event){var ja=h.parse(event.getData(),e.id);ea=ja.latitude;fa=ja.longitude;})];u.addEventListener('focus',function(){if(ga){u.blur();ga=false;}});if(s){this._listeners.push(k.listen('click','category-selector',ha._showCategorySelector.bind(this)));this._listeners.push(p.listen('cancel',ha._cancelCategorySelector.bind(this)));this._listeners.push(p.listen('submit',ha._submitCategorySelector.bind(this)));}},_cleanup:function(){while(this._listeners.length)this._listeners.pop().remove();if(p)p.cleanup();},_showCategorySelector:function(event){if(ba)g.hide(ba);g.hide(o);g.show(s);event.kill();},_showAddButton:function(){if(!r.value)return false;return true;},_updateCategorySelector:function(ia){if(q&&ia){var ja=ia.category_name,ka=ia.category_value;g.setContent(q,ja);if(ka.length!==0){r.value=ka;if(n.disabled&&ha._showAddButton())n.disabled=false;}}},_submitCategorySelector:function(event){ha._updateCategorySelector(event);g.hide(s);g.show(o);k.invoke('m:places:addplace:show');ga=true;if(ba)g.show(ba);},_cancelCategorySelector:function(){g.hide(s);g.show(o);k.invoke('m:places:addplace:show');ga=true;if(ba)g.show(ba);},_verifyAndSubmitAddPlace:function(event){var ia={new_place:true,name:u.value};if(s){ia.phone=y.value;ia.address=w.value;ia.website=aa.value;}ia.is_current=true;if(da)ia.is_current=da.checked;if(ea){ia.latitude=ea;ia.longitude=fa;}if(r){ia.topic_tokens=r;}else{var ja=g.scry(m,'span','token');ia.topic_tokens=ja;}if(ia.address){var ka=new j('/places/addform/verifyaddress.php');ka.listen('done',function(la){if(la.actions.length===1){this._submitData(ia,event);}else event.kill();}.bind(this));ka.setData({address:ia.address,latitude:ia.latitude,longitude:ia.longitude,target_id:ca.id}).setMethod('GET').send();}else this._submitData(ia,event);},_submitData:function(ia,event){if(ia.name.length!==0){g.hide(m);k.invoke('m:places:addform:submit',null,ia);}else event.kill();}};e.exports=ha;},null);
__d("MPlacesTagger",["DataStore","DOM","MParent","MPlaces","MRequest","Stratcom","$","copyProperties","eventsMixinDeprecated","mtx","FWLoader"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=b('FWLoader').FW;function r(s){"use strict";this._root=s;this._addPlaceView=h.find(s,'div','add-place');this._disableFacewebHooks=false;this._errorMessage=h.find(s,'div','error-message');this._isOpen=false;this._searchView=h.find(s,'div','places-search');this._throbber=h.find(s,'div','throbber');this._newPlaceName=h.scry(s,'div','new-place-name')[0];if(this._newPlaceName){this._newPlaceNameTextbox=h.find(this._newPlaceName,'input','');}else this._newPlaceNameTextbox=h.find(this._addPlaceView,'input','new-place-name');if(!window.FW_ENABLED)this._placeHeader=h.find(s,'div','place-header');this._listeners=[l.listen('click','cancel_at_tagger',this._cancel.bind(this)),l.listen('click','place_result',this._submit.bind(this)),l.listen('click','add_place_link',this._showAddPlace.bind(this)),l.listen('click','freeform_link',this._submitFreeformPlace.bind(this)),l.listen('m:places:addform:submit',null,this._submitAddPlace.bind(this))];}r.prototype.cleanup=function(){"use strict";for(var s=0;s<this._listeners.length;s++)this._listeners[s].remove();this._listeners=[];};r.prototype.getDisableFacewebHooks=function(){"use strict";return this._disableFacewebHooks;};r.prototype.hide=function(){"use strict";if(window.FW_ENABLED)q.setNavBarButton('','1;');h.hide(this._addPlaceView);h.show(this._searchView);h.hide(this._root);this._isOpen=false;};r.prototype.setDisableFacewebHooks=function(s){"use strict";this._disableFacewebHooks=s;};r.prototype.show=function(){"use strict";this._isOpen=true;if(window.FW_ENABLED)q.setNavBarButton("\u53d6\u6d88",this._cancel.bind(this));if(!this._hasLocation&&('geolocation' in navigator)){this._locationListener=l.listen('location-update',null,this._handleLocationUpdate.bind(this));this._errorListener=l.listen('location-error',null,this._handleLocationError.bind(this));j.monitorLocation();}else this._showed();h.show(this._root);};r.prototype._removeListeners=function(){"use strict";this._locationListener.remove();this._errorListener.remove();};r.prototype._handleLocationUpdate=function(event){"use strict";this._removeListeners();this._hasLocation=true;l.invoke('m:quicksearch:places:search');this._showed();};r.prototype._handleLocationError=function(event){"use strict";this._removeListeners();this._hasLocation=false;h.show(this._errorMessage);h.hide(this._throbber);this._showed();};r.prototype._showed=function(){"use strict";if(!this._isOpen)return;if(window.FW_ENABLED&&!this.getDisableFacewebHooks()){q.setNavBarTitle("\u6dfb\u52a0\u5730\u70b9");q.setNavBarButton("\u53d6\u6d88",this._cancel.bind(this),q.BUTTON_CANCEL,false,'left');}this.invoke('showed');h.show(this._root);};r.prototype._cancel=function(){"use strict";if(!this.invoke('cancel').getPrevented()){l.invoke('m:quicksearch:places:cancel');this.hide();}};r.prototype._submit=function(event){"use strict";if(i.bySigil(event.getTarget(),'place-tagger')!==this._root)return;var s=g.get(event.getNode('place_result'));s.new_place=false;this._placeResult=s;l.invoke('m:quicksearch:places:click',null,{results:event.getNode('id:places_search_results'),selected_result:event.getNode('place_result')});this.invoke('submit',s);event.kill();};r.prototype._showAddPlace=function(event){"use strict";var s=g.get(event.getNode('add_place_link')).name;this._newPlaceNameTextbox.value=s;h.hide(this._searchView);h.show(this._addPlaceView);var t=h.scry(this._addPlaceView,'*','map_view_container')[0];if(t)new k('/places/showmap.php').addData({target_id:t.id}).setMethod('GET').send();l.invoke('m:places:addplace:show');event.kill();};r.prototype._submitAddPlace=function(event){"use strict";var s=event.getData();this.hide();this.invoke('submit',s);event.kill();};r.prototype._submitFreeformPlace=function(event){"use strict";var s=g.get(event.getNode('freeform_link'));this.hide();this.invoke('submit',s);event.kill();};r.fromID=function(s){"use strict";var t=m(s),u=g.get(t);if(!u._placesTagger)u._placesTagger=new r(t);return u._placesTagger;};o(r,['searching','showed','submit','cancel']);n(r.prototype,{_hasLocation:false,_locationListener:null,_errorListener:null,_root:null,_addPlaceView:null,_errorMessage:null,_newPlaceName:null,_newPlaceNameTextbox:null,_searchView:null,_throbber:null,_listeners:null,_placeResult:null});e.exports=r;},null);
__d("MStructuredComposerFriendsInputReact",["Stratcom","CSS","DOM","React","MComposerLogger","MComposerNavigationMixin","MComposerWaterfallEvent","MSubscriptionsHandlerMixin","MTokenCollection.react","MTokenRenderer.react","TokenCollection","MUnifiedTaggerConstants","BanzaiODS","MCompositionWithStore","MCompositionWithFields","MCompositionUserActions","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x='mtouch_composer_facerec_suggestions',y=r.SHOW_UNIFIED_TAGGER,z=w(l,n);for(var aa in z)if(z.hasOwnProperty(aa))ca[aa]=z[aa];var ba=z===null?null:z.prototype;ca.prototype=Object.create(ba);ca.prototype.constructor=ca;ca.__superConstructor__=z;function ca(da,ea,fa){"use strict";this.$MStructuredComposerFriendsInputReact0=da;this.$MStructuredComposerFriendsInputReact1=ea;this.$MStructuredComposerFriendsInputReact2=new q();this.$MStructuredComposerFriendsInputReact3=j.render(j.createElement(o,{onClick:this.$MStructuredComposerFriendsInputReact4.bind(this),onRemove:this.$MStructuredComposerFriendsInputReact5.bind(this),renderer:p,collection:this.$MStructuredComposerFriendsInputReact2,collectionKey:"users_with"}),i.find(ea,'ul','friend-tokens'));this.$MStructuredComposerFriendsInputReact6=fa;this.$MStructuredComposerFriendsInputReact7=fa.style.display;this.$MStructuredComposerFriendsInputReact8={};if(y)this.addSubscriptions(g.listen('MComposer:tagger:click',r.TOKEN_TYPES.PEOPLE,function(){return this.$MStructuredComposerFriendsInputReact4();}.bind(this)));this.addSubscriptions(i.listen(this.$MStructuredComposerFriendsInputReact6,'click',null,function(){return this.$MStructuredComposerFriendsInputReact4();}.bind(this)),this.$MStructuredComposerFriendsInputReact0.listen('cancel',function(){this.currentNavigationPolicy().addOnClose(function(){return this.$MStructuredComposerFriendsInputReact9();}.bind(this)).close();}.bind(this)),this.$MStructuredComposerFriendsInputReact0.listen('submit',function(event){this.currentNavigationPolicy().addOnClose(function(){var ga={};ga[u.TOKENS]=event.tokens;v.withUpdate(ga);k.log(m.FRIEND_TAG_ADD,{num_tags:event.tokens.length});this.$MStructuredComposerFriendsInputReacta(event.tokens.length);}.bind(this)).close();}.bind(this)),t.addChangeListener(function(){return this.$MStructuredComposerFriendsInputReactb();}.bind(this)));}ca.prototype.$MStructuredComposerFriendsInputReactb=function(){"use strict";var da=t.get(u.TOKENS,[]);if(da!==this.$MStructuredComposerFriendsInputReact2.entries){this.$MStructuredComposerFriendsInputReact2.entries=da;this.$MStructuredComposerFriendsInputReactc();this.$MStructuredComposerFriendsInputReact3.forceUpdate();this.$MStructuredComposerFriendsInputReactd();this.$MStructuredComposerFriendsInputReacta();this.$MStructuredComposerFriendsInputReacte();}};ca.prototype.$MStructuredComposerFriendsInputReacte=function(){"use strict";this.$MStructuredComposerFriendsInputReactf&&this.$MStructuredComposerFriendsInputReactf(this.$MStructuredComposerFriendsInputReact2.entries.slice());};ca.prototype.$MStructuredComposerFriendsInputReactc=function(){"use strict";if(y)g.invoke('MComposer:tagger:update',null,{people:this.$MStructuredComposerFriendsInputReact2.entries});};ca.prototype.$MStructuredComposerFriendsInputReactg=function(da){"use strict";var ea=!this.$MStructuredComposerFriendsInputReact2.hasEntry(da);if(ea){this.$MStructuredComposerFriendsInputReact2.addEntry(da);this.$MStructuredComposerFriendsInputReactc();this.$MStructuredComposerFriendsInputReactd();this.$MStructuredComposerFriendsInputReact3.forceUpdate();}return ea;};ca.prototype.addManualXYTag=function(da){"use strict";if(this.$MStructuredComposerFriendsInputReactg(da))this.$MStructuredComposerFriendsInputReacth();this.$MStructuredComposerFriendsInputReacte();};ca.prototype.addAutoToken=function(da){"use strict";if(!this.$MStructuredComposerFriendsInputReact8[da.id])if(this.$MStructuredComposerFriendsInputReactg(da)){this.$MStructuredComposerFriendsInputReacti();s.bumpEntityKey(x,'add_auto_tag');}};ca.prototype.onRemove=function(da){"use strict";this.$MStructuredComposerFriendsInputReact2.removeEntry(da);this.$MStructuredComposerFriendsInputReactd();this.$MStructuredComposerFriendsInputReactc();this.$MStructuredComposerFriendsInputReact3.forceUpdate();this.$MStructuredComposerFriendsInputReacte();};ca.prototype.$MStructuredComposerFriendsInputReact5=function(da){"use strict";this.$MStructuredComposerFriendsInputReact8[da.id]=true;this.onRemove(da);if(da.autoTag)s.bumpEntityKey(x,'remove_auto_tag');this.$MStructuredComposerFriendsInputReactj();};ca.prototype.$MStructuredComposerFriendsInputReactd=function(){"use strict";var da=this.$MStructuredComposerFriendsInputReact2.entries.length>0;if(!y)h.conditionShow(this.$MStructuredComposerFriendsInputReact1,da);h.conditionClass(this.$MStructuredComposerFriendsInputReact6,'active',da);};ca.prototype.$MStructuredComposerFriendsInputReact4=function(){"use strict";this.newNavigationPolicy().addOnOpen(function(){k.log(m.FRIEND_TAG_INTENT);this.$MStructuredComposerFriendsInputReact0.setEntries(this.$MStructuredComposerFriendsInputReact2.entries.slice());setTimeout(this.$MStructuredComposerFriendsInputReact0.show.bind(this.$MStructuredComposerFriendsInputReact0));}.bind(this)).addOnCloseByBrowser(function(){this.$MStructuredComposerFriendsInputReact0.hide();this.$MStructuredComposerFriendsInputReact9();}.bind(this)).open();};ca.prototype.$MStructuredComposerFriendsInputReacta=function(da){"use strict";g.invoke('MStructuredComposerFriendsInput-done',null,{num_tags:da});};ca.prototype.$MStructuredComposerFriendsInputReacti=function(){"use strict";g.invoke('MStructuredComposerFriendsInput-addedAutoTags',null,{});};ca.prototype.$MStructuredComposerFriendsInputReacth=function(){"use strict";g.invoke('MStructuredComposerFriendsInput-addedManualXYTags',null,{});};ca.prototype.$MStructuredComposerFriendsInputReactj=function(){"use strict";g.invoke('MStructuredComposerFriendsInput-removedManualTags',null,{});};ca.prototype.$MStructuredComposerFriendsInputReact9=function(){"use strict";var da=this.getTokenCount();g.invoke('MStructuredComposerFriendsInput-done',null,{cancel:true,num_tags:da});k.log(m.FRIEND_TAG_CANCEL,{num_tags:da});};ca.prototype.reset=function(){"use strict";this.$MStructuredComposerFriendsInputReact3.entries=[];if(!y)i.hide(this.$MStructuredComposerFriendsInputReact1);this.$MStructuredComposerFriendsInputReact2.entries=[];this.$MStructuredComposerFriendsInputReact8={};this.$MStructuredComposerFriendsInputReact0.clear();this.$MStructuredComposerFriendsInputReact3.forceUpdate();h.conditionClass(this.$MStructuredComposerFriendsInputReact6,'active',false);this.$MStructuredComposerFriendsInputReact0.hide();};ca.prototype.getTokenCount=function(){"use strict";return this.$MStructuredComposerFriendsInputReact2.entries.length;};ca.prototype.hasTokens=function(){"use strict";return this.getTokenCount()>0;};ca.prototype.setVisible=function(da){"use strict";h.conditionShow(this.$MStructuredComposerFriendsInputReact6,da);};ca.prototype.setOnEntriesChangedHandler=function(da){"use strict";this.$MStructuredComposerFriendsInputReactf=da;};ca.prototype.getEntries=function(){"use strict";return this.$MStructuredComposerFriendsInputReact2.entries;};e.exports=ca;},null);
__d("MComposerLegacyPlaceAttachment",["CSS","DOM","MComposerLogger","MComposerWaterfallEvent","MCompositionConfigFields","MCompositionConfigStore","MCompositionPlaceFields","MCompositionPlaceStore","MCompositionUserActions","Stratcom","MSubscriptionsHandlerMixin","memoize","mixin","MUnifiedTaggerConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=b('MUnifiedTaggerConstants').SHOW_UNIFIED_TAGGER,u=s(q);for(var v in u)if(u.hasOwnProperty(v))x[v]=u[v];var w=u===null?null:u.prototype;x.prototype=Object.create(w);x.prototype.constructor=x;x.__superConstructor__=u;function x(y){"use strict";this.$MComposerLegacyPlaceAttachment0=y;this.$MComposerLegacyPlaceAttachment1=r(function(){return h.find(this.$MComposerLegacyPlaceAttachment0,'li','token');}.bind(this));this.$MComposerLegacyPlaceAttachment2=r(function(){return h.find(this.$MComposerLegacyPlaceAttachment1(),'a','remove-token');}.bind(this));this.addSubscriptions(n.addListener('change',function(){return this.$MComposerLegacyPlaceAttachment3();}.bind(this)),h.listen(this.$MComposerLegacyPlaceAttachment0,'click','remove-token',function(event){return this.$MComposerLegacyPlaceAttachment4(event);}.bind(this)),h.listen(this.$MComposerLegacyPlaceAttachment0,'click','at-button',function(){return this.$MComposerLegacyPlaceAttachment5();}.bind(this)));}x.prototype.$MComposerLegacyPlaceAttachment6=function(){"use strict";return !l.get(k.PIN_PLACE,false);};x.prototype.$MComposerLegacyPlaceAttachment7=function(){"use strict";return (!n.isEmpty()&&!l.get(k.DISABLE_PLACE_TAG,false));};x.prototype.$MComposerLegacyPlaceAttachment5=function(){"use strict";p.invoke('MStructuredComposer-addLocationClicked');};x.prototype.$MComposerLegacyPlaceAttachment3=function(){"use strict";if(t)return;g.conditionShow(this.$MComposerLegacyPlaceAttachment0,this.$MComposerLegacyPlaceAttachment7());g.conditionShow(this.$MComposerLegacyPlaceAttachment2(),this.$MComposerLegacyPlaceAttachment6());if(this.$MComposerLegacyPlaceAttachment7())h.replace(this.$MComposerLegacyPlaceAttachment1().firstChild,h.create('span',{className:'innerToken'},n.get(m.NAME)));};x.prototype.$MComposerLegacyPlaceAttachment4=function(event){"use strict";event.kill();p.invoke('MStructuredComposer-removedLocation');i.log(j.LOCATION_REMOVE);o.placeRemove();};e.exports=x;},null);
__d("MComposerStatusTextarea",["DOM","MCompositionConfigFields","MCompositionConfigStore","MCompositionStatusFields","MCompositionStatusStore","MCompositionUserActions","MJSEnvironment","MSubscriptionsHandlerMixin","MViewport","Stratcom","Style","debounceCore","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=480,u=(m.IS_ANDROID||m.IS_APPLE_WEBKIT_IOS||m.IS_CHROME||(m.IS_FIREFOX&&m.OS_VERSION>14));function v(aa){var ba=r(aa,300);return function(){for(var ca=[],da=0,ea=arguments.length;da<ea;da++)ca.push(arguments[da]);ba.reset();ba.apply(null,ca);};}var w=s(n);for(var x in w)if(w.hasOwnProperty(x))z[x]=w[x];var y=w===null?null:w.prototype;z.prototype=Object.create(y);z.prototype.constructor=z;z.__superConstructor__=w;function z(aa){"use strict";var ba=aa.textareaNode;this.$MComposerStatusTextarea0=ba;if(ba.tagName!=='TEXTAREA'){this.$MComposerStatusTextarea1=g.find(ba,'textarea');}else this.$MComposerStatusTextarea1=ba;if(m.IS_APPLE_WEBKIT_IOS&&!m.IS_CHROME&&m.OS_VERSION>=7&&o.getScreenHeight()<=t)q.set(this.$MComposerStatusTextarea1,'height','75px');this.addSubscriptions(k.addChangeListener(function(){return this.$MComposerStatusTextarea2();}.bind(this)),i.addChangeListener(function(){return this.$MComposerStatusTextarea3();}.bind(this)),g.listen(this.$MComposerStatusTextarea1,u?'input':'keyup',null,v(function(event){return this.$MComposerStatusTextarea4(event);}.bind(this))),p.listen('MMentions:change',null,function(event){return this.$MComposerStatusTextarea5(event);}.bind(this)),p.listen('MComposerStatusTextarea:flush',null,function(event){return this.$MComposerStatusTextarea6(event);}.bind(this)));}z.prototype.$MComposerStatusTextarea5=function(event){"use strict";var aa=event.getData().input;if(aa!==this.$MComposerStatusTextarea1)return;this.$MComposerStatusTextarea7(aa.value);};z.prototype.$MComposerStatusTextarea2=function(){"use strict";var aa=k.get(j.TEXT,'');this.$MComposerStatusTextarea1.value=aa;var ba=this.$MComposerStatusTextarea8();if(ba!==this.$MComposerStatusTextarea1)ba.value=aa;p.invoke('MJSPlaceholder');};z.prototype.$MComposerStatusTextarea3=function(){"use strict";var aa=i.get(h.INPUT_NAME),ba=this.$MComposerStatusTextarea8();if(ba.getAttribute('name')!==aa)ba.setAttribute('name',aa);};z.prototype.$MComposerStatusTextarea8=function(){"use strict";var aa=g.scry(this.$MComposerStatusTextarea0,'input','mentionsHiddenInput')[0];return aa||this.$MComposerStatusTextarea1;};z.prototype.$MComposerStatusTextarea4=function(event){"use strict";this.$MComposerStatusTextarea7(event.getTarget().value);};z.prototype.$MComposerStatusTextarea6=function(event){"use strict";this.$MComposerStatusTextarea7(event.getData().value);};z.prototype.$MComposerStatusTextarea7=function(aa){"use strict";var ba=this.$MComposerStatusTextarea1.selectionStart,ca=this.$MComposerStatusTextarea1.selectionEnd,da=this.$MComposerStatusTextarea1.scrollTop,ea={};ea[j.TEXT]=aa;l.statusUpdate(ea);this.$MComposerStatusTextarea1.scrollTop=da;this.$MComposerStatusTextarea1.setSelectionRange(ba,ca);};e.exports=z;},null);
__d("MComposerPlaceButton",["CSS","MCompositionConfigFields","MCompositionConfigStore","MCompositionPlaceStore","MSubscriptionsHandlerMixin","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=l(k);for(var n in m)if(m.hasOwnProperty(n))p[n]=m[n];var o=m===null?null:m.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=m;function p(q){"use strict";this.$MComposerPlaceButton0=q;this.addSubscriptions(i.addListener('change',function(){return this.$MComposerPlaceButton1();}.bind(this)),j.addListener('change',function(){return this.$MComposerPlaceButton2();}.bind(this)));}p.prototype.$MComposerPlaceButton3=function(){"use strict";return !j.isEmpty();};p.prototype.$MComposerPlaceButton4=function(){"use strict";return (!i.get(h.PIN_PLACE)&&!i.get(h.DISABLE_PLACE_TAG));};p.prototype.$MComposerPlaceButton1=function(){"use strict";g.conditionShow(this.$MComposerPlaceButton0,this.$MComposerPlaceButton4());};p.prototype.$MComposerPlaceButton2=function(){"use strict";g.conditionClass(this.$MComposerPlaceButton0,'active',this.$MComposerPlaceButton3());};e.exports=p;},null);
__d("MComposerDialogClearablePreview",["DOM","MSubscriptionsHandlerMixin","mixin","mixInEventEmitter","MComposerDialogClearablePreviewConstants"],function(a,b,c,d,e,f,g,h,i,j){var k=b('MComposerDialogClearablePreviewConstants').sigils,l=i(h);for(var m in l)if(l.hasOwnProperty(m))o[m]=l[m];var n=l===null?null:l.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=l;function o(p,q){"use strict";this.$MComposerDialogClearablePreview0=q;this.$MComposerDialogClearablePreview1=p;this.addSubscriptions(g.listen(this.$MComposerDialogClearablePreview1,'click',k.CLEAR,this.$MComposerDialogClearablePreview2.bind(this)));}o.prototype.clear=function(){"use strict";this.hide();g.setContent(this.$MComposerDialogClearablePreview0,'');return this;};o.prototype.$MComposerDialogClearablePreview2=function(){"use strict";this.clear();this.emit('clear');return this;};o.prototype.hide=function(){"use strict";g.hide(this.$MComposerDialogClearablePreview1);return this;};o.prototype.setValue=function(p){"use strict";g.setContent(this.$MComposerDialogClearablePreview0,p);this.show();return this;};o.prototype.show=function(){"use strict";g.show(this.$MComposerDialogClearablePreview1);return this;};o.prototype.showIfHasValue=function(){"use strict";return !this.$MComposerDialogClearablePreview0.innerText?this.hide():this.show();};j(o,{clear:true});e.exports=o;},null);
__d("MComposerPlaceDialog",["DOM","MComposerLogger","MComposerNavigationMixin","MComposerWaterfallEvent","MCompositionConfigFields","MCompositionPlaceFields","MCompositionConfigStore","MCompositionPlaceStore","MCompositionUserActions","MPlacesTagger","MUnifiedTaggerConstants","MSubscriptionsHandlerMixin","MRequest","Stratcom","getObjectValues","fbt","mixin","whitelistObjectKeys"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y=w(i,r);for(var z in y)if(y.hasOwnProperty(z))ba[z]=y[z];var aa=y===null?null:y.prototype;ba.prototype=Object.create(aa);ba.prototype.constructor=ba;ba.__superConstructor__=y;function ba(ca,da){"use strict";var ea=da.preview,fa=da.tagger;this.$MComposerPlaceDialog0=ea;this.$MComposerPlaceDialog1=ca;this.$MComposerPlaceDialog2=fa||new p(this.$MComposerPlaceDialog1);this.$MComposerPlaceDialog3=true;this.addSubscriptions(this.$MComposerPlaceDialog0.addListener('clear',function(){return this.$MComposerPlaceDialog4();}.bind(this)),this.$MComposerPlaceDialog2.listen('cancel',function(){return this.$MComposerPlaceDialog5();}.bind(this)),this.$MComposerPlaceDialog2.listen('submit',function(ga){return this.$MComposerPlaceDialog6(ga);}.bind(this)),n.addListener('change',function(){return this.$MComposerPlaceDialog7();}.bind(this)),t.listen('click','at-button',function(){return this.$MComposerPlaceDialog8();}.bind(this)),t.listen('open','MComposer:dialog:place',function(){this.$MComposerPlaceDialog3=false;this.$MComposerPlaceDialog8();}.bind(this)),t.listen('MComposer:tagger:click',q.TOKEN_TYPES.PLACE,function(){return this.$MComposerPlaceDialog8();}.bind(this)));}ba.prototype.$MComposerPlaceDialog9=function(){"use strict";o.placeRemove();this.$MComposerPlaceDialoga();};ba.prototype.$MComposerPlaceDialoga=function(){"use strict";this.$MComposerPlaceDialog2.hide();if(!this.$MComposerPlaceDialog3){this.$MComposerPlaceDialog3=true;t.invoke('close','MComposer:dialog:place');}};ba.prototype.$MComposerPlaceDialogb=function(){"use strict";return (!m.get(k.PIN_PLACE)&&!m.get(k.DISABLE_PLACE_TAG));};ba.prototype.$MComposerPlaceDialogc=function(){"use strict";return n.get(l.IS_NON_SPECIFIC);};ba.prototype.$MComposerPlaceDialog7=function(){"use strict";if(n.isEmpty()){this.$MComposerPlaceDialog0.clear();}else this.$MComposerPlaceDialog0.setValue(this.$MComposerPlaceDialogd());};ba.prototype.$MComposerPlaceDialog8=function(){"use strict";if(this.hasNavigationPolicy())return;if(!this.$MComposerPlaceDialogb()){this.$MComposerPlaceDialog3=true;return;}h.log(j.LOCATION_INTENT);if(this.$MComposerPlaceDialog3){this.newNavigationPolicy().addOnOpen(function(){return this.$MComposerPlaceDialoge();}.bind(this)).addOnClose(function(){return this.$MComposerPlaceDialoga();}.bind(this)).open();}else this.$MComposerPlaceDialoge();};ba.prototype.$MComposerPlaceDialog5=function(){"use strict";if(this.$MComposerPlaceDialog3&&!this.hasNavigationPolicy())return;h.log(j.LOCATION_CANCEL);if(this.$MComposerPlaceDialog3){this.currentNavigationPolicy().close();}else{this.$MComposerPlaceDialog3=true;t.invoke('cancel','MComposer:dialog:place');this.$MComposerPlaceDialog2.hide();}};ba.prototype.$MComposerPlaceDialog4=function(){"use strict";if(this.$MComposerPlaceDialog3&&!this.hasNavigationPolicy())return;h.log(j.LOCATION_CANCEL);if(this.$MComposerPlaceDialog3){this.currentNavigationPolicy().addOnClose(function(){return this.$MComposerPlaceDialog9();}.bind(this)).close();}else this.$MComposerPlaceDialoga();};ba.prototype.$MComposerPlaceDialog6=function(ca){"use strict";if(this.$MComposerPlaceDialog3&&!this.hasNavigationPolicy())return;h.log(j.LOCATION_ADD);if(this.$MComposerPlaceDialog3){this.currentNavigationPolicy().addOnClose(function(){return this.$MComposerPlaceDialogf(ca);}.bind(this)).close();}else{this.$MComposerPlaceDialoga();this.$MComposerPlaceDialogf(ca);}};ba.prototype.$MComposerPlaceDialoge=function(){"use strict";this.$MComposerPlaceDialog2.show();var ca=g.scry(this.$MComposerPlaceDialog1,'*','places-category-selector-container')[0];if(ca&&ca.id&&ca.children.length===0)new s('/places/addform/category.php').addData({target_id:ca.id,parent_id:0}).setMethod('GET').send();};ba.prototype.$MComposerPlaceDialogd=function(){"use strict";if(n.get(l.IS_NON_SPECIFIC)){return (v._("\u5728{non-specific-place-name}\u3002",[v.param("non-specific-place-name",n.get(l.NAME))]));}else return (v._("\u5728{place-name}",[v.param("place-name",n.get(l.NAME))]));};ba.prototype.$MComposerPlaceDialogf=function(ca){"use strict";o.placeSet(x(ca,u(l)));};e.exports=ba;},null);
__d("MComposerInputsWrapper",["DOM","MComposerStoreToInputMap","MCompositionDispatcher","MCompositionStore","destroyOnUnload"],function(a,b,c,d,e,f,g,h,i,j,k){function l(o){return h.hasOwnProperty(o.getID());}function m(o,p){return o+'-'+p;}function n(o){"use strict";this.$MComposerInputsWrapper0={};this.$MComposerInputsWrapper1=o;this.$MComposerInputsWrapper2=i.register(function(){return this.$MComposerInputsWrapper3();}.bind(this));k(function(){return i.unregister(this.$MComposerInputsWrapper2);}.bind(this));}n.prototype.$MComposerInputsWrapper4=function(){"use strict";return j.getRegisteredStores().filter(l);};n.prototype.$MComposerInputsWrapper3=function(){"use strict";var o=this.$MComposerInputsWrapper4();i.waitFor(o.map(function(p){return p.toUpdate();}));o.forEach(function(p){return this.$MComposerInputsWrapper5(p);}.bind(this));};n.prototype.$MComposerInputsWrapper5=function(o){"use strict";var p=o.getID(),q=h[p];Object.keys(q).forEach(function(r){this.$MComposerInputsWrapper6(p,q[r],o.get(r,''));}.bind(this));};n.prototype.$MComposerInputsWrapper6=function(o,p,q){"use strict";var r=m(o,p);if(!this.$MComposerInputsWrapper0.hasOwnProperty(r)){this.$MComposerInputsWrapper0[r]=g.create('input',{name:p,type:'hidden'});g.appendContent(this.$MComposerInputsWrapper1,this.$MComposerInputsWrapper0[r]);}this.$MComposerInputsWrapper0[r].value=q;};e.exports=n;},null);
__d("MComposerLegacyPlaceInput",["DOM","MCompositionPlaceFields","MCompositionPlaceStore","MSubscriptionsHandlerMixin","mixin"],function(a,b,c,d,e,f,g,h,i,j,k){var l=k(j);for(var m in l)if(l.hasOwnProperty(m))o[m]=l[m];var n=l===null?null:l.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=l;function o(p){"use strict";this.$MComposerLegacyPlaceInput0=p;this.$MComposerLegacyPlaceInput1=g.find(this.$MComposerLegacyPlaceInput0,'input','at-input');this.$MComposerLegacyPlaceInput2=g.find(this.$MComposerLegacyPlaceInput0,'input','new-place-cat-input');this.$MComposerLegacyPlaceInput3=g.find(this.$MComposerLegacyPlaceInput0,'input','new-place-is-current');this.$MComposerLegacyPlaceInput4=g.find(this.$MComposerLegacyPlaceInput0,'input','new-place-name-input');this.$MComposerLegacyPlaceInput5=g.find(this.$MComposerLegacyPlaceInput0,'input','new-place-phone-input');this.$MComposerLegacyPlaceInput6=g.find(this.$MComposerLegacyPlaceInput0,'input','new-place-website-input');this.$MComposerLegacyPlaceInput7=g.find(this.$MComposerLegacyPlaceInput0,'input','new-place-address-input');this.$MComposerLegacyPlaceInput8=g.find(this.$MComposerLegacyPlaceInput0,'input','new-place-freeform');this.$MComposerLegacyPlaceInput9=g.find(this.$MComposerLegacyPlaceInput0,'input','json-location');this.$MComposerLegacyPlaceInputa=g.find(this.$MComposerLegacyPlaceInput0,'input','is-checkin');this.addSubscriptions(i.addListener('change',this.$MComposerLegacyPlaceInputb.bind(this)));}o.prototype.$MComposerLegacyPlaceInputc=function(){"use strict";this.$MComposerLegacyPlaceInput1.value='';this.$MComposerLegacyPlaceInput4.value='';this.$MComposerLegacyPlaceInput5.value='';this.$MComposerLegacyPlaceInput6.value='';this.$MComposerLegacyPlaceInput7.value='';g.setContent(this.$MComposerLegacyPlaceInput2,null);this.$MComposerLegacyPlaceInput8.value='';this.$MComposerLegacyPlaceInput3.value='';this.$MComposerLegacyPlaceInput9.value='{}';this.$MComposerLegacyPlaceInputa.value='';};o.prototype.$MComposerLegacyPlaceInputb=function(){"use strict";if(i.isEmpty()){this.$MComposerLegacyPlaceInputc();}else this.$MComposerLegacyPlaceInputd();};o.prototype.$MComposerLegacyPlaceInputd=function(){"use strict";this.$MComposerLegacyPlaceInputc();this.$MComposerLegacyPlaceInputa.value=true;if(i.get(h.ID,false)){this.$MComposerLegacyPlaceInput1.value=i.get(h.ID);}else this.$MComposerLegacyPlaceInput8.value=i.get(h.NAME,'');this.$MComposerLegacyPlaceInput9.value=i.get(h.JSON_LOCATION,'{}');if(i.get(h.IS_NEW)){this.$MComposerLegacyPlaceInput4.value=i.get(h.NAME,'');this.$MComposerLegacyPlaceInput5.value=i.get(h.PHONE,'');this.$MComposerLegacyPlaceInput6.value=i.get(h.WEBSITE,'');this.$MComposerLegacyPlaceInput7.value=i.get(h.ADDRESS,'');this.$MComposerLegacyPlaceInput8.value='';this.$MComposerLegacyPlaceInput3.value=i.get(h.IS_CURRENT,'');var p=i.get(h.TOPIC_TOKENS);if(p.value){this.$MComposerLegacyPlaceInput2.value=p.value;}else g.setContent(this.$MComposerLegacyPlaceInput2,p.map(function(q){return q.cloneNode(true);}));}};e.exports=o;},null);
__d("MPagesStarsRatableBase",["CSS","DataStore","DOM","Stratcom"],function(a,b,c,d,e,f,g,h,i,j){function k(l,m,n){"use strict";this.root=l;this.stars=i.scry(l,'span','stars-ratable-star');this.hiddenInput=i.find(l,'input','stars-ratable-input');this.ratingTextContainer=n;this.listeners=[i.listen(this.root,'click','star-link',this._onClick.bind(this)),j.listen('MPagesStarsRatableBase-setStars',null,function(event){this.setRating(event.getData().rating);}.bind(this))];this.setRating(m);var o=this.listeners;j.listen('m:page:unload',null,function(){j.removeCurrentListener();o.forEach(function(p){p.remove();});});}k.prototype._onClick=function(event){"use strict";var l=this._getStarIndexFromEvent(event);if(l)this.setRating(l);event.prevent();};k.prototype._getStarIndexFromEvent=function(event){"use strict";var l=event.getTarget();if(l.nodeName==="A")l=i.find(l,'span','stars-ratable-star');return this.stars.indexOf(l)+1;};k.prototype.setRating=function(l){"use strict";for(var m=0;m<this.stars.length;++m){var n=(m>=l);g.conditionClass(this.stars[m],'fullStar',!n);g.conditionClass(this.stars[m],'emptyStar',n);}this.hiddenInput.value=l;if(l)if(this.ratingTextContainer)this.ratingTextContainer.textContent=h.get(this.stars[l-1]).tooltip;j.invoke('MPagesStarsRatableBase-starsSet');};k.init=function(l,m,n){"use strict";new k(l,m,n);};e.exports=k;},null);
__d("MPlacesCurrentLocation",["MPlaces"],function(a,b,c,d,e,f,g){var h=function(i){g.setCurrentJSONLocation(i.location);g.setLocationSearchMode(i.mode);if(i.mode==g.locationSearchModes.MODE_CHECKIN)g.monitorLocation();};f.main=h;},null);
__d("MPlacesInit",["MPlaces","Stratcom"],function(a,b,c,d,e,f,g,h){if(typeof window.usingGears!=='undefined')g.locationOptions.enableHighAccuracy=false;h.listen('click',g.LINK_SIGIL,g.onClick);h.listen('submit',g.FORM_SIGIL,g.onSubmit);},null);
__d("MQuickSearchLogger",[],function(a,b,c,d,e,f){function g(){"use strict";this.$MQuickSearchLogger0=false;this.$MQuickSearchLogger1=false;this.$MQuickSearchLogger2=null;}g.prototype.$MQuickSearchLogger3=function(){"use strict";this.$MQuickSearchLogger0=true;this.$MQuickSearchLogger1=false;this.$MQuickSearchLogger4=Math.random();};g.prototype.$MQuickSearchLogger5=function(){"use strict";this.$MQuickSearchLogger0=false;};g.prototype.logSessionStart=function(h){"use strict";};g.prototype.logResults=function(h,i){"use strict";};g.prototype.logClick=function(h){"use strict";};g.prototype.onSearch=function(h){"use strict";if(!this.$MQuickSearchLogger0){this.$MQuickSearchLogger3();this.logSessionStart(h);}this.$MQuickSearchLogger2=h;};g.prototype.onResults=function(h,i){"use strict";this.logResults(h,i);};g.prototype.onCleanup=function(){"use strict";this.$MQuickSearchLogger5();};g.prototype.onClick=function(h){"use strict";if(!this.$MQuickSearchLogger1){this.logClick(h);this.$MQuickSearchLogger1=true;this.$MQuickSearchLogger5();}};g.prototype.getSID=function(){"use strict";return this.$MQuickSearchLogger4;};g.prototype.getLastRequest=function(){"use strict";return this.$MQuickSearchLogger2;};e.exports=g;},null);
__d("MQuickSearchLoggerPlaces",["MQuickSearchLogger","MarauderLogger","DataStore"],function(a,b,c,d,e,f,g,h,i){for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(){"use strict";g.call(this);}l.prototype.logSessionStart=function(m){"use strict";h.log('m_checkin_search_session_start',undefined,{sid:this.getSID()});};l.prototype.logResults=function(m,n){"use strict";h.log('m_checkin_search_results',undefined,{sid:this.getSID(),search_experiment:i.get(n).searchExperiment});};l.prototype.logClick=function(m){"use strict";var n=false,o=-1;if(m){var p=i.get(m.selected_result);if(p!==null)n=p.isEventResult;var q=[];if(m.results!==null&&m.results.children!==null)q=m.results.children;for(var r=0;r<q.length;r++){var s=i.get(q[r]);if(p.id===s.id){o=r;break;}}}var t=-1;if(this.getLastRequest()!==null){var u=this.getLastRequest();if(u.hasOwnProperty('q')&&u.q.hasOwnProperty('length'))t=this.getLastRequest().q.length;}h.log('m_checkin_search_click',undefined,{sid:this.getSID(),query_length:t,position:o,is_event:n});};e.exports=l;},null);
__d("MQuickSearchPlaces",["MPlaces","MQuickSearch","MQuickSearchLoggerPlaces","Stratcom"],function(a,b,c,d,e,f,g,h,i,j){function k(l){"use strict";var m,n,o=new i(),p=new h(l,o),q=p.listen('search',function(u){var v=g.getCurrentJSONLocation();if(v==m&&u==n){j.context().prevent();return;}m=g.getCurrentJSONLocation();n=u;var w={json_location:m};w[g.locationSearchModes.SEARCH_MODE]=g.getLocationSearchMode();p.maybeAddQueryParameters(w);j.invoke('m:quicksearch:location:change',null,v);}),r=j.listen('m:quicksearch:places:search',null,function(){p.search();}),s=j.listen('m:quicksearch:places:cancel',null,function(){return p.reset();}),t=j.listen('m:quicksearch:places:click',null,function(event){o.onClick(event.getData());});j.listen('m:page:loading',null,function(){j.removeCurrentListener();q.remove();r.remove();s.remove();t.remove();q=r=m=n=p=null;});}e.exports=k;},null);
__d("MPrivacyDeferredSelector",["Stratcom","MRequest","MRequestTypes","MURI"],function(a,b,c,d,e,f,g,h,i,j){var k=null,l=null,m=null,n=false;function o(s,t,u){l=s;k=t;m=u;g.listen('MPrivacyDeferredSelector::init',null,function(event){p(event);g.removeCurrentListener();});}function p(event){var s=new j('/privacy/selector');s.setQueryData({pt_id:l,eco:k,selected:m}).setAsync(true);var t=new h(s.toString());t.setType(i.DEPENDENT);t.send();}function q(s){g.invoke('MPrivacyDeferredSelector-loaded',null,{id:s});}function r(s){n=s;}e.exports={init:o,informLoaded:q,setShowNewcomerAudienceSelector:r};},null);
__d("MSharePreview",["$","CSS","DOM","MRequest","MCompositionShareFields","MCompositionShareStore","MCompositionUserActions","MSubscriptionsHandlerMixin","XSharePreviewAsyncControllerURIBuilder","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=p(n);for(var r in q)if(q.hasOwnProperty(r))t[r]=q[r];var s=q===null?null:q.prototype;t.prototype=Object.create(s);t.prototype.constructor=t;t.__superConstructor__=q;function t(u){"use strict";this.$MSharePreview0=i.scry(u,'div')[0];this.addSubscriptions(l.addListener('change',function(){return this.$MSharePreview1();}.bind(this)),i.listen(u,'click','close-link-preview-button',function(event){m.shareRemoveLinkPreview(l.get(k.SHARE_URI));m.configDisablePhotosUpdate(false);}));}t.prototype.$MSharePreview1=function(){"use strict";if(this.$MSharePreview2){this.$MSharePreview2.abort();this.$MSharePreview2=null;}if(l.isEmpty()){i.setContent(g('mshare_preview_placeholder'),null);}else{var u=l.get(k.ID),v=l.get(k.SHARE_URI);if(!u&&!v){i.setContent(g('mshare_preview_placeholder'),null);h.hide(this.$MSharePreview0);return;}h.show(this.$MSharePreview0);var w=new o().setString('sid',u&&u.toString()).setString('surl',v).getURI();this.$MSharePreview2=new j(w);this.$MSharePreview2.listen('finally',function(){h.hide(this.$MSharePreview0);this.$MSharePreview2=null;}.bind(this));this.$MSharePreview2.send();}};e.exports=t;},null);